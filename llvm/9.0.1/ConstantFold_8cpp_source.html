<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/IR/ConstantFold.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_bfcfa2223a05221bedc89835a6573260.html">IR</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">ConstantFold.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="ConstantFold_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">//===- ConstantFold.cpp - LLVM constant folder ----------------------------===//</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">//</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">//</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">//</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// This file implements folding of constants for LLVM.  This implements the</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// (internal) ConstantFold.h interface, which is used by the</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// ConstantExpr::get* methods to automatically fold constants when possible.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">//</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">// The current constant folding implementation is implemented in two pieces: the</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">// pieces that don&#39;t need DataLayout, and the pieces that do. This is to avoid</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">// a dependence in IR on Target.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">//</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="ConstantFold_8h.html">ConstantFold.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;llvm/ADT/APSInt.h&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;llvm/ADT/SmallVector.h&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="GetElementPtrTypeIterator_8h.html">llvm/IR/GetElementPtrTypeIterator.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="GlobalAlias_8h.html">llvm/IR/GlobalAlias.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="ManagedStatic_8h.html">llvm/Support/ManagedStatic.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment">//                ConstantFold*Instruction Implementations</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment"></span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">/// Convert the specified vector Constant node to the specified vector type.</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">/// At this point, we know that the elements of the input vector constant are</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">/// all simple integer or FP values.</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#ab12afb6f2b1ebcdfd5bd5609210f4eb7">   45</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#ab12afb6f2b1ebcdfd5bd5609210f4eb7">BitCastConstantVector</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CV, <a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *DstTy) {</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  <span class="keywordflow">if</span> (CV-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">isAllOnesValue</a>()) <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(DstTy);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keywordflow">if</span> (CV-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(DstTy);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  <span class="comment">// If this cast changes element count then we can&#39;t handle it here:</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <span class="comment">// doing so requires endianness information.  This should be handled by</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <span class="comment">// Analysis/ConstantFolding.cpp</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  <span class="keywordtype">unsigned</span> NumElts = DstTy-&gt;<a class="code hl_function" href="classllvm_1_1SequentialType.html#ad165a36624f4374d6ea5238eaeff80b6">getNumElements</a>();</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <span class="keywordflow">if</span> (NumElts != CV-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>())</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DstEltTy = DstTy-&gt;<a class="code hl_function" href="classllvm_1_1SequentialType.html#a4412918dc9c2ccb6de632fbf82ab3964">getElementType</a>();</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(CV-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 32);</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != NumElts; ++i) {</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C =</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>      <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(CV, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(C, DstEltTy);</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    Result.push_back(C);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  }</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>}</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment"></span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">/// This function determines which opcode to use to fold two constant cast</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="comment">/// expressions together. It uses CastInst::isEliminableCastPair to determine</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="comment">/// the opcode. Consequently its just a wrapper around that function.</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="comment">/// Determine if it is valid to fold a cast of a cast</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a08c03a4228af93098afb6ab60e7283f6">   76</a></span><a class="code hl_function" href="ConstantFold_8cpp.html#a08c03a4228af93098afb6ab60e7283f6">foldConstantCastPair</a>(</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  <span class="keywordtype">unsigned</span> opc,          <span class="comment">///&lt; opcode of the second cast constant expression</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  <a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *Op,      <span class="comment">///&lt; the first cast constant expression</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DstTy            <span class="comment">///&lt; destination type of the first cast</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>) {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(Op &amp;&amp; Op-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a2c9fe4fbe6ac4c180d6d2547c05d33c9">isCast</a>() &amp;&amp; <span class="stringliteral">&quot;Can&#39;t fold cast of cast without a cast!&quot;</span>);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(DstTy &amp;&amp; DstTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a82a7e98c00f5bb12e2c5481fe0ab3f1a">isFirstClassType</a>() &amp;&amp; <span class="stringliteral">&quot;Invalid cast destination type&quot;</span>);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(CastInst::isCast(opc) &amp;&amp; <span class="stringliteral">&quot;Invalid cast opcode&quot;</span>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="comment">// The types and opcodes for the two Cast constant expressions</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *SrcTy = Op-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0)-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>();</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *MidTy = Op-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>();</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <a class="code hl_enumeration" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> firstOp = <a class="code hl_enumeration" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(Op-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>());</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <a class="code hl_enumeration" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> secondOp = <a class="code hl_enumeration" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(opc);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <span class="comment">// Assume that pointers are never more than 64 bits wide, and only use this</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <span class="comment">// for the middle type. Otherwise we could end up folding away illegal</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  <span class="comment">// bitcasts between address spaces with different sizes.</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <a class="code hl_class" href="classllvm_1_1IntegerType.html">IntegerType</a> *FakeIntPtrTy = <a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a64748b5a9f8d8dd4499f84312e2c1336">Type::getInt64Ty</a>(DstTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a909eca4ba9e5eefc203c8e3770bdab25">getContext</a>());</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>  <span class="comment">// Let CastInst::isEliminableCastPair do the heavy lifting.</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1CastInst.html#a8b805c54dc1ead67b711a4b1cb72f492">CastInst::isEliminableCastPair</a>(firstOp, secondOp, SrcTy, MidTy, DstTy,</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                                        <span class="keyword">nullptr</span>, FakeIntPtrTy, <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>}</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a79061cbffefa2eccfe0d30d1c07eed78">  101</a></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#a79061cbffefa2eccfe0d30d1c07eed78">FoldBitCast</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V, <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DestTy) {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *SrcTy = V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>();</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  <span class="keywordflow">if</span> (SrcTy == DestTy)</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="keywordflow">return</span> V; <span class="comment">// no-op cast</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  <span class="comment">// Check to see if we are casting a pointer to an aggregate to a pointer to</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <span class="comment">// the first element.  If so, return the appropriate GEP instruction.</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()))</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *DPTy = dyn_cast&lt;PointerType&gt;(DestTy))</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>      <span class="keywordflow">if</span> (PTy-&gt;getAddressSpace() == DPTy-&gt;getAddressSpace()</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>          &amp;&amp; PTy-&gt;getElementType()-&gt;isSized()) {</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Value*, 8&gt;</a> IdxList;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <a class="code hl_class" href="classllvm_1_1Value.html">Value</a> *Zero =</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>          <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a5852dc0d180581d34902e8abcbf7e930">Type::getInt32Ty</a>(DPTy-&gt;getContext()));</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        IdxList.push_back(Zero);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *ElTy = PTy-&gt;getElementType();</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <span class="keywordflow">while</span> (ElTy != DPTy-&gt;getElementType()) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(ElTy)) {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>            <span class="keywordflow">if</span> (STy-&gt;getNumElements() == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>            ElTy = STy-&gt;getElementType(0);</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            IdxList.push_back(Zero);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1SequentialType.html">SequentialType</a> *STy =</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                     dyn_cast&lt;SequentialType&gt;(ElTy)) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            ElTy = STy-&gt;getElementType();</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>            IdxList.push_back(Zero);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>          }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">if</span> (ElTy == DPTy-&gt;getElementType())</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>          <span class="comment">// This GEP is inbounds because all indices are zero.</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a0fbdc8f9ebcc506b52a9f5c82feb363e">ConstantExpr::getInBoundsGetElementPtr</a>(PTy-&gt;getElementType(),</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                                                        V, IdxList);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>  <span class="comment">// Handle casts from one vector constant to another.  We know that the src</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>  <span class="comment">// and dest type have the same size (otherwise its an illegal cast).</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *DestPTy = dyn_cast&lt;VectorType&gt;(DestTy)) {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *SrcTy = dyn_cast&lt;VectorType&gt;(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>())) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>      <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(DestPTy-&gt;getBitWidth() == SrcTy-&gt;getBitWidth() &amp;&amp;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>             <span class="stringliteral">&quot;Not cast between same sized vectors!&quot;</span>);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>      SrcTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>      <span class="comment">// First, check for null.  Undef is already handled.</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>      <span class="keywordflow">if</span> (isa&lt;ConstantAggregateZero&gt;(V))</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(DestTy);</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>      <span class="comment">// Handle ConstantVector and ConstantAggregateVector.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#ab12afb6f2b1ebcdfd5bd5609210f4eb7">BitCastConstantVector</a>(V, DestPTy);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// Canonicalize scalar-to-vector bitcasts into vector-to-vector bitcasts</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// This allows for other simplifications (although some of them</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// can only be handled by Analysis/ConstantFolding.cpp).</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(V) || isa&lt;ConstantFP&gt;(V))</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(<a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(V), DestPTy);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  }</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="comment">// Finally, implement bitcast folding now.   The code below doesn&#39;t handle</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  <span class="comment">// bitcast right.</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V))  <span class="comment">// ptr-&gt;ptr cast.</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(cast&lt;PointerType&gt;(DestTy));</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="comment">// Handle integral constant input.</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>      <span class="comment">// Integral -&gt; Integral. This is a no-op because the bit widths must</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>      <span class="comment">// be the same. Consequently, we just fold to V.</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>      <span class="keywordflow">return</span> V;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// See note below regarding the PPC_FP128 restriction.</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordflow">if</span> (DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() &amp;&amp; !DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">isPPC_FP128Ty</a>())</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a909eca4ba9e5eefc203c8e3770bdab25">getContext</a>(),</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                             APFloat(DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a187de29e4101f5b579437d573ec2efa1">getFltSemantics</a>(),</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                     CI-&gt;getValue()));</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="comment">// Otherwise, can&#39;t fold this (vector?)</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <span class="comment">// Handle ConstantFP input: FP -&gt; Integral.</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *FP = dyn_cast&lt;ConstantFP&gt;(V)) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="comment">// PPC_FP128 is really the sum of two consecutive doubles, where the first</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// double is always stored first in memory, regardless of the target</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="comment">// endianness. The memory layout of i128, however, depends on the target</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="comment">// endianness, and so we can&#39;t fold this without target endianness</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// information. This should instead be handled by</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// Analysis/ConstantFolding.cpp</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="keywordflow">if</span> (FP-&gt;getType()-&gt;isPPC_FP128Ty())</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// Make sure dest type is compatible with the folded integer constant.</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">if</span> (!DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(FP-&gt;getContext(),</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>                            FP-&gt;getValueAPF().bitcastToAPInt());</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>}</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment"></span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">/// V is an integer constant which only has a subset of its bytes used.</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="comment">/// The bytes used are indicated by ByteStart (which is the first byte used,</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="comment">/// counting from the least significant byte) and ByteSize, which is the number</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span><span class="comment">/// of bytes used.</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="comment">///</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="comment">/// This function analyzes the specified constant to see if the specified byte</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="comment">/// range can be returned as a simplified constant.  If so, the constant is</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span><span class="comment">/// returned, otherwise null is returned.</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">  212</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C, <span class="keywordtype">unsigned</span> ByteStart,</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                                      <span class="keywordtype">unsigned</span> ByteSize) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(C-&gt;getType()-&gt;isIntegerTy() &amp;&amp;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>         (cast&lt;IntegerType&gt;(C-&gt;getType())-&gt;getBitWidth() &amp; 7) == 0 &amp;&amp;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>         <span class="stringliteral">&quot;Non-byte sized integer input&quot;</span>);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <span class="keywordtype">unsigned</span> CSize = cast&lt;IntegerType&gt;(C-&gt;getType())-&gt;getBitWidth()/8;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(ByteSize &amp;&amp; <span class="stringliteral">&quot;Must be accessing some piece&quot;</span>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(ByteStart+ByteSize &lt;= CSize &amp;&amp; <span class="stringliteral">&quot;Extracting invalid piece from input&quot;</span>);</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(ByteSize != CSize &amp;&amp; <span class="stringliteral">&quot;Should not extract everything&quot;</span>);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="comment">// Constant Integers are simple.</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(C)) {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    APInt V = CI-&gt;getValue();</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="keywordflow">if</span> (ByteStart)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>      V.lshrInPlace(ByteStart*8);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    V = V.trunc(ByteSize*8);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI-&gt;getContext(), V);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  }</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="comment">// In the input is a constant expr, we might be able to recursively simplify.</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  <span class="comment">// If not, we definitely can&#39;t do anything.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(C);</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <span class="keywordflow">if</span> (!CE) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="keywordflow">switch</span> (CE-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>()) {</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>  <span class="keywordflow">case</span> Instruction::Or: {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *RHS = <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1), ByteStart,ByteSize);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <span class="keywordflow">if</span> (!RHS)</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="comment">// X | -1 -&gt; -1.</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RHSC = dyn_cast&lt;ConstantInt&gt;(RHS))</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>      <span class="keywordflow">if</span> (RHSC-&gt;isMinusOne())</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">return</span> RHSC;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span> </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *LHS = <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0), ByteStart,ByteSize);</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="keywordflow">if</span> (!LHS)</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">ConstantExpr::getOr</a>(LHS, RHS);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>  }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>  <span class="keywordflow">case</span> Instruction::And: {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *RHS = <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1), ByteStart,ByteSize);</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="keywordflow">if</span> (!RHS)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="comment">// X &amp; 0 -&gt; 0.</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span> (RHS-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>      <span class="keywordflow">return</span> RHS;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *LHS = <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0), ByteStart,ByteSize);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordflow">if</span> (!LHS)</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(LHS, RHS);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="keywordflow">case</span> Instruction::LShr: {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = dyn_cast&lt;ConstantInt&gt;(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1));</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="keywordflow">if</span> (!Amt)</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    APInt ShAmt = Amt-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#af7e1934ed72a405ef073ea5f9bbe828e">getValue</a>();</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="comment">// Cannot analyze non-byte shifts.</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="keywordflow">if</span> ((ShAmt &amp; 7) != 0)</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    ShAmt.lshrInPlace(3);</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="comment">// If the extract is known to be all zeros, return zero.</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keywordflow">if</span> (ShAmt.uge(CSize - ByteStart))</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>          <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), ByteSize * 8));</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="comment">// If the extract is known to be fully in the input, extract it.</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keywordflow">if</span> (ShAmt.ule(CSize - (ByteStart + ByteSize)))</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0),</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>                                  ByteStart + ShAmt.getZExtValue(), ByteSize);</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span> </div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>  }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>  <span class="keywordflow">case</span> Instruction::Shl: {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Amt = dyn_cast&lt;ConstantInt&gt;(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1));</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keywordflow">if</span> (!Amt)</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    APInt ShAmt = Amt-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#af7e1934ed72a405ef073ea5f9bbe828e">getValue</a>();</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="comment">// Cannot analyze non-byte shifts.</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="keywordflow">if</span> ((ShAmt &amp; 7) != 0)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    ShAmt.lshrInPlace(3);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="comment">// If the extract is known to be all zeros, return zero.</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="keywordflow">if</span> (ShAmt.uge(ByteStart + ByteSize))</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>          <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), ByteSize * 8));</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="comment">// If the extract is known to be fully in the input, extract it.</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">if</span> (ShAmt.ule(ByteStart))</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0),</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                                  ByteStart - ShAmt.getZExtValue(), ByteSize);</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <span class="keywordflow">case</span> Instruction::ZExt: {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keywordtype">unsigned</span> SrcBitSize =</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>      cast&lt;IntegerType&gt;(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0)-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getBitWidth();</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="comment">// If extracting something that is completely zero, return 0.</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keywordflow">if</span> (ByteStart*8 &gt;= SrcBitSize)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                                                     ByteSize*8));</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="comment">// If exactly extracting the input, return it.</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keywordflow">if</span> (ByteStart == 0 &amp;&amp; ByteSize*8 == SrcBitSize)</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>      <span class="keywordflow">return</span> CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="comment">// If extracting something completely in the input, if the input is a</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="comment">// multiple of 8 bits, recurse.</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordflow">if</span> ((SrcBitSize&amp;7) == 0 &amp;&amp; (ByteStart+ByteSize)*8 &lt;= SrcBitSize)</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0), ByteStart, ByteSize);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span> </div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="comment">// Otherwise, if extracting a subset of the input, which is not multiple of</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// 8 bits, do a shift and trunc to get the bits.</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">if</span> ((ByteStart+ByteSize)*8 &lt; SrcBitSize) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>      <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>((SrcBitSize&amp;7) &amp;&amp; <span class="stringliteral">&quot;Shouldn&#39;t get byte sized case here&quot;</span>);</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Res = CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>      <span class="keywordflow">if</span> (ByteStart)</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        Res = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(Res,</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                                 <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Res-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>(), ByteStart*8));</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(Res, <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(C-&gt;getContext(),</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                                                          ByteSize*8));</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="comment">// TODO: Handle the &#39;partially zero&#39; case.</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>  }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>}</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="comment"></span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">/// Return a ConstantExpr with type DestTy for sizeof on Ty, with any known</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="comment">/// factors factored out. If Folded is false, return null if no factoring was</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="comment">/// possible, to avoid endlessly bouncing an unfoldable expression back into the</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment">/// top-level folder.</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">  353</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(<a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DestTy, <span class="keywordtype">bool</span> Folded) {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DestTy, ATy-&gt;getNumElements());</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *E = <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(ATy-&gt;getElementType(), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af3c28b1d57df24c21713539354cecfeb">ConstantExpr::getNUWMul</a>(E, <a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty))</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keywordflow">if</span> (!STy-&gt;isPacked()) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>      <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>      <span class="comment">// An empty struct has size zero.</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>        <span class="keywordflow">return</span> ConstantExpr::getNullValue(DestTy);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>      <span class="comment">// Check for a struct with all members having the same size.</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *MemberSize =</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>      <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">if</span> (MemberSize !=</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>          AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>      <span class="keywordflow">if</span> (AllSame) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DestTy, NumElems);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af3c28b1d57df24c21713539354cecfeb">ConstantExpr::getNUWMul</a>(MemberSize, <a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>      }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>  <span class="comment">// Pointer size doesn&#39;t depend on the pointee type, so canonicalize them</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>  <span class="comment">// to an arbitrary pointee.</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Ty))</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="keywordflow">if</span> (!PTy-&gt;getElementType()-&gt;isIntegerTy(1))</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>      <span class="keywordflow">return</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(<a class="code hl_function" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(<a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(PTy-&gt;getContext(), 1),</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>                                         PTy-&gt;getAddressSpace()),</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                        DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  <span class="comment">// Base case: Get a regular sizeof expression.</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>  <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a778163e6ec80716a12ab3282cb97f0d9">ConstantExpr::getSizeOf</a>(Ty);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(C, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                            C, DestTy);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>  <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>}</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="comment"></span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment">/// Return a ConstantExpr with type DestTy for alignof on Ty, with any known</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">/// factors factored out. If Folded is false, return null if no factoring was</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">/// possible, to avoid endlessly bouncing an unfoldable expression back into the</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="comment">/// top-level folder.</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">  408</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a>(<a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DestTy, <span class="keywordtype">bool</span> Folded) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>  <span class="comment">// The alignment of an array is equal to the alignment of the</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  <span class="comment">// array element. Note that this is not always true for vectors.</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a0af04c89840d424b7b33ae71d7c8cd28">ConstantExpr::getAlignOf</a>(ATy-&gt;getElementType());</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(C, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>                                                      DestTy,</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>                                                      <span class="keyword">false</span>),</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>                              C, DestTy);</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="comment">// Packed structs always have an alignment of 1.</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">if</span> (STy-&gt;isPacked())</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DestTy, 1);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <span class="comment">// Otherwise, struct alignment is the maximum alignment of any member.</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// Without target data, we can&#39;t compare much, but we can check to see</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <span class="comment">// if all the members have the same alignment.</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">// An empty struct has minimal alignment.</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DestTy, 1);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    <span class="comment">// Check for a struct with all members having the same alignment.</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *MemberAlign =</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>      <a class="code hl_function" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>      <span class="keywordflow">if</span> (MemberAlign != <a class="code hl_function" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>      }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <span class="keywordflow">if</span> (AllSame)</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>      <span class="keywordflow">return</span> MemberAlign;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>  <span class="comment">// Pointer alignment doesn&#39;t depend on the pointee type, so canonicalize them</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="comment">// to an arbitrary pointee.</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *PTy = dyn_cast&lt;PointerType&gt;(Ty))</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="keywordflow">if</span> (!PTy-&gt;getElementType()-&gt;isIntegerTy(1))</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      <span class="keywordflow">return</span></div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a>(<a class="code hl_function" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(<a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(PTy-&gt;getContext(),</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                                                           1),</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                                          PTy-&gt;getAddressSpace()),</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                         DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span> </div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>  <span class="comment">// Base case: Get a regular alignof expression.</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a0af04c89840d424b7b33ae71d7c8cd28">ConstantExpr::getAlignOf</a>(Ty);</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(C, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                            C, DestTy);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>  <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>}</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span><span class="comment"></span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="comment">/// Return a ConstantExpr with type DestTy for offsetof on Ty and FieldNo, with</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span><span class="comment">/// any known factors factored out. If Folded is false, return null if no</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="comment">/// factoring was possible, to avoid endlessly bouncing an unfoldable expression</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span><span class="comment">/// back into the top-level folder.</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#add5a81ce61f160fb6cbc0212d4fd2c4f">  472</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="ConstantFold_8cpp.html#add5a81ce61f160fb6cbc0212d4fd2c4f">getFoldedOffsetOf</a>(<a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *FieldNo, <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DestTy,</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                                   <span class="keywordtype">bool</span> Folded) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(FieldNo, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                                                                DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                                        FieldNo, DestTy);</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *E = <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(ATy-&gt;getElementType(), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af3c28b1d57df24c21713539354cecfeb">ConstantExpr::getNUWMul</a>(E, <a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty))</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">if</span> (!STy-&gt;isPacked()) {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>      <span class="keywordtype">unsigned</span> NumElems = STy-&gt;getNumElements();</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>      <span class="comment">// An empty struct has no members.</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>      <span class="keywordflow">if</span> (NumElems == 0)</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>      <span class="comment">// Check for a struct with all members having the same size.</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *MemberSize =</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(STy-&gt;getElementType(0), DestTy, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>      <span class="keywordtype">bool</span> AllSame = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1; i != NumElems; ++i)</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        <span class="keywordflow">if</span> (MemberSize !=</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(STy-&gt;getElementType(i), DestTy, <span class="keyword">true</span>)) {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>          AllSame = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>      <span class="keywordflow">if</span> (AllSame) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(FieldNo,</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                                                                    <span class="keyword">false</span>,</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                                                                    DestTy,</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                                                                    <span class="keyword">false</span>),</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>                                            FieldNo, DestTy);</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af3c28b1d57df24c21713539354cecfeb">ConstantExpr::getNUWMul</a>(MemberSize, <a class="code hl_define" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>      }</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    }</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>  <span class="comment">// If there&#39;s no interesting folding happening, bail so that we don&#39;t create</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  <span class="comment">// a constant that looks like it needs folding but really doesn&#39;t.</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>  <span class="keywordflow">if</span> (!Folded)</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>  <span class="comment">// Base case: Get a regular offsetof expression.</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>  <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7f8f540a09fa306e1623fbc2f41c32fa">ConstantExpr::getOffsetOf</a>(Ty, FieldNo);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>  C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(C, <span class="keyword">false</span>,</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                                                    DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>                            C, DestTy);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>  <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>}</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad797efb6c6fbbb2038d5ed8f8379561f">  521</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#ad797efb6c6fbbb2038d5ed8f8379561f">llvm::ConstantFoldCastInstruction</a>(<span class="keywordtype">unsigned</span> opc, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V,</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                                            <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DestTy) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V)) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="comment">// zext(undef) = 0, because the top bits will be zero.</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <span class="comment">// sext(undef) = 0, because the top bits will all be the same.</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="comment">// [us]itofp(undef) = 0, because the result value is bounded.</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    <span class="keywordflow">if</span> (opc == Instruction::ZExt || opc == Instruction::SExt ||</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        opc == Instruction::UIToFP || opc == Instruction::SIToFP)</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(DestTy);</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(DestTy);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  }</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>  <span class="keywordflow">if</span> (V-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp; !DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a62cbe7441d9ebcac7e1a216bbf696550">isX86_MMXTy</a>() &amp;&amp;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>      opc != Instruction::AddrSpaceCast)</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(DestTy);</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span> </div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  <span class="comment">// If the cast operand is a constant expression, there&#39;s a few things we can</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>  <span class="comment">// do to try to simplify it.</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V)) {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keywordflow">if</span> (CE-&gt;isCast()) {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>      <span class="comment">// Try hard to fold cast of cast because they are often eliminable.</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> newOpc = <a class="code hl_function" href="ConstantFold_8cpp.html#a08c03a4228af93098afb6ab60e7283f6">foldConstantCastPair</a>(opc, CE, DestTy))</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(newOpc, CE-&gt;getOperand(0), DestTy);</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr &amp;&amp;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>               <span class="comment">// Do not fold addrspacecast (gep 0, .., 0). It might make the</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>               <span class="comment">// addrspacecast uncanonicalized.</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>               opc != Instruction::AddrSpaceCast &amp;&amp;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>               <span class="comment">// Do not fold bitcast (gep) with inrange index, as this loses</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>               <span class="comment">// information.</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>               !cast&lt;GEPOperator&gt;(CE)-&gt;getInRangeIndex().hasValue() &amp;&amp;</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>               <span class="comment">// Do not fold if the gep type is a vector, as bitcasting</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>               <span class="comment">// operand 0 of a vector gep will result in a bitcast between</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>               <span class="comment">// different sizes.</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>               !CE-&gt;getType()-&gt;isVectorTy()) {</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>      <span class="comment">// If all of the indexes in the GEP are null values, there is no pointer</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>      <span class="comment">// adjustment going on.  We might as well cast the source pointer.</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>      <span class="keywordtype">bool</span> isAllNull = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = CE-&gt;getNumOperands(); i != e; ++i)</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        <span class="keywordflow">if</span> (!CE-&gt;getOperand(i)-&gt;isNullValue()) {</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>          isAllNull = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>      <span class="keywordflow">if</span> (isAllNull)</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        <span class="comment">// This is casting one pointer type to another, always BitCast</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(CE-&gt;getOperand(0), DestTy);</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    }</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  }</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span> </div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  <span class="comment">// If the cast operand is a constant vector, perform the cast by</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  <span class="comment">// operating on each element. In the cast of bitcasts, the element</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  <span class="comment">// count may be mismatched; don&#39;t attempt to handle that here.</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  <span class="keywordflow">if</span> ((isa&lt;ConstantVector&gt;(V) || isa&lt;ConstantDataVector&gt;(V)) &amp;&amp;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>      DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>      DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>() == V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>()) {</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> res;</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *DestVecTy = cast&lt;VectorType&gt;(DestTy);</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *DstEltTy = DestVecTy-&gt;<a class="code hl_function" href="classllvm_1_1SequentialType.html#a4412918dc9c2ccb6de632fbf82ab3964">getElementType</a>();</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 32);</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>(); i != e; ++i) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C =</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(V, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>      res.push_back(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(opc, C, DstEltTy));</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(res);</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>  }</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span> </div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>  <span class="comment">// We actually have to do a cast now. Perform the cast according to the</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>  <span class="comment">// opcode specified.</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>  <span class="keywordflow">switch</span> (opc) {</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Failed to cast constant expression&quot;</span>);</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>  <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>  <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *FPC = dyn_cast&lt;ConstantFP&gt;(V)) {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>      <span class="keywordtype">bool</span> <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#a8c53890d9af8c2ef767eb119edf7ad76">ignored</a>;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>      APFloat Val = FPC-&gt;getValueAPF();</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>      Val.convert(DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a8cf1f36cc41c466e66d6467e40554841">isHalfTy</a>() ? APFloat::IEEEhalf() :</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                  DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a3ffc75c3a4cb82ba307a3334483eb4ac">isFloatTy</a>() ? APFloat::IEEEsingle() :</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                  DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#aa0fd6bf3d33236279db7b707bba755f4">isDoubleTy</a>() ? APFloat::IEEEdouble() :</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                  DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1f68c27188f1836737bf22a62c558354">isX86_FP80Ty</a>() ? APFloat::x87DoubleExtended() :</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                  DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a6f174fc924aa9cccf2abce5ef4b5ec9a">isFP128Ty</a>() ? APFloat::IEEEquad() :</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                  DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">isPPC_FP128Ty</a>() ? APFloat::PPCDoubleDouble() :</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>                  APFloat::Bogus(),</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>                  APFloat::rmNearestTiesToEven, &amp;<a class="code hl_function" href="DeadArgumentElimination_8cpp.html#a8c53890d9af8c2ef767eb119edf7ad76">ignored</a>);</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), Val);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    }</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can&#39;t fold.</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>  <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *FPC = dyn_cast&lt;ConstantFP&gt;(V)) {</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>      <span class="keyword">const</span> APFloat &amp;V = FPC-&gt;getValueAPF();</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>      <span class="keywordtype">bool</span> <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#a8c53890d9af8c2ef767eb119edf7ad76">ignored</a>;</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>      <a class="code hl_class" href="classuint32__t.html">uint32_t</a> DestBitWidth = cast&lt;IntegerType&gt;(DestTy)-&gt;getBitWidth();</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>      APSInt IntVal(DestBitWidth, opc == Instruction::FPToUI);</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>      <span class="keywordflow">if</span> (APFloat::opInvalidOp ==</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>          V.convertToInteger(IntVal, <a class="code hl_enumvalue" href="classllvm_1_1ConstrainedFPIntrinsic.html#a124a7ba94a9d861855ead7918d71bf2fa56c0615d7e5bafd4ccf91d36419963be">APFloat::rmTowardZero</a>, &amp;<a class="code hl_function" href="DeadArgumentElimination_8cpp.html#a8c53890d9af8c2ef767eb119edf7ad76">ignored</a>)) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        <span class="comment">// Undefined behavior invoked - the destination type can&#39;t represent</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        <span class="comment">// the input constant.</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(DestTy);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>      }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(FPC-&gt;getContext(), IntVal);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    }</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can&#39;t fold.</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>  <span class="keywordflow">case</span> Instruction::IntToPtr:   <span class="comment">//always treated as unsigned</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">if</span> (V-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())       <span class="comment">// Is it an integral null value?</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(cast&lt;PointerType&gt;(DestTy));</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;                   <span class="comment">// Other pointer types cannot be casted</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>  <span class="keywordflow">case</span> Instruction::PtrToInt:   <span class="comment">// always treated as unsigned</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">// Is it a null pointer value?</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keywordflow">if</span> (V-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(DestTy, 0);</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="comment">// If this is a sizeof-like expression, pull out multiplications by</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="comment">// known factors to expose them to subsequent folding. If it&#39;s an</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="comment">// alignof-like expression, factor out known factors.</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(V))</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>      <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr &amp;&amp;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>          CE-&gt;getOperand(0)-&gt;isNullValue()) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="comment">// FIXME: Looks like getFoldedSizeOf(), getFoldedOffsetOf() and</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <span class="comment">// getFoldedAlignOf() don&#39;t handle the case when DestTy is a vector of</span></div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <span class="comment">// pointers yet. We end up in asserts in CastInst::getCastOpcode (see</span></div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="comment">// test/Analysis/ConstantFolding/cast-vector.ll). I&#39;ve only seen this</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        <span class="comment">// happen in one &quot;real&quot; C-code test case, so it does not seem to be an</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="comment">// important optimization to handle vectors here. For now, simply bail</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <span class="comment">// out.</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <span class="keywordflow">if</span> (DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <a class="code hl_class" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *GEPO = cast&lt;GEPOperator&gt;(CE);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = GEPO-&gt;<a class="code hl_function" href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">getSourceElementType</a>();</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        <span class="keywordflow">if</span> (CE-&gt;getNumOperands() == 2) {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>          <span class="comment">// Handle a sizeof-like expression.</span></div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>          <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a> = CE-&gt;getOperand(1);</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>          <span class="keywordtype">bool</span> isOne = isa&lt;ConstantInt&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>) &amp;&amp; cast&lt;ConstantInt&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>)-&gt;isOne();</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a>(Ty, DestTy, !isOne)) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>            <a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a> = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(<a class="code hl_function" href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">CastInst::getCastOpcode</a>(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>, <span class="keyword">true</span>,</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>                                                                DestTy, <span class="keyword">false</span>),</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                                        <a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>, DestTy);</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">ConstantExpr::getMul</a>(C, <a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>);</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>          }</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CE-&gt;getNumOperands() == 3 &amp;&amp;</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>                   CE-&gt;getOperand(1)-&gt;isNullValue()) {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>          <span class="comment">// Handle an alignof-like expression.</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty))</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>            <span class="keywordflow">if</span> (!STy-&gt;isPacked()) {</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>              <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = cast&lt;ConstantInt&gt;(CE-&gt;getOperand(2));</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>              <span class="keywordflow">if</span> (CI-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">isOne</a>() &amp;&amp;</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>                  STy-&gt;getNumElements() == 2 &amp;&amp;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                  STy-&gt;getElementType(0)-&gt;isIntegerTy(1)) {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a>(STy-&gt;getElementType(1), DestTy, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>              }</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>            }</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>          <span class="comment">// Handle an offsetof-like expression.</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>          <span class="keywordflow">if</span> (Ty-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a81eef9d7336f7ee43be79630d8e8ec86">isStructTy</a>() || Ty-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">isArrayTy</a>()) {</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="ConstantFold_8cpp.html#add5a81ce61f160fb6cbc0212d4fd2c4f">getFoldedOffsetOf</a>(Ty, CE-&gt;getOperand(2),</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                                                DestTy, <span class="keyword">false</span>))</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>              <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>          }</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        }</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>      }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="comment">// Other pointer types cannot be casted</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>  <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>  <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      <span class="keyword">const</span> APInt &amp;api = CI-&gt;getValue();</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>      APFloat apf(DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a187de29e4101f5b579437d573ec2efa1">getFltSemantics</a>(),</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>                  <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">APInt::getNullValue</a>(DestTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>()));</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>      apf.convertFromAPInt(api, opc==Instruction::SIToFP,</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>                           APFloat::rmNearestTiesToEven);</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), apf);</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    }</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>      <a class="code hl_class" href="classuint32__t.html">uint32_t</a> BitWidth = cast&lt;IntegerType&gt;(DestTy)-&gt;getBitWidth();</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>                              CI-&gt;getValue().zext(BitWidth));</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>  <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>      <a class="code hl_class" href="classuint32__t.html">uint32_t</a> BitWidth = cast&lt;IntegerType&gt;(DestTy)-&gt;getBitWidth();</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                              CI-&gt;getValue().sext(BitWidth));</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    }</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>  <span class="keywordflow">case</span> Instruction::Trunc: {</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <span class="keywordflow">if</span> (V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <a class="code hl_class" href="classuint32__t.html">uint32_t</a> DestBitWidth = cast&lt;IntegerType&gt;(DestTy)-&gt;getBitWidth();</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(V)) {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(),</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>                              CI-&gt;getValue().trunc(DestBitWidth));</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    }</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span> </div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <span class="comment">// The input must be a constantexpr.  See if we can simplify this based on</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <span class="comment">// the bytes we are demanding.  Only do this if the source and dest are an</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <span class="comment">// even multiple of a byte.</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <span class="keywordflow">if</span> ((DestBitWidth &amp; 7) == 0 &amp;&amp;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        (cast&lt;IntegerType&gt;(V-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getBitWidth() &amp; 7) == 0)</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Res = <a class="code hl_function" href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a>(V, 0, DestBitWidth / 8))</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>        <span class="keywordflow">return</span> Res;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>  }</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>  <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a79061cbffefa2eccfe0d30d1c07eed78">FoldBitCast</a>(V, DestTy);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>  <span class="keywordflow">case</span> Instruction::AddrSpaceCast:</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>  }</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>}</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span> </div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno"><a class="line" href="namespacellvm.html#a11c89e0918b007ef2cf1d6b03c4b4948">  733</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a11c89e0918b007ef2cf1d6b03c4b4948">llvm::ConstantFoldSelectInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Cond,</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                                              <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V1, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V2) {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>  <span class="comment">// Check for i1 and vector true/false conditions.</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>  <span class="keywordflow">if</span> (Cond-&gt;isNullValue()) <span class="keywordflow">return</span> V2;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>  <span class="keywordflow">if</span> (Cond-&gt;isAllOnesValue()) <span class="keywordflow">return</span> V1;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span> </div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>  <span class="comment">// If the condition is a vector constant, fold the result elementwise.</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantVector.html">ConstantVector</a> *CondV = dyn_cast&lt;ConstantVector&gt;(Cond)) {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(CondV-&gt;getContext(), 32);</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>(); i != e;++i){</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V;</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V1Element = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(V1,</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                                                    <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V2Element = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(V2,</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                                                    <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Cond = dyn_cast&lt;Constant&gt;(CondV-&gt;getOperand(i));</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>      <span class="keywordflow">if</span> (V1Element == V2Element) {</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        V = V1Element;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Cond)) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        V = isa&lt;UndefValue&gt;(V1Element) ? V1Element : V2Element;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Cond)) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        V = Cond-&gt;isNullValue() ? V2Element : V1Element;</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>      }</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>      Result.push_back(V);</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    }</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span> </div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="comment">// If we were able to build the vector, return it.</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>    <span class="keywordflow">if</span> (Result.size() == V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>())</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>  }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Cond)) {</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V1)) <span class="keywordflow">return</span> V1;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="keywordflow">return</span> V2;</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>  }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V1)) <span class="keywordflow">return</span> V2;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(V2)) <span class="keywordflow">return</span> V1;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>  <span class="keywordflow">if</span> (V1 == V2) <span class="keywordflow">return</span> V1;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *TrueVal = dyn_cast&lt;ConstantExpr&gt;(V1)) {</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="keywordflow">if</span> (TrueVal-&gt;getOpcode() == Instruction::Select)</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>      <span class="keywordflow">if</span> (TrueVal-&gt;getOperand(0) == Cond)</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a8683922a4b3d122c3b0d7d53b1cde2ad">ConstantExpr::getSelect</a>(Cond, TrueVal-&gt;getOperand(1), V2);</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>  }</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *FalseVal = dyn_cast&lt;ConstantExpr&gt;(V2)) {</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="keywordflow">if</span> (FalseVal-&gt;getOpcode() == Instruction::Select)</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>      <span class="keywordflow">if</span> (FalseVal-&gt;getOperand(0) == Cond)</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a8683922a4b3d122c3b0d7d53b1cde2ad">ConstantExpr::getSelect</a>(Cond, V1, FalseVal-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(2));</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>  }</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span> </div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>}</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span> </div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno"><a class="line" href="namespacellvm.html#a9f6c692bb79cca65ae3097ddd4c47e69">  788</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a9f6c692bb79cca65ae3097ddd4c47e69">llvm::ConstantFoldExtractElementInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>                                                      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>) {</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Val))  <span class="comment">// ee(undef, x) -&gt; undef</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">getVectorElementType</a>());</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>  <span class="keywordflow">if</span> (Val-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())  <span class="comment">// ee(zero, x) -&gt; zero</span></div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">getVectorElementType</a>());</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>  <span class="comment">// ee({w,x,y,z}, undef) -&gt; undef</span></div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>))</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">getVectorElementType</a>());</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span> </div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CIdx = dyn_cast&lt;ConstantInt&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>)) {</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    <span class="comment">// ee({w,x,y,z}, wrong_value) -&gt; undef</span></div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <span class="keywordflow">if</span> (CIdx-&gt;uge(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>()))</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">getVectorElementType</a>());</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="keywordflow">return</span> Val-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(CIdx-&gt;getZExtValue());</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>  }</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>}</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7bf95d0980fad19452f4c9aca445af3f">  807</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a7bf95d0980fad19452f4c9aca445af3f">llvm::ConstantFoldInsertElementInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>                                                     <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Elt,</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>                                                     <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>) {</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>))</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span> </div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>  <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CIdx = dyn_cast&lt;ConstantInt&gt;(<a class="code hl_variable" href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a>);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>  <span class="keywordflow">if</span> (!CIdx) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>  <span class="keywordtype">unsigned</span> NumElts = Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>();</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <span class="keywordflow">if</span> (CIdx-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#af960078a0675d00168bf95bf31d90f1d">uge</a>(NumElts))</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span> </div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>  <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>  Result.reserve(NumElts);</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>  <span class="keyword">auto</span> *Ty = <a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a5852dc0d180581d34902e8abcbf7e930">Type::getInt32Ty</a>(Val-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>  uint64_t IdxVal = CIdx-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != NumElts; ++i) {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    <span class="keywordflow">if</span> (i == IdxVal) {</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>      Result.push_back(Elt);</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    }</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(Val, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    Result.push_back(C);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  }</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span> </div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>}</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span> </div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8641b83b0434a1b90b70b130de703953">  837</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a8641b83b0434a1b90b70b130de703953">llvm::ConstantFoldShuffleVectorInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V1,</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>                                                     <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V2,</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>                                                     <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Mask) {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>  <span class="keywordtype">unsigned</span> MaskNumElts = Mask-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>();</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *EltTy = V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">getVectorElementType</a>();</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span> </div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>  <span class="comment">// Undefined shuffle mask -&gt; undefined value.</span></div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Mask))</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code hl_function" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(EltTy, MaskNumElts));</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>  <span class="comment">// Don&#39;t break the bitcode reader hack.</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>  <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(Mask)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span> </div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  <span class="keywordtype">unsigned</span> SrcNumElts = V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>();</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span> </div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  <span class="comment">// Loop over the shuffle mask, evaluating each element.</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>  <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 32&gt;</a> Result;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != MaskNumElts; ++i) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="keywordtype">int</span> Elt = <a class="code hl_function" href="classllvm_1_1ShuffleVectorInst.html#af2dbb39599d0440e5a70c6957c66b729">ShuffleVectorInst::getMaskValue</a>(Mask, i);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    <span class="keywordflow">if</span> (Elt == -1) {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>      Result.push_back(<a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(EltTy));</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *InElt;</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span>(Elt) &gt;= SrcNumElts*2)</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>      InElt = <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(EltTy);</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span>(Elt) &gt;= SrcNumElts) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(V2-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 32);</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>      InElt =</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(V2,</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                                        <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, Elt - SrcNumElts));</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 32);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>      InElt = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(V1, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, Elt));</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    Result.push_back(InElt);</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>  }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span> </div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>}</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno"><a class="line" href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">  878</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">llvm::ConstantFoldExtractValueInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Agg,</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>                                                    <a class="code hl_class" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Idxs) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>  <span class="comment">// Base case: no indices, so return the entire value.</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>  <span class="keywordflow">if</span> (Idxs.empty())</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="keywordflow">return</span> Agg;</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span> </div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = Agg-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(Idxs[0]))</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">ConstantFoldExtractValueInstruction</a>(C, Idxs.slice(1));</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span> </div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>}</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span> </div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad7fa9b738742521d0a684cec016ef47e">  890</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#ad7fa9b738742521d0a684cec016ef47e">llvm::ConstantFoldInsertValueInstruction</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Agg,</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>                                                   <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>                                                   <a class="code hl_class" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> Idxs) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>  <span class="comment">// Base case: no indices, so replace the entire value.</span></div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>  <span class="keywordflow">if</span> (Idxs.empty())</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    <span class="keywordflow">return</span> Val;</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="keywordtype">unsigned</span> NumElts;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *ST = dyn_cast&lt;StructType&gt;(Agg-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()))</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    NumElts = ST-&gt;getNumElements();</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    NumElts = cast&lt;SequentialType&gt;(Agg-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>())-&gt;getNumElements();</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>  <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 32&gt;</a> Result;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i != NumElts; ++i) {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C = Agg-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(i);</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    <span class="keywordflow">if</span> (!C) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="keywordflow">if</span> (Idxs[0] == i)</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>      C = <a class="code hl_function" href="namespacellvm.html#ad7fa9b738742521d0a684cec016ef47e">ConstantFoldInsertValueInstruction</a>(C, Val, Idxs.slice(1));</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    Result.push_back(C);</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>  }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *ST = dyn_cast&lt;StructType&gt;(Agg-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()))</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(ST, Result);</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *AT = dyn_cast&lt;ArrayType&gt;(Agg-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()))</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">ConstantArray::get</a>(AT, Result);</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>}</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span> </div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno"><a class="line" href="namespacellvm.html#a2c4fe17695dd008139cd08a7d460744e">  921</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a2c4fe17695dd008139cd08a7d460744e">llvm::ConstantFoldUnaryInstruction</a>(<span class="keywordtype">unsigned</span> Opcode, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C) {</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(<a class="code hl_function" href="classllvm_1_1Instruction.html#ae6249022aded13ad98775c11881bc117">Instruction::isUnaryOp</a>(Opcode) &amp;&amp; <span class="stringliteral">&quot;Non-unary instruction detected&quot;</span>);</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span> </div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>  <span class="comment">// Handle scalar UndefValue. Vectors are always evaluated per element.</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  <span class="keywordtype">bool</span> HasScalarUndef = !C-&gt;getType()-&gt;isVectorTy() &amp;&amp; isa&lt;UndefValue&gt;(C);</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>  <span class="keywordflow">if</span> (HasScalarUndef) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="keywordflow">switch</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="classllvm_1_1Instruction.html#af9f57a32b08304fea642871735717f24">Instruction::UnaryOps</a><span class="keyword">&gt;</span>(Opcode)) {</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    <span class="keywordflow">case</span> Instruction::FNeg:</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>      <span class="keywordflow">return</span> C; <span class="comment">// -undef -&gt; undef</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    <span class="keywordflow">case</span> Instruction::UnaryOpsEnd:</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>      <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid UnaryOp&quot;</span>);</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>  }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span> </div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>  <span class="comment">// Constant should not be UndefValue, unless these are vector constants.</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!HasScalarUndef &amp;&amp; <span class="stringliteral">&quot;Unexpected UndefValue&quot;</span>);</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>  <span class="comment">// We only have FP UnaryOps right now.</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!isa&lt;ConstantInt&gt;(C) &amp;&amp; <span class="stringliteral">&quot;Unexpected Integer UnaryOp&quot;</span>);</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span> </div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP = dyn_cast&lt;ConstantFP&gt;(C)) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>    <span class="keyword">const</span> APFloat &amp;CV = CFP-&gt;getValueAPF();</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    <span class="keywordflow">case</span> Instruction::FNeg:</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C-&gt;getContext(), neg(CV));</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    }</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(C-&gt;getType())) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    <span class="comment">// Fold each element and create a vector constant from those constants.</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(VTy-&gt;getContext(), 32);</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = VTy-&gt;getNumElements(); i != e; ++i) {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *ExtractIdx = <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i);</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Elt = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(C, ExtractIdx);</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span> </div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>      Result.push_back(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(Opcode, Elt));</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span> </div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>  }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span> </div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>  <span class="comment">// We don&#39;t know how to fold this.</span></div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno"><a class="line" href="namespacellvm.html#af6674e64f01f197cffff55abcc6d2050">  967</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#af6674e64f01f197cffff55abcc6d2050">llvm::ConstantFoldBinaryInstruction</a>(<span class="keywordtype">unsigned</span> Opcode, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C1,</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                                              <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2) {</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(<a class="code hl_function" href="classllvm_1_1Instruction.html#a5c88132322ca3f46f242f7c023a57010">Instruction::isBinaryOp</a>(Opcode) &amp;&amp; <span class="stringliteral">&quot;Non-binary instruction detected&quot;</span>);</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>  <span class="comment">// Handle scalar UndefValue. Vectors are always evaluated per element.</span></div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>  <span class="keywordtype">bool</span> HasScalarUndef = !C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>                        (isa&lt;UndefValue&gt;(C1) || isa&lt;UndefValue&gt;(C2));</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>  <span class="keywordflow">if</span> (HasScalarUndef) {</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">switch</span> (<span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">Instruction::BinaryOps</a><span class="keyword">&gt;</span>(Opcode)) {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) &amp;&amp; isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        <span class="comment">// Handle undef ^ undef -&gt; 0 special case. This is a common</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        <span class="comment">// idiom (misuse).</span></div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>      <a class="code hl_define" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    <span class="keywordflow">case</span> <a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>:</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) &amp;&amp; isa&lt;UndefValue&gt;(C2)) <span class="comment">// undef &amp; undef -&gt; undef</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());   <span class="comment">// undef &amp; X -&gt; 0</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <span class="keywordflow">case</span> Instruction::Mul: {</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>      <span class="comment">// undef * undef -&gt; undef</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) &amp;&amp; isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>      <span class="keyword">const</span> APInt *CV;</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>      <span class="comment">// X * undef -&gt; undef   if X is odd</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C1, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CV)) || <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CV)))</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        <span class="keywordflow">if</span> ((*CV)[0])</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span> </div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>      <span class="comment">// X * undef -&gt; 0       otherwise</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    }</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>      <span class="comment">// X / undef -&gt; undef</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        <span class="keywordflow">return</span> C2;</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>      <span class="comment">// undef / 0 -&gt; undef</span></div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>      <span class="comment">// undef / 1 -&gt; undef</span></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) || <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a3b3d2d8c64a7881acb82bc7467569aa9">m_One</a>()))</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>      <span class="comment">// undef / X -&gt; 0       otherwise</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>      <span class="comment">// X % undef -&gt; undef</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a4e02c4bdba12dcc7d4ec44f513203f1e">m_Undef</a>()))</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="keywordflow">return</span> C2;</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>      <span class="comment">// undef % 0 -&gt; undef</span></div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>      <span class="comment">// undef % X -&gt; 0       otherwise</span></div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    <span class="keywordflow">case</span> Instruction::Or:                          <span class="comment">// X | undef -&gt; -1</span></div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) &amp;&amp; isa&lt;UndefValue&gt;(C2)) <span class="comment">// undef | undef -&gt; undef</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()); <span class="comment">// undef | X -&gt; ~0</span></div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>      <span class="comment">// X &gt;&gt;l undef -&gt; undef</span></div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        <span class="keywordflow">return</span> C2;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>      <span class="comment">// undef &gt;&gt;l 0 -&gt; undef</span></div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>      <span class="comment">// undef &gt;&gt;l X -&gt; 0</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>      <span class="comment">// X &gt;&gt;a undef -&gt; undef</span></div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>        <span class="keywordflow">return</span> C2;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>      <span class="comment">// undef &gt;&gt;a 0 -&gt; undef</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>      <span class="comment">// TODO: undef &gt;&gt;a X -&gt; undef if the shift is exact</span></div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>      <span class="comment">// undef &gt;&gt;a X -&gt; 0</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>    <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>      <span class="comment">// X &lt;&lt; undef -&gt; undef</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>        <span class="keywordflow">return</span> C2;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>      <span class="comment">// undef &lt;&lt; 0 -&gt; undef</span></div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code hl_function" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>      <span class="comment">// undef &lt;&lt; X -&gt; 0</span></div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>    <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>      <span class="comment">// [any flop] undef, undef -&gt; undef</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) &amp;&amp; isa&lt;UndefValue&gt;(C2))</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>      <span class="comment">// [any flop] C, undef -&gt; NaN</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>      <span class="comment">// [any flop] undef, C -&gt; NaN</span></div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>      <span class="comment">// We could potentially specialize NaN/Inf constants vs. &#39;normal&#39;</span></div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>      <span class="comment">// constants (possibly differently depending on opcode and operand). This</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>      <span class="comment">// would allow returning undef sometimes. But it is always safe to fold to</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>      <span class="comment">// NaN because we can choose the undef operand as NaN, and any FP opcode</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>      <span class="comment">// with a NaN operand will propagate NaN.</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#ab21342133676f10340dc3f541b128f24">ConstantFP::getNaN</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    <span class="keywordflow">case</span> Instruction::BinaryOpsEnd:</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>      <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid BinaryOp&quot;</span>);</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    }</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>  }</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>  <span class="comment">// Neither constant should be UndefValue, unless these are vector constants.</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!HasScalarUndef &amp;&amp; <span class="stringliteral">&quot;Unexpected UndefValue&quot;</span>);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span> </div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>  <span class="comment">// Handle simplifications when the RHS is a constant int.</span></div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2 = dyn_cast&lt;ConstantInt&gt;(C2)) {</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>    <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    <span class="keywordflow">case</span> <a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>:</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C1;                             <span class="comment">// X + 0 == X</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C1;                             <span class="comment">// X - 0 == X</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C2;                             <span class="comment">// X * 0 == 0</span></div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>      <span class="keywordflow">if</span> (CI2-&gt;isOne())</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        <span class="keywordflow">return</span> C1;                                              <span class="comment">// X * 1 == X</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>      <span class="keywordflow">if</span> (CI2-&gt;isOne())</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>        <span class="keywordflow">return</span> C1;                                            <span class="comment">// X / 1 == X</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero())</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI2-&gt;getType());               <span class="comment">// X / 0 == undef</span></div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>      <span class="keywordflow">if</span> (CI2-&gt;isOne())</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CI2-&gt;getType());        <span class="comment">// X % 1 == 0</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero())</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI2-&gt;getType());               <span class="comment">// X % 0 == undef</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C2;                           <span class="comment">// X &amp; 0 == 0</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>      <span class="keywordflow">if</span> (CI2-&gt;isMinusOne())</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>        <span class="keywordflow">return</span> C1;                                            <span class="comment">// X &amp; -1 == X</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span> </div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = dyn_cast&lt;ConstantExpr&gt;(C1)) {</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>        <span class="comment">// (zext i32 to i64) &amp; 4294967295 -&gt; (zext i32 to i64)</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>        <span class="keywordflow">if</span> (CE1-&gt;getOpcode() == Instruction::ZExt) {</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>          <span class="keywordtype">unsigned</span> DstWidth = CI2-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;getBitWidth();</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>          <span class="keywordtype">unsigned</span> SrcWidth =</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            CE1-&gt;getOperand(0)-&gt;getType()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">getPrimitiveSizeInBits</a>();</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>          APInt PossiblySetBits(APInt::getLowBitsSet(DstWidth, SrcWidth));</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>          <span class="keywordflow">if</span> ((PossiblySetBits &amp; CI2-&gt;getValue()) == PossiblySetBits)</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>            <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        }</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span> </div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="comment">// If and&#39;ing the address of a global with a constant, fold it.</span></div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <span class="keywordflow">if</span> (CE1-&gt;getOpcode() == Instruction::PtrToInt &amp;&amp;</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>            isa&lt;GlobalValue&gt;(CE1-&gt;getOperand(0))) {</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>          <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = cast&lt;GlobalValue&gt;(CE1-&gt;getOperand(0));</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> </div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>          <span class="keywordtype">unsigned</span> GVAlign;</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1Module.html">Module</a> *TheModule = GV-&gt;<a class="code hl_function" href="classllvm_1_1GlobalValue.html#a739b30c811f1eece61b05320ddf44e5b">getParent</a>()) {</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>            GVAlign = GV-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ac3ed98333b14efcb6d907122d0e45361">getPointerAlignment</a>(TheModule-&gt;getDataLayout());</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            <span class="comment">// If the function alignment is not specified then assume that it</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>            <span class="comment">// is 4.</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            <span class="comment">// This is dangerous; on x86, the alignment of the pointer</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            <span class="comment">// corresponds to the alignment of the function, but might be less</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>            <span class="comment">// than 4 if it isn&#39;t explicitly specified.</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>            <span class="comment">// However, a fix for this behaviour was reverted because it</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            <span class="comment">// increased code size (see https://reviews.llvm.org/D55115)</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>            <span class="comment">// FIXME: This code should be deleted once existing targets have</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <span class="comment">// appropriate defaults</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>            <span class="keywordflow">if</span> (GVAlign == 0U &amp;&amp; isa&lt;Function&gt;(GV))</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>              GVAlign = 4U;</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;Function&gt;(GV)) {</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>            <span class="comment">// Without a datalayout we have to assume the worst case: that the</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>            <span class="comment">// function pointer isn&#39;t aligned at all.</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>            GVAlign = 0U;</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>            GVAlign = GV-&gt;<a class="code hl_function" href="classllvm_1_1GlobalValue.html#a0da0b64b3dee6312497f8a2933dd0346">getAlignment</a>();</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>          }</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span> </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>          <span class="keywordflow">if</span> (GVAlign &gt; 1) {</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>            <span class="keywordtype">unsigned</span> DstWidth = CI2-&gt;getType()-&gt;getBitWidth();</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>            <span class="keywordtype">unsigned</span> SrcWidth = std::min(DstWidth, <a class="code hl_function" href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">Log2_32</a>(GVAlign));</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            APInt BitsNotSet(APInt::getLowBitsSet(DstWidth, SrcWidth));</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span> </div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>            <span class="comment">// If checking bits we know are clear, return zero.</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <span class="keywordflow">if</span> ((CI2-&gt;getValue() &amp; BitsNotSet) == CI2-&gt;getValue())</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>              <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CI2-&gt;getType());</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>          }</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        }</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>      }</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>    <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C1;        <span class="comment">// X | 0 == X</span></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>      <span class="keywordflow">if</span> (CI2-&gt;isMinusOne())</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keywordflow">return</span> C2;                         <span class="comment">// X | -1 == -1</span></div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>      <span class="keywordflow">if</span> (CI2-&gt;isZero()) <span class="keywordflow">return</span> C1;        <span class="comment">// X ^ 0 == X</span></div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span> </div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = dyn_cast&lt;ConstantExpr&gt;(C1)) {</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>        <span class="keywordflow">switch</span> (CE1-&gt;getOpcode()) {</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>        <span class="keywordflow">case</span> Instruction::ICmp:</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>        <span class="keywordflow">case</span> Instruction::FCmp:</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>          <span class="comment">// cmp pred ^ true -&gt; cmp !pred</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>          <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(CI2-&gt;isOne());</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>          <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> pred = (<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a>)CE1-&gt;getPredicate();</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>          pred = <a class="code hl_function" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(pred);</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(pred, CE1-&gt;getOperand(0),</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                                          CE1-&gt;getOperand(1));</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>        }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>      }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>    <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>      <span class="comment">// ashr (zext C to Ty), C2 -&gt; lshr (zext C, CSA), C2</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = dyn_cast&lt;ConstantExpr&gt;(C1))</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        <span class="keywordflow">if</span> (CE1-&gt;getOpcode() == Instruction::ZExt)  <span class="comment">// Top bits known zero.</span></div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">ConstantExpr::getLShr</a>(C1, C2);</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(C1)) {</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    <span class="comment">// If C1 is a ConstantInt and C2 is not, swap the operands.</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1Instruction.html#af8c91b2564a9869a1f393c766e39bc8c">Instruction::isCommutative</a>(Opcode))</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(Opcode, C2, C1);</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>  }</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span> </div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI1 = dyn_cast&lt;ConstantInt&gt;(C1)) {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI2 = dyn_cast&lt;ConstantInt&gt;(C2)) {</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>      <span class="keyword">const</span> APInt &amp;C1V = CI1-&gt;getValue();</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>      <span class="keyword">const</span> APInt &amp;C2V = CI2-&gt;getValue();</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>      <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>      <span class="keywordflow">case</span> <a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>:</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V + C2V);</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>      <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V - C2V);</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>      <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V * C2V);</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>      <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>        <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!CI2-&gt;isZero() &amp;&amp; <span class="stringliteral">&quot;Div by zero handled above&quot;</span>);</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.udiv(C2V));</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>      <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>        <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!CI2-&gt;isZero() &amp;&amp; <span class="stringliteral">&quot;Div by zero handled above&quot;</span>);</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>        <span class="keywordflow">if</span> (C2V.isAllOnesValue() &amp;&amp; C1V.isMinSignedValue())</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI1-&gt;getType());   <span class="comment">// MIN_INT / -1 -&gt; undef</span></div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.sdiv(C2V));</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>      <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>        <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!CI2-&gt;isZero() &amp;&amp; <span class="stringliteral">&quot;Div by zero handled above&quot;</span>);</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.urem(C2V));</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>      <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>        <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(!CI2-&gt;isZero() &amp;&amp; <span class="stringliteral">&quot;Div by zero handled above&quot;</span>);</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>        <span class="keywordflow">if</span> (C2V.isAllOnesValue() &amp;&amp; C1V.isMinSignedValue())</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CI1-&gt;getType());   <span class="comment">// MIN_INT % -1 -&gt; undef</span></div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.srem(C2V));</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>      <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V &amp; C2V);</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>      <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V | C2V);</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>      <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V ^ C2V);</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>      <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>        <span class="keywordflow">if</span> (C2V.ult(C1V.getBitWidth()))</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.shl(C2V));</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()); <span class="comment">// too big shift is undef</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>      <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordflow">if</span> (C2V.ult(C1V.getBitWidth()))</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.lshr(C2V));</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()); <span class="comment">// too big shift is undef</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>      <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>        <span class="keywordflow">if</span> (C2V.ult(C1V.getBitWidth()))</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CI1-&gt;getContext(), C1V.ashr(C2V));</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()); <span class="comment">// too big shift is undef</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>      }</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    }</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span> </div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>    <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>    <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>    <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>    <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>      <span class="keywordflow">if</span> (CI1-&gt;isZero()) <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    }</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP1 = dyn_cast&lt;ConstantFP&gt;(C1)) {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantFP.html">ConstantFP</a> *CFP2 = dyn_cast&lt;ConstantFP&gt;(C2)) {</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>      <span class="keyword">const</span> APFloat &amp;C1V = CFP1-&gt;getValueAPF();</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>      <span class="keyword">const</span> APFloat &amp;C2V = CFP2-&gt;getValueAPF();</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>      APFloat C3V = C1V;  <span class="comment">// copy for modification</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>      <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>      <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>      <span class="keywordflow">case</span> Instruction::FAdd:</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>        (void)C3V.add(C2V, APFloat::rmNearestTiesToEven);</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), C3V);</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>      <span class="keywordflow">case</span> Instruction::FSub:</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>        (void)C3V.subtract(C2V, APFloat::rmNearestTiesToEven);</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), C3V);</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>      <span class="keywordflow">case</span> Instruction::FMul:</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>        (void)C3V.multiply(C2V, APFloat::rmNearestTiesToEven);</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), C3V);</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>      <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        (void)C3V.divide(C2V, APFloat::rmNearestTiesToEven);</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), C3V);</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>      <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        (void)C3V.mod(C2V);</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">ConstantFP::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), C3V);</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>      }</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    }</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *VTy = dyn_cast&lt;VectorType&gt;(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>())) {</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>    <span class="comment">// Fold each element and create a vector constant from those constants.</span></div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>    <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 16&gt;</a> Result;</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(VTy-&gt;getContext(), 32);</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = VTy-&gt;getNumElements(); i != e; ++i) {</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *ExtractIdx = <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i);</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *LHS = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(C1, ExtractIdx);</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *RHS = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(C2, ExtractIdx);</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span> </div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>      <span class="comment">// If any element of a divisor vector is zero, the whole op is undef.</span></div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1Instruction.html#af9c2825ab53adf1bf8c9fa19ec89d986">Instruction::isIntDivRem</a>(Opcode) &amp;&amp; RHS-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(VTy);</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span> </div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>      Result.push_back(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(Opcode, LHS, RHS));</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>    }</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span> </div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(Result);</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  }</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span> </div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = dyn_cast&lt;ConstantExpr&gt;(C1)) {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>    <span class="comment">// There are many possible foldings we could do here.  We should probably</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    <span class="comment">// at least fold add of a pointer with an integer into the appropriate</span></div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <span class="comment">// getelementptr.  This will improve alias analysis a bit.</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span> </div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    <span class="comment">// Given ((a + b) + c), if (b + c) folds to something interesting, return</span></div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="comment">// (a + (b + c)).</span></div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1Instruction.html#a4f0027b9d05b27206b1882976fce9038">Instruction::isAssociative</a>(Opcode) &amp;&amp; CE1-&gt;getOpcode() == Opcode) {</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *T = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(Opcode, CE1-&gt;getOperand(1), C2);</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>      <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(T) || cast&lt;ConstantExpr&gt;(T)-&gt;<a class="code hl_function" href="VPlanSLP_8cpp.html#ab9081b5444a1ae65398d4105bc17c51d">getOpcode</a>() != Opcode)</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(Opcode, CE1-&gt;getOperand(0), T);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(C2)) {</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>    <span class="comment">// If C2 is a constant expr and C1 isn&#39;t, flop them around and fold the</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>    <span class="comment">// other way if possible.</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1Instruction.html#af8c91b2564a9869a1f393c766e39bc8c">Instruction::isCommutative</a>(Opcode))</div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="namespacellvm.html#af6674e64f01f197cffff55abcc6d2050">ConstantFoldBinaryInstruction</a>(Opcode, C2, C1);</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>  }</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span> </div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>  <span class="comment">// i1 can be simplified in many cases.</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>  <span class="keywordflow">if</span> (C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>(1)) {</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>    <span class="keywordflow">switch</span> (Opcode) {</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>    <span class="keywordflow">case</span> <a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>:</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>    <span class="keywordflow">case</span> Instruction::Sub:</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(C1, C2);</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">ConstantExpr::getAnd</a>(C1, C2);</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    <span class="keywordflow">case</span> Instruction::Shl:</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>    <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>      <span class="comment">// We can assume that C2 == 0.  If it were one the result would be</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>      <span class="comment">// undefined because the shift value is as large as the bitwidth.</span></div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>      <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>      <span class="comment">// We can assume that C2 == 1.  If it were zero the result would be</span></div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>      <span class="comment">// undefined through division by zero.</span></div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>      <span class="keywordflow">return</span> C1;</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>      <span class="comment">// We can assume that C2 == 1.  If it were zero the result would be</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>      <span class="comment">// undefined through division by zero.</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    }</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>  }</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span> </div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>  <span class="comment">// We don&#39;t know how to fold this.</span></div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>}</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span><span class="comment"></span> </div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span><span class="comment">/// This type is zero-sized if it&#39;s an array or structure of zero-sized types.</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span><span class="comment">/// The only leaf zero-sized type is an empty structure.</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39"> 1360</a></span><span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(<a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty) {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1StructType.html">StructType</a> *STy = dyn_cast&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>    <span class="keywordflow">if</span> (STy-&gt;isOpaque()) <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Can&#39;t say.</span></div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span> </div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    <span class="comment">// If all of elements have zero size, this does too.</span></div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = STy-&gt;getNumElements(); i != e; ++i)</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(STy-&gt;getElementType(i))) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *ATy = dyn_cast&lt;ArrayType&gt;(Ty)) {</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(ATy-&gt;getElementType());</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>  }</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>}</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span><span class="comment"></span> </div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span><span class="comment">/// Compare the two constants as though they were getelementptr indices.</span></div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span><span class="comment">/// This allows coercion of the types to be the same thing.</span></div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span><span class="comment">///</span></div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span><span class="comment">/// If the two constants are the &quot;same&quot; (after coercion), return 0.  If the</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span><span class="comment">/// first is less than the second, return -1, if the second is less than the</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span><span class="comment">/// first, return 1.  If the constants are not integral, return -2.</span></div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span><span class="comment">///</span></div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641"> 1382</a></span><span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C1, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2, <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *ElTy) {</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>  <span class="keywordflow">if</span> (C1 == C2) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>  <span class="comment">// Ok, we found a different index.  If they are not ConstantInt, we can&#39;t do</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>  <span class="comment">// anything with them.</span></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>  <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(C1) || !isa&lt;ConstantInt&gt;(C2))</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>    <span class="keywordflow">return</span> -2; <span class="comment">// don&#39;t know!</span></div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span> </div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>  <span class="comment">// We cannot compare the indices if they don&#39;t fit in an int64_t.</span></div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>  <span class="keywordflow">if</span> (cast&lt;ConstantInt&gt;(C1)-&gt;getValue().getActiveBits() &gt; 64 ||</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>      cast&lt;ConstantInt&gt;(C2)-&gt;getValue().getActiveBits() &gt; 64)</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>    <span class="keywordflow">return</span> -2; <span class="comment">// don&#39;t know!</span></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span> </div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>  <span class="comment">// Ok, we have two differing integer indices.  Sign extend them to be the same</span></div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>  <span class="comment">// type.</span></div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>  int64_t C1Val = cast&lt;ConstantInt&gt;(C1)-&gt;getSExtValue();</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>  int64_t C2Val = cast&lt;ConstantInt&gt;(C2)-&gt;getSExtValue();</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span> </div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>  <span class="keywordflow">if</span> (C1Val == C2Val) <span class="keywordflow">return</span> 0;  <span class="comment">// They are equal</span></div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span> </div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>  <span class="comment">// If the type being indexed over is really just a zero sized type, there is</span></div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>  <span class="comment">// no pointer difference being made here.</span></div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a>(ElTy))</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>    <span class="keywordflow">return</span> -2; <span class="comment">// dunno.</span></div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span> </div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>  <span class="comment">// If they are really different, now that they are the same type, then we</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>  <span class="comment">// found a difference!</span></div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>  <span class="keywordflow">if</span> (C1Val &lt; C2Val)</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>}</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span><span class="comment"></span> </div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span><span class="comment">/// This function determines if there is anything we can decide about the two</span></div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span><span class="comment">/// constants provided. This doesn&#39;t need to handle simple things like</span></div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span><span class="comment">/// ConstantFP comparisons, but should instead handle ConstantExprs.</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span><span class="comment">/// If we can determine that the two constants have a particular relation to</span></div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span><span class="comment">/// each other, we should return the corresponding FCmpInst predicate,</span></div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span><span class="comment">/// otherwise return FCmpInst::BAD_FCMP_PREDICATE. This is used below in</span></div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span><span class="comment">/// ConstantFoldCompareInstruction.</span></div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span><span class="comment">///</span></div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span><span class="comment">/// To simplify this code we canonicalize the relation so that the first</span></div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span><span class="comment">/// operand is always the most &quot;complex&quot; of the two.  We consider ConstantFP</span></div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span><span class="comment">/// to be the simplest, and ConstantExprs to be the most complex.</span></div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a"> 1426</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> <a class="code hl_function" href="ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V1, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V2) {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>() == V2-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>() &amp;&amp;</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>         <span class="stringliteral">&quot;Cannot compare values of different types!&quot;</span>);</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span> </div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>  <span class="comment">// We do not know if a constant expression will evaluate to a number or NaN.</span></div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>  <span class="comment">// Therefore, we can only say that the relation is unordered or equal.</span></div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>  <span class="keywordflow">if</span> (V1 == V2) <span class="keywordflow">return</span> FCmpInst::FCMP_UEQ;</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span> </div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>  <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V1)) {</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V2)) {</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>      <span class="comment">// Simple case, use the standard constant folder.</span></div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>      <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *R = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>      R = dyn_cast&lt;ConstantInt&gt;(</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>                      <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a023de09b887ba31ec0ebad72aca34419">ConstantExpr::getFCmp</a>(FCmpInst::FCMP_OEQ, V1, V2));</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        <span class="keywordflow">return</span> FCmpInst::FCMP_OEQ;</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>      R = dyn_cast&lt;ConstantInt&gt;(</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>                      <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a023de09b887ba31ec0ebad72aca34419">ConstantExpr::getFCmp</a>(FCmpInst::FCMP_OLT, V1, V2));</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        <span class="keywordflow">return</span> FCmpInst::FCMP_OLT;</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>      R = dyn_cast&lt;ConstantInt&gt;(</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>                      <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a023de09b887ba31ec0ebad72aca34419">ConstantExpr::getFCmp</a>(FCmpInst::FCMP_OGT, V1, V2));</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>        <span class="keywordflow">return</span> FCmpInst::FCMP_OGT;</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span> </div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>      <span class="comment">// Nothing more we can do</span></div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>      <span class="keywordflow">return</span> FCmpInst::BAD_FCMP_PREDICATE;</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>    }</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span> </div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>    <span class="comment">// If the first operand is simple and second is ConstantExpr, swap operands.</span></div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>    <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">FCmpInst::Predicate</a> SwappedRelation = <a class="code hl_function" href="ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a>(V2, V1);</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>    <span class="keywordflow">if</span> (SwappedRelation != FCmpInst::BAD_FCMP_PREDICATE)</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>      <span class="keywordflow">return</span> FCmpInst::getSwappedPredicate(SwappedRelation);</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="comment">// Ok, the LHS is known to be a constantexpr.  The RHS can be any of a</span></div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    <span class="comment">// constantexpr or a simple constant.</span></div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>    <a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = cast&lt;ConstantExpr&gt;(V1);</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>    <span class="keywordflow">switch</span> (CE1-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>()) {</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>    <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>    <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>    <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>      <span class="comment">// We might be able to do something with these but we don&#39;t right now.</span></div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>    }</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>  }</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>  <span class="comment">// There are MANY other foldings that we could perform here.  They will</span></div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>  <span class="comment">// probably be added on demand, as they seem needed.</span></div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>  <span class="keywordflow">return</span> FCmpInst::BAD_FCMP_PREDICATE;</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>}</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span> </div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb"> 1479</a></span><span class="keyword">static</span> <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> <a class="code hl_function" href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV1,</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>                                                      <span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2) {</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>  <span class="keyword">auto</span> isGlobalUnsafeForEquality = [](<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV) {</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>    <span class="keywordflow">if</span> (GV-&gt;hasExternalWeakLinkage() || GV-&gt;hasWeakAnyLinkage())</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *GVar = dyn_cast&lt;GlobalVariable&gt;(GV)) {</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = GVar-&gt;getValueType();</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>      <span class="comment">// A global with opaque type might end up being zero sized.</span></div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>      <span class="keywordflow">if</span> (!Ty-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>())</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>      <span class="comment">// A global with an empty type might lie at the address of any other</span></div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>      <span class="comment">// global.</span></div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>      <span class="keywordflow">if</span> (Ty-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a0f5c23d3b941362c2fa195f4c0b99683">isEmptyTy</a>())</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    }</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>  };</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>  <span class="comment">// Don&#39;t try to decide equality of aliases.</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>  <span class="keywordflow">if</span> (!isa&lt;GlobalAlias&gt;(GV1) &amp;&amp; !isa&lt;GlobalAlias&gt;(GV2))</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>    <span class="keywordflow">if</span> (!isGlobalUnsafeForEquality(GV1) &amp;&amp; !isGlobalUnsafeForEquality(GV2))</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>      <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>}</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span><span class="comment"></span> </div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span><span class="comment">/// This function determines if there is anything we can decide about the two</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span><span class="comment">/// constants provided. This doesn&#39;t need to handle simple things like integer</span></div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span><span class="comment">/// comparisons, but should instead handle ConstantExprs and GlobalValues.</span></div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span><span class="comment">/// If we can determine that the two constants have a particular relation to</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span><span class="comment">/// each other, we should return the corresponding ICmp predicate, otherwise</span></div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span><span class="comment">/// return ICmpInst::BAD_ICMP_PREDICATE.</span></div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span><span class="comment">///</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span><span class="comment">/// To simplify this code we canonicalize the relation so that the first</span></div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span><span class="comment">/// operand is always the most &quot;complex&quot; of the two.  We consider simple</span></div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span><span class="comment">/// constants (like ConstantInt) to be the simplest, followed by</span></div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span><span class="comment">/// GlobalValues, followed by ConstantExpr&#39;s (the most complex).</span></div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span><span class="comment">///</span></div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e"> 1515</a></span><span class="comment"></span><span class="keyword">static</span> <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> <a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V1, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *V2,</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>                                                <span class="keywordtype">bool</span> isSigned) {</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>  <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(V1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>() == V2-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>() &amp;&amp;</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>         <span class="stringliteral">&quot;Cannot compare different types of values!&quot;</span>);</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>  <span class="keywordflow">if</span> (V1 == V2) <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span> </div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>  <span class="keywordflow">if</span> (!isa&lt;ConstantExpr&gt;(V1) &amp;&amp; !isa&lt;GlobalValue&gt;(V1) &amp;&amp;</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>      !isa&lt;BlockAddress&gt;(V1)) {</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>    <span class="keywordflow">if</span> (!isa&lt;GlobalValue&gt;(V2) &amp;&amp; !isa&lt;ConstantExpr&gt;(V2) &amp;&amp;</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>        !isa&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>      <span class="comment">// We distilled this down to a simple case, use the standard constant</span></div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>      <span class="comment">// folder.</span></div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>      <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *R = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>      <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> pred = ICmpInst::ICMP_EQ;</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>      R = dyn_cast&lt;ConstantInt&gt;(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, V1, V2));</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>      pred = isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>      R = dyn_cast&lt;ConstantInt&gt;(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, V1, V2));</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>      pred = isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>      R = dyn_cast&lt;ConstantInt&gt;(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, V1, V2));</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>      <span class="keywordflow">if</span> (R &amp;&amp; !R-&gt;isZero())</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>        <span class="keywordflow">return</span> pred;</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span> </div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>      <span class="comment">// If we couldn&#39;t figure it out, bail.</span></div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>    }</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span> </div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>    <span class="comment">// If the first operand is simple, swap operands.</span></div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>    <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> SwappedRelation =</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>      <a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>    <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>      <span class="keywordflow">return</span> ICmpInst::getSwappedPredicate(SwappedRelation);</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span> </div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(V1)) {</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>    <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(V2)) {  <span class="comment">// Swap as necessary.</span></div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>      <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> SwappedRelation =</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>      <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>        <span class="keywordflow">return</span> ICmpInst::getSwappedPredicate(SwappedRelation);</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>    }</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>    <span class="comment">// Now we know that the RHS is a GlobalValue, BlockAddress or simple</span></div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>    <span class="comment">// constant (which, since the types must match, means that it&#39;s a</span></div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>    <span class="comment">// ConstantPointerNull).</span></div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2 = dyn_cast&lt;GlobalValue&gt;(V2)) {</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(GV, GV2);</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>      <span class="keywordflow">return</span> ICmpInst::ICMP_NE; <span class="comment">// Globals never equal labels.</span></div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>      <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(isa&lt;ConstantPointerNull&gt;(V2) &amp;&amp; <span class="stringliteral">&quot;Canonicalization guarantee!&quot;</span>);</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>      <span class="comment">// GlobalVals can never be null unless they have external weak linkage.</span></div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>      <span class="comment">// We don&#39;t try to evaluate aliases here.</span></div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>      <span class="comment">// NOTE: We should not be doing this constant folding if null pointer</span></div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>      <span class="comment">// is considered valid for the function. But currently there is no way to</span></div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>      <span class="comment">// query it from the Constant type.</span></div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>      <span class="keywordflow">if</span> (!GV-&gt;hasExternalWeakLinkage() &amp;&amp; !isa&lt;GlobalAlias&gt;(GV) &amp;&amp;</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>          !<a class="code hl_function" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<span class="keyword">nullptr</span> <span class="comment">/* F */</span>,</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>                                GV-&gt;getType()-&gt;getAddressSpace()))</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>        <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    }</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1BlockAddress.html">BlockAddress</a> *BA = dyn_cast&lt;BlockAddress&gt;(V1)) {</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>    <span class="keywordflow">if</span> (isa&lt;ConstantExpr&gt;(V2)) {  <span class="comment">// Swap as necessary.</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>      <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a> SwappedRelation =</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>        <a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(V2, V1, isSigned);</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span>      <span class="keywordflow">if</span> (SwappedRelation != ICmpInst::BAD_ICMP_PREDICATE)</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>        <span class="keywordflow">return</span> ICmpInst::getSwappedPredicate(SwappedRelation);</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>      <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>    }</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span> </div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span>    <span class="comment">// Now we know that the RHS is a GlobalValue, BlockAddress or simple</span></div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>    <span class="comment">// constant (which, since the types must match, means that it is a</span></div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>    <span class="comment">// ConstantPointerNull).</span></div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1BlockAddress.html">BlockAddress</a> *BA2 = dyn_cast&lt;BlockAddress&gt;(V2)) {</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>      <span class="comment">// Block address in another function can&#39;t equal this one, but block</span></div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>      <span class="comment">// addresses in the current function might be the same if blocks are</span></div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>      <span class="comment">// empty.</span></div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>      <span class="keywordflow">if</span> (BA2-&gt;getFunction() != BA-&gt;getFunction())</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>        <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>      <span class="comment">// Block addresses aren&#39;t null, don&#39;t equal the address of globals.</span></div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>      <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>((isa&lt;ConstantPointerNull&gt;(V2) || isa&lt;GlobalValue&gt;(V2)) &amp;&amp;</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>             <span class="stringliteral">&quot;Canonicalization guarantee!&quot;</span>);</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>      <span class="keywordflow">return</span> ICmpInst::ICMP_NE;</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    }</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>    <span class="comment">// Ok, the LHS is known to be a constantexpr.  The RHS can be any of a</span></div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>    <span class="comment">// constantexpr, a global, block address, or a simple constant.</span></div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>    <a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = cast&lt;ConstantExpr&gt;(V1);</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CE1Op0 = CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span> </div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>    <span class="keywordflow">switch</span> (CE1-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>()) {</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>    <span class="keywordflow">case</span> Instruction::Trunc:</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>    <span class="keywordflow">case</span> Instruction::FPTrunc:</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    <span class="keywordflow">case</span> Instruction::FPExt:</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    <span class="keywordflow">case</span> Instruction::FPToUI:</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>    <span class="keywordflow">case</span> Instruction::FPToSI:</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>      <span class="keywordflow">break</span>; <span class="comment">// We can&#39;t evaluate floating point casts or truncations.</span></div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span> </div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>    <span class="keywordflow">case</span> Instruction::UIToFP:</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <span class="keywordflow">case</span> Instruction::SIToFP:</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    <span class="keywordflow">case</span> Instruction::BitCast:</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>    <span class="keywordflow">case</span> Instruction::ZExt:</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>    <span class="keywordflow">case</span> Instruction::SExt:</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>      <span class="comment">// We can&#39;t evaluate floating point casts or truncations.</span></div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>      <span class="keywordflow">if</span> (CE1Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>())</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span> </div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>      <span class="comment">// If the cast is not actually changing bits, and the second operand is a</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>      <span class="comment">// null pointer, do the comparison with the pre-casted value.</span></div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>      <span class="keywordflow">if</span> (V2-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp; CE1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">isIntOrPtrTy</a>()) {</div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>        <span class="keywordflow">if</span> (CE1-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>() == Instruction::ZExt) isSigned = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>        <span class="keywordflow">if</span> (CE1-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>() == Instruction::SExt) isSigned = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(CE1Op0,</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span>                                    <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CE1Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()),</div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>                                    isSigned);</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>      }</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span> </div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>    <span class="keywordflow">case</span> Instruction::GetElementPtr: {</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>      <a class="code hl_class" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *CE1GEP = cast&lt;GEPOperator&gt;(CE1);</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>      <span class="comment">// Ok, since this is a getelementptr, we know that the constant has a</span></div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>      <span class="comment">// pointer type.  Check the various cases.</span></div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>      <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(V2)) {</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>        <span class="comment">// If we are comparing a GEP to a null pointer, check to see if the base</span></div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>        <span class="comment">// of the GEP equals the null pointer.</span></div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(CE1Op0)) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>          <span class="keywordflow">if</span> (GV-&gt;hasExternalWeakLinkage())</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>            <span class="comment">// Weak linkage GVals could be zero or not. We&#39;re comparing that</span></div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>            <span class="comment">// to null pointer so its greater-or-equal</span></div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGE : ICmpInst::ICMP_UGE;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>          <span class="keywordflow">else</span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>            <span class="comment">// If its not weak linkage, the GVal must have a non-zero address</span></div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>            <span class="comment">// so the result is greater-than</span></div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(CE1Op0)) {</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>          <span class="comment">// If we are indexing from a null pointer, check to see if we have any</span></div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>          <span class="comment">// non-zero indices.</span></div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); i != e; ++i)</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>            <span class="keywordflow">if</span> (!CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i)-&gt;isNullValue())</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>              <span class="comment">// Offsetting from null, must not be equal.</span></div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>              <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>          <span class="comment">// Only zero indexes from null, must still be zero.</span></div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>          <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        }</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>        <span class="comment">// Otherwise, we can&#39;t really say if the first operand is null or not.</span></div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV2 = dyn_cast&lt;GlobalValue&gt;(V2)) {</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        <span class="keywordflow">if</span> (isa&lt;ConstantPointerNull&gt;(CE1Op0)) {</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>          <span class="keywordflow">if</span> (GV2-&gt;hasExternalWeakLinkage())</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>            <span class="comment">// Weak linkage GVals could be zero or not. We&#39;re comparing it to</span></div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            <span class="comment">// a null pointer, so its less-or-equal</span></div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLE : ICmpInst::ICMP_ULE;</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>          <span class="keywordflow">else</span></div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>            <span class="comment">// If its not weak linkage, the GVal must have a non-zero address</span></div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>            <span class="comment">// so the result is less-than</span></div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(CE1Op0)) {</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>          <span class="keywordflow">if</span> (GV == GV2) {</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>            <span class="comment">// If this is a getelementptr of the same global, then it must be</span></div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>            <span class="comment">// different.  Because the types must match, the getelementptr could</span></div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>            <span class="comment">// only have at most one index, and because we fold getelementptr&#39;s</span></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>            <span class="comment">// with a single zero index, it must be nonzero.</span></div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>            <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == 2 &amp;&amp;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>                   !CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(1)-&gt;isNullValue() &amp;&amp;</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>                   <span class="stringliteral">&quot;Surprising getelementptr!&quot;</span>);</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>            <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            <span class="keywordflow">if</span> (CE1GEP-&gt;<a class="code hl_function" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>())</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>              <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(GV, GV2);</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>            <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>          }</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>        }</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>        <a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE2 = cast&lt;ConstantExpr&gt;(V2);</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CE2Op0 = CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span> </div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="comment">// There are MANY other foldings that we could perform here.  They will</span></div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>        <span class="comment">// probably be added on demand, as they seem needed.</span></div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>        <span class="keywordflow">switch</span> (CE2-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>()) {</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>        <span class="keywordflow">case</span> Instruction::GetElementPtr:</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>          <span class="comment">// By far the most common case to handle is when the base pointers are</span></div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>          <span class="comment">// obviously to the same global.</span></div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>          <span class="keywordflow">if</span> (isa&lt;GlobalValue&gt;(CE1Op0) &amp;&amp; isa&lt;GlobalValue&gt;(CE2Op0)) {</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>            <span class="comment">// Don&#39;t know relative ordering, but check for inequality.</span></div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>            <span class="keywordflow">if</span> (CE1Op0 != CE2Op0) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>              <a class="code hl_class" href="classllvm_1_1GEPOperator.html">GEPOperator</a> *CE2GEP = cast&lt;GEPOperator&gt;(CE2);</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>              <span class="keywordflow">if</span> (CE1GEP-&gt;<a class="code hl_function" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>() &amp;&amp; CE2GEP-&gt;<a class="code hl_function" href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">hasAllZeroIndices</a>())</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a>(cast&lt;GlobalValue&gt;(CE1Op0),</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>                                                  cast&lt;GlobalValue&gt;(CE2Op0));</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>              <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>            }</div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>            <span class="comment">// Ok, we know that both getelementptr instructions are based on the</span></div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>            <span class="comment">// same global.  From this, we can precisely determine the relative</span></div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>            <span class="comment">// ordering of the resultant pointers.</span></div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>            <span class="keywordtype">unsigned</span> i = 1;</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span> </div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>            <span class="comment">// The logic below assumes that the result of the comparison</span></div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>            <span class="comment">// can be determined by finding the first index that differs.</span></div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>            <span class="comment">// This doesn&#39;t work if there is over-indexing in any</span></div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>            <span class="comment">// subsequent indices, so check for that case first.</span></div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>            <span class="keywordflow">if</span> (!CE1-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a864321cef31e718bc327a68dfcfc5ca5">isGEPWithNoNotionalOverIndexing</a>() ||</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>                !CE2-&gt;<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a864321cef31e718bc327a68dfcfc5ca5">isGEPWithNoNotionalOverIndexing</a>())</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>               <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span> </div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>            <span class="comment">// Compare all of the operands the GEP&#39;s have in common.</span></div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>            <a class="code hl_class" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> GTI = <a class="code hl_function" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(CE1);</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>            <span class="keywordflow">for</span> (;i != CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() &amp;&amp; i != CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>();</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>                 ++i, ++GTI)</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>              <span class="keywordflow">switch</span> (<a class="code hl_function" href="ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a>(CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i),</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>                                 CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i), GTI.<a class="code hl_function" href="classllvm_1_1generic__gep__type__iterator.html#af429d12fd67c390e17272e9b16ce9186">getIndexedType</a>())) {</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>              <span class="keywordflow">case</span> -1: <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT:ICmpInst::ICMP_ULT;</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>              <span class="keywordflow">case</span> 1:  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT:ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>              <span class="keywordflow">case</span> -2: <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>              }</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span> </div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>            <span class="comment">// Ok, we ran out of things they have in common.  If any leftovers</span></div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>            <span class="comment">// are non-zero then we have a difference, otherwise we are equal.</span></div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>            <span class="keywordflow">for</span> (; i &lt; CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); ++i)</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>              <span class="keywordflow">if</span> (!CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i)-&gt;isNullValue()) {</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>                <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i)))</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>                  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SGT : ICmpInst::ICMP_UGT;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>                  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>              }</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span> </div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>            <span class="keywordflow">for</span> (; i &lt; CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); ++i)</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>              <span class="keywordflow">if</span> (!CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i)-&gt;isNullValue()) {</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>                <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(i)))</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>                  <span class="keywordflow">return</span> isSigned ? ICmpInst::ICMP_SLT : ICmpInst::ICMP_ULT;</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>                  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE; <span class="comment">// Might be equal.</span></div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>              }</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>            <span class="keywordflow">return</span> ICmpInst::ICMP_EQ;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>          }</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>        }</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>      }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    }</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>    }</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>  }</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span> </div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>  <span class="keywordflow">return</span> ICmpInst::BAD_ICMP_PREDICATE;</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>}</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span> </div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"><a class="line" href="namespacellvm.html#a10d499eb3a0f30658bfee30721184015"> 1765</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#a10d499eb3a0f30658bfee30721184015">llvm::ConstantFoldCompareInstruction</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> pred,</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                                               <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C1, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2) {</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *ResultTy;</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *VT = dyn_cast&lt;VectorType&gt;(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()))</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>    ResultTy = <a class="code hl_function" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(<a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a1fb6e8365dbf4ef3a7426ff3d531ff87">Type::getInt1Ty</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>                               VT-&gt;getNumElements());</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>  <span class="keywordflow">else</span></div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>    ResultTy = <a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a1fb6e8365dbf4ef3a7426ff3d531ff87">Type::getInt1Ty</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span> </div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>  <span class="comment">// Fold FCMP_FALSE/FCMP_TRUE unconditionally.</span></div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>  <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_FALSE)</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ResultTy);</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span> </div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>  <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_TRUE)</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(ResultTy);</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span> </div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>  <span class="comment">// Handle some degenerate cases first</span></div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C1) || isa&lt;UndefValue&gt;(C2)) {</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a> Predicate = <a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a>(pred);</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    <span class="keywordtype">bool</span> isIntegerPredicate = ICmpInst::isIntPredicate(Predicate);</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    <span class="comment">// For EQ and NE, we can always pick a value for the undef to make the</span></div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    <span class="comment">// predicate pass or fail, so we can return undef.</span></div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>    <span class="comment">// Also, if both operands are undef, we can return undef for int comparison.</span></div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Predicate) || (isIntegerPredicate &amp;&amp; C1 == C2))</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(ResultTy);</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span> </div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>    <span class="comment">// Otherwise, for integer compare, pick the same value as the non-undef</span></div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>    <span class="comment">// operand, and fold it to true or false.</span></div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>    <span class="keywordflow">if</span> (isIntegerPredicate)</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, <a class="code hl_function" href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">CmpInst::isTrueWhenEqual</a>(Predicate));</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span> </div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>    <span class="comment">// Choosing NaN for the undef will always make unordered comparison succeed</span></div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>    <span class="comment">// and ordered comparison fails.</span></div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, <a class="code hl_function" href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">CmpInst::isUnordered</a>(Predicate));</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>  }</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span> </div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>  <span class="comment">// icmp eq/ne(null,GV) -&gt; false/true</span></div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>  <span class="keywordflow">if</span> (C1-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) {</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(C2))</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>      <span class="comment">// Don&#39;t try to evaluate aliases.  External weak GV can be null.</span></div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>      <span class="keywordflow">if</span> (!isa&lt;GlobalAlias&gt;(GV) &amp;&amp; !GV-&gt;hasExternalWeakLinkage() &amp;&amp;</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>          !<a class="code hl_function" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<span class="keyword">nullptr</span> <span class="comment">/* F */</span>,</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>                                GV-&gt;getType()-&gt;getAddressSpace())) {</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>        <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_EQ)</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_NE)</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>      }</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>  <span class="comment">// icmp eq/ne(GV,null) -&gt; false/true</span></div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C2-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) {</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(C1))</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>      <span class="comment">// Don&#39;t try to evaluate aliases.  External weak GV can be null.</span></div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>      <span class="keywordflow">if</span> (!isa&lt;GlobalAlias&gt;(GV) &amp;&amp; !GV-&gt;hasExternalWeakLinkage() &amp;&amp;</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>          !<a class="code hl_function" href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">NullPointerIsDefined</a>(<span class="keyword">nullptr</span> <span class="comment">/* F */</span>,</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>                                GV-&gt;getType()-&gt;getAddressSpace())) {</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>        <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_EQ)</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_NE)</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>());</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>      }</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>  }</div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span> </div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>  <span class="comment">// If the comparison is a comparison between two i1&#39;s, simplify it.</span></div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  <span class="keywordflow">if</span> (C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>(1)) {</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    <span class="keywordflow">switch</span>(pred) {</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_EQ:</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>      <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(C2))</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(C1, <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(C2));</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">ConstantExpr::getNot</a>(C1), C2);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_NE:</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">ConstantExpr::getXor</a>(C1, C2);</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    }</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>  }</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span> </div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>  <span class="keywordflow">if</span> (isa&lt;ConstantInt&gt;(C1) &amp;&amp; isa&lt;ConstantInt&gt;(C2)) {</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <span class="keyword">const</span> APInt &amp;V1 = cast&lt;ConstantInt&gt;(C1)-&gt;getValue();</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    <span class="keyword">const</span> APInt &amp;V2 = cast&lt;ConstantInt&gt;(C2)-&gt;getValue();</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    <span class="keywordflow">default</span>: <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid ICmp Predicate&quot;</span>);</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_EQ:  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1 == V2);</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_NE:  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1 != V2);</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SLT: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.slt(V2));</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SGT: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.sgt(V2));</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SLE: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.sle(V2));</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SGE: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.sge(V2));</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_ULT: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.ult(V2));</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_UGT: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.ugt(V2));</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_ULE: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.ule(V2));</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_UGE: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, V1.uge(V2));</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    }</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;ConstantFP&gt;(C1) &amp;&amp; isa&lt;ConstantFP&gt;(C2)) {</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>    <span class="keyword">const</span> APFloat &amp;C1V = cast&lt;ConstantFP&gt;(C1)-&gt;getValueAPF();</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>    <span class="keyword">const</span> APFloat &amp;C2V = cast&lt;ConstantFP&gt;(C2)-&gt;getValueAPF();</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>    APFloat::cmpResult R = C1V.compare(C2V);</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    <span class="keywordflow">default</span>: <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Invalid FCmp Predicate&quot;</span>);</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_FALSE: <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ResultTy);</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_TRUE:  <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(ResultTy);</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UNO:</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpUnordered);</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ORD:</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R!=APFloat::cmpUnordered);</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UEQ:</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpUnordered ||</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>                                        R==APFloat::cmpEqual);</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OEQ:</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpEqual);</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UNE:</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R!=APFloat::cmpEqual);</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ONE:</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpLessThan ||</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>                                        R==APFloat::cmpGreaterThan);</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ULT:</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpUnordered ||</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>                                        R==APFloat::cmpLessThan);</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OLT:</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpLessThan);</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UGT:</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpUnordered ||</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>                                        R==APFloat::cmpGreaterThan);</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OGT:</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpGreaterThan);</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ULE:</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R!=APFloat::cmpGreaterThan);</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OLE:</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpLessThan ||</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>                                        R==APFloat::cmpEqual);</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UGE:</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R!=APFloat::cmpLessThan);</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OGE:</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, R==APFloat::cmpGreaterThan ||</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>                                        R==APFloat::cmpEqual);</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    }</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>    <span class="comment">// If we can constant fold the comparison of each element, constant fold</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    <span class="comment">// the whole vector comparison.</span></div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>    <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant*, 4&gt;</a> ResElts;</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), 32);</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    <span class="comment">// Compare the elements, producing an i1 result or constant expr.</span></div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>(); i != e;++i){</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C1E =</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>        <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(C1, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2E =</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>        <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">ConstantExpr::getExtractElement</a>(C2, <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(Ty, i));</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span> </div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>      ResElts.push_back(<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">ConstantExpr::getCompare</a>(pred, C1E, C2E));</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>    }</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span> </div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">ConstantVector::get</a>(ResElts);</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>  }</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span> </div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>  <span class="keywordflow">if</span> (C1-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() &amp;&amp;</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>      <span class="comment">// Only call evaluateFCmpRelation if we have a constant expr to avoid</span></div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>      <span class="comment">// infinite recursive loop</span></div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>      (isa&lt;ConstantExpr&gt;(C1) || isa&lt;ConstantExpr&gt;(C2))) {</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>    <span class="keywordtype">int</span> Result = -1;  <span class="comment">// -1 = unknown, 0 = known false, 1 = known true.</span></div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a>(C1, C2)) {</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span>    <span class="keywordflow">default</span>: <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown relation!&quot;</span>);</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UNO:</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ORD:</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UNE:</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ULT:</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UGT:</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ULE:</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UGE:</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_TRUE:</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_FALSE:</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    <span class="keywordflow">case</span> FCmpInst::BAD_FCMP_PREDICATE:</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>      <span class="keywordflow">break</span>; <span class="comment">// Couldn&#39;t determine anything about these constants.</span></div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OEQ: <span class="comment">// We know that C1 == C2</span></div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>      Result = (pred == FCmpInst::FCMP_UEQ || pred == FCmpInst::FCMP_OEQ ||</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>                pred == FCmpInst::FCMP_ULE || pred == FCmpInst::FCMP_OLE ||</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>                pred == FCmpInst::FCMP_UGE || pred == FCmpInst::FCMP_OGE);</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OLT: <span class="comment">// We know that C1 &lt; C2</span></div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>      Result = (pred == FCmpInst::FCMP_UNE || pred == FCmpInst::FCMP_ONE ||</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>                pred == FCmpInst::FCMP_ULT || pred == FCmpInst::FCMP_OLT ||</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>                pred == FCmpInst::FCMP_ULE || pred == FCmpInst::FCMP_OLE);</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OGT: <span class="comment">// We know that C1 &gt; C2</span></div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>      Result = (pred == FCmpInst::FCMP_UNE || pred == FCmpInst::FCMP_ONE ||</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>                pred == FCmpInst::FCMP_UGT || pred == FCmpInst::FCMP_OGT ||</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>                pred == FCmpInst::FCMP_UGE || pred == FCmpInst::FCMP_OGE);</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OLE: <span class="comment">// We know that C1 &lt;= C2</span></div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>      <span class="comment">// We can only partially decide this relation.</span></div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>      <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_UGT || pred == FCmpInst::FCMP_OGT)</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>        Result = 0;</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_ULT || pred == FCmpInst::FCMP_OLT)</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>        Result = 1;</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_OGE: <span class="comment">// We known that C1 &gt;= C2</span></div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>      <span class="comment">// We can only partially decide this relation.</span></div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>      <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_ULT || pred == FCmpInst::FCMP_OLT)</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>        Result = 0;</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_UGT || pred == FCmpInst::FCMP_OGT)</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>        Result = 1;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_ONE: <span class="comment">// We know that C1 != C2</span></div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>      <span class="comment">// We can only partially decide this relation.</span></div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>      <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_OEQ || pred == FCmpInst::FCMP_UEQ)</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        Result = 0;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_ONE || pred == FCmpInst::FCMP_UNE)</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>        Result = 1;</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>    <span class="keywordflow">case</span> FCmpInst::FCMP_UEQ: <span class="comment">// We know that C1 == C2 || isUnordered(C1, C2).</span></div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>      <span class="comment">// We can only partially decide this relation.</span></div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>      <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_ONE)</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>        Result = 0;</div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pred == FCmpInst::FCMP_UEQ)</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>        Result = 1;</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>    }</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span> </div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>    <span class="comment">// If we evaluated the result, return it now.</span></div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>    <span class="keywordflow">if</span> (Result != -1)</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, Result);</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span> </div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span>    <span class="comment">// Evaluate the relation between the two constants, per the predicate.</span></div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    <span class="keywordtype">int</span> Result = -1;  <span class="comment">// -1 = unknown, 0 = known false, 1 = known true.</span></div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a>(C1, C2,</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>                                 <a class="code hl_function" href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">CmpInst::isSigned</a>((<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">CmpInst::Predicate</a>)pred))) {</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>    <span class="keywordflow">default</span>: <a class="code hl_define" href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown relational!&quot;</span>);</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>    <span class="keywordflow">case</span> ICmpInst::BAD_ICMP_PREDICATE:</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>      <span class="keywordflow">break</span>;  <span class="comment">// Couldn&#39;t determine anything about these constants.</span></div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_EQ:   <span class="comment">// We know the constants are equal!</span></div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>      <span class="comment">// If we know the constants are equal, we can decide the result of this</span></div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>      <span class="comment">// computation precisely.</span></div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>      Result = ICmpInst::isTrueWhenEqual((<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a>)pred);</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_ULT:</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>      <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_ULT: <span class="keywordflow">case</span> ICmpInst::ICMP_NE: <span class="keywordflow">case</span> ICmpInst::ICMP_ULE:</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>        Result = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_UGT: <span class="keywordflow">case</span> ICmpInst::ICMP_EQ: <span class="keywordflow">case</span> ICmpInst::ICMP_UGE:</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>        Result = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>      }</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SLT:</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>      <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_SLT: <span class="keywordflow">case</span> ICmpInst::ICMP_NE: <span class="keywordflow">case</span> ICmpInst::ICMP_SLE:</div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>        Result = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_SGT: <span class="keywordflow">case</span> ICmpInst::ICMP_EQ: <span class="keywordflow">case</span> ICmpInst::ICMP_SGE:</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>        Result = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>      }</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_UGT:</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>      <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_UGT: <span class="keywordflow">case</span> ICmpInst::ICMP_NE: <span class="keywordflow">case</span> ICmpInst::ICMP_UGE:</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        Result = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_ULT: <span class="keywordflow">case</span> ICmpInst::ICMP_EQ: <span class="keywordflow">case</span> ICmpInst::ICMP_ULE:</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>        Result = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>      }</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SGT:</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>      <span class="keywordflow">switch</span> (pred) {</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_SGT: <span class="keywordflow">case</span> ICmpInst::ICMP_NE: <span class="keywordflow">case</span> ICmpInst::ICMP_SGE:</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>        Result = 1; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>      <span class="keywordflow">case</span> ICmpInst::ICMP_SLT: <span class="keywordflow">case</span> ICmpInst::ICMP_EQ: <span class="keywordflow">case</span> ICmpInst::ICMP_SLE:</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>        Result = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>      }</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_ULE:</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_UGT) Result = 0;</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_ULT || pred == ICmpInst::ICMP_ULE) Result = 1;</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SLE:</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_SGT) Result = 0;</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_SLT || pred == ICmpInst::ICMP_SLE) Result = 1;</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_UGE:</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_ULT) Result = 0;</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_UGT || pred == ICmpInst::ICMP_UGE) Result = 1;</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_SGE:</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_SLT) Result = 0;</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_SGT || pred == ICmpInst::ICMP_SGE) Result = 1;</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>    <span class="keywordflow">case</span> ICmpInst::ICMP_NE:</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_EQ) Result = 0;</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>      <span class="keywordflow">if</span> (pred == ICmpInst::ICMP_NE) Result = 1;</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>    }</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span> </div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>    <span class="comment">// If we evaluated the result, return it now.</span></div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <span class="keywordflow">if</span> (Result != -1)</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(ResultTy, Result);</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span> </div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>    <span class="comment">// If the right hand side is a bitcast, try using its inverse to simplify</span></div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>    <span class="comment">// it by moving it to the left hand side.  We can&#39;t do this if it would turn</span></div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>    <span class="comment">// a vector compare into a scalar compare or visa versa, or if it would turn</span></div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>    <span class="comment">// the operands into FP values.</span></div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE2 = dyn_cast&lt;ConstantExpr&gt;(C2)) {</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>      <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CE2Op0 = CE2-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>      <span class="keywordflow">if</span> (CE2-&gt;getOpcode() == Instruction::BitCast &amp;&amp;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>          CE2-&gt;getType()-&gt;isVectorTy() == CE2Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp;</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>          !CE2Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>()) {</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Inverse = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(C1, CE2Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, Inverse, CE2Op0);</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>      }</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>    }</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span> </div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>    <span class="comment">// If the left hand side is an extension, try eliminating it.</span></div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE1 = dyn_cast&lt;ConstantExpr&gt;(C1)) {</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>      <span class="keywordflow">if</span> ((CE1-&gt;getOpcode() == Instruction::SExt &amp;&amp;</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>           ICmpInst::isSigned((<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a>)pred)) ||</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>          (CE1-&gt;getOpcode() == Instruction::ZExt &amp;&amp;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>           !ICmpInst::isSigned((<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a>)pred))){</div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CE1Op0 = CE1-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(0);</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CE1Inverse = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(CE1, CE1Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>        <span class="keywordflow">if</span> (CE1Inverse == CE1Op0) {</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>          <span class="comment">// Check whether we can safely truncate the right hand side.</span></div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>          <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2Inverse = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(C2, CE1Op0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>());</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span>          <span class="keywordflow">if</span> (<a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(CE1-&gt;getOpcode(), C2Inverse,</div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>                                    C2-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()) == C2)</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, CE1Inverse, C2Inverse);</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>        }</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      }</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>    }</div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span> </div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>    <span class="keywordflow">if</span> ((!isa&lt;ConstantExpr&gt;(C1) &amp;&amp; isa&lt;ConstantExpr&gt;(C2)) ||</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>        (C1-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() &amp;&amp; !C2-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())) {</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span>      <span class="comment">// If C2 is a constant expr and C1 isn&#39;t, flip them around and fold the</span></div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>      <span class="comment">// other way if possible.</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>      <span class="comment">// Also, if C1 is null and C2 isn&#39;t, flip them around.</span></div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>      pred = ICmpInst::getSwappedPredicate((<a class="code hl_enumeration" href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">ICmpInst::Predicate</a>)pred);</div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(pred, C2, C1);</div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>    }</div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>  }</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>}</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span><span class="comment"></span> </div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span><span class="comment">/// Test whether the given sequence of *normalized* indices is &quot;inbounds&quot;.</span></div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span><span class="comment"></span><span class="keyword">template</span>&lt;<span class="keyword">typename</span> IndexTy&gt;</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1"> 2102</a></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a>(<a class="code hl_class" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;IndexTy&gt;</a> Idxs) {</div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>  <span class="comment">// No indices means nothing that could be out of bounds.</span></div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span>  <span class="keywordflow">if</span> (Idxs.empty()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span> </div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>  <span class="comment">// If the first index is zero, it&#39;s in bounds.</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>  <span class="keywordflow">if</span> (cast&lt;Constant&gt;(Idxs[0])-&gt;isNullValue()) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span> </div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>  <span class="comment">// If the first index is one and all the rest are zero, it&#39;s in bounds,</span></div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span>  <span class="comment">// by the one-past-the-end rule.</span></div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CI = dyn_cast&lt;ConstantInt&gt;(Idxs[0])) {</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>    <span class="keywordflow">if</span> (!CI-&gt;isOne())</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>    <span class="keyword">auto</span> *CV = cast&lt;ConstantDataVector&gt;(Idxs[0]);</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span>    CI = dyn_cast_or_null&lt;ConstantInt&gt;(CV-&gt;getSplatValue());</div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"> 2117</span>    <span class="keywordflow">if</span> (!CI || !CI-&gt;isOne())</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>  }</div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span> </div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = Idxs.size(); i != e; ++i)</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>    <span class="keywordflow">if</span> (!cast&lt;Constant&gt;(Idxs[i])-&gt;isNullValue())</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>}</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span><span class="comment"></span> </div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span><span class="comment">/// Test whether a given ConstantInt is in-range for a SequentialType.</span></div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"><a class="line" href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09"> 2128</a></span><span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09">isIndexInRangeOfArrayType</a>(uint64_t NumElements,</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>                                      <span class="keyword">const</span> <a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI) {</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>  <span class="comment">// We cannot bounds check the index if it doesn&#39;t fit in an int64_t.</span></div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>  <span class="keywordflow">if</span> (CI-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#af7e1934ed72a405ef073ea5f9bbe828e">getValue</a>().getMinSignedBits() &gt; 64)</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span> </div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>  <span class="comment">// A negative index or an index past the end of our sequential type is</span></div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>  <span class="comment">// considered out-of-range.</span></div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span>  int64_t IndexVal = CI-&gt;<a class="code hl_function" href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">getSExtValue</a>();</div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"> 2137</span>  <span class="keywordflow">if</span> (IndexVal &lt; 0 || (NumElements &gt; 0 &amp;&amp; (uint64_t)IndexVal &gt;= NumElements))</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span> </div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>  <span class="comment">// Otherwise, it is in-range.</span></div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span>}</div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span> </div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"><a class="line" href="namespacellvm.html#af3ac463ee03838850d4c1253d9a4eb14"> 2144</a></span><a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *<a class="code hl_function" href="namespacellvm.html#af3ac463ee03838850d4c1253d9a4eb14">llvm::ConstantFoldGetElementPtr</a>(<a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *PointeeTy, <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C,</div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>                                          <span class="keywordtype">bool</span> InBounds,</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>                                          <a class="code hl_class" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> InRangeIndex,</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>                                          <a class="code hl_class" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Idxs) {</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>  <span class="keywordflow">if</span> (Idxs.empty()) <span class="keywordflow">return</span> C;</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span> </div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *GEPTy = <a class="code hl_function" href="classllvm_1_1GetElementPtrInst.html#a131bb2ad08caba3a193dd8e1d862d704">GetElementPtrInst::getGEPReturnType</a>(</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>      PointeeTy, C, makeArrayRef((<a class="code hl_class" href="classllvm_1_1Value.html">Value</a> *<span class="keyword">const</span> *)Idxs.data(), Idxs.size()));</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span> </div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(C))</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(GEPTy);</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span> </div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>  <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Idx0 = cast&lt;Constant&gt;(Idxs[0]);</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>  <span class="keywordflow">if</span> (Idxs.size() == 1 &amp;&amp; (Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>() || isa&lt;UndefValue&gt;(Idx0)))</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    <span class="keywordflow">return</span> GEPTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; !C-&gt;getType()-&gt;isVectorTy()</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>               ? <a class="code hl_function" href="classllvm_1_1ConstantVector.html#a5ce0c10fc8f570a6411da209203a1c6e">ConstantVector::getSplat</a>(</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                     cast&lt;VectorType&gt;(GEPTy)-&gt;getNumElements(), C)</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>               : C;</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span> </div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>  <span class="keywordflow">if</span> (C-&gt;isNullValue()) {</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>    <span class="keywordtype">bool</span> isNull = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.size(); i != e; ++i)</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>      <span class="keywordflow">if</span> (!isa&lt;UndefValue&gt;(Idxs[i]) &amp;&amp;</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>          !cast&lt;Constant&gt;(Idxs[i])-&gt;isNullValue()) {</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>        isNull = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>      }</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>    <span class="keywordflow">if</span> (isNull) {</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>      <a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *PtrTy = cast&lt;PointerType&gt;(C-&gt;getType()-&gt;getScalarType());</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code hl_function" href="classllvm_1_1GetElementPtrInst.html#a99d4bfe49182f8d80abb1960f2c12d46">GetElementPtrInst::getIndexedType</a>(PointeeTy, Idxs);</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span> </div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>      <a class="code hl_function" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a>(Ty &amp;&amp; <span class="stringliteral">&quot;Invalid indices for GEP!&quot;</span>);</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *OrigGEPTy = <a class="code hl_function" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(Ty, PtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>      <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *GEPTy = <a class="code hl_function" href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">PointerType::get</a>(Ty, PtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>());</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1VectorType.html">VectorType</a> *VT = dyn_cast&lt;VectorType&gt;(C-&gt;getType()))</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>        GEPTy = <a class="code hl_function" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(OrigGEPTy, VT-&gt;getNumElements());</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span> </div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>      <span class="comment">// The GEP returns a vector of pointers when one of more of</span></div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>      <span class="comment">// its arguments is a vector.</span></div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.size(); i != e; ++i) {</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *VT = dyn_cast&lt;VectorType&gt;(Idxs[i]-&gt;getType())) {</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span>          GEPTy = <a class="code hl_function" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(OrigGEPTy, VT-&gt;getNumElements());</div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>        }</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>      }</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span> </div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>      <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(GEPTy);</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span>    }</div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>  }</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span> </div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>  <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE = dyn_cast&lt;ConstantExpr&gt;(C)) {</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>    <span class="comment">// Combine Indices - If the source pointer to this getelementptr instruction</span></div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    <span class="comment">// is a getelementptr instruction, combine the indices of the two</span></div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <span class="comment">// getelementptr instructions into a single instruction.</span></div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <span class="keywordflow">if</span> (CE-&gt;getOpcode() == Instruction::GetElementPtr) {</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>      <a class="code hl_class" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> LastI = <a class="code hl_function" href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(CE);</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>      <span class="keywordflow">for</span> (<a class="code hl_class" href="classllvm_1_1generic__gep__type__iterator.html">gep_type_iterator</a> <a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code hl_function" href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">gep_type_begin</a>(CE), E = <a class="code hl_function" href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">gep_type_end</a>(CE);</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>           <a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>        LastI = <a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span> </div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>      <span class="comment">// We cannot combine indices if doing so would take us outside of an</span></div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>      <span class="comment">// array or vector.  Doing otherwise could trick us if we evaluated such a</span></div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>      <span class="comment">// GEP as part of a load.</span></div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>      <span class="comment">//</span></div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>      <span class="comment">// e.g. Consider if the original GEP was:</span></div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>      <span class="comment">// i8* getelementptr ({ [2 x i8], i32, i8, [3 x i8] }* @main.c,</span></div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>      <span class="comment">//                    i32 0, i32 0, i64 0)</span></div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>      <span class="comment">//</span></div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>      <span class="comment">// If we then tried to offset it by &#39;8&#39; to get to the third element,</span></div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>      <span class="comment">// an i8, we should *not* get:</span></div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>      <span class="comment">// i8* getelementptr ({ [2 x i8], i32, i8, [3 x i8] }* @main.c,</span></div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>      <span class="comment">//                    i32 0, i32 0, i64 8)</span></div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>      <span class="comment">//</span></div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>      <span class="comment">// This GEP tries to index array element &#39;8  which runs out-of-bounds.</span></div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>      <span class="comment">// Subsequent evaluation would get confused and produce erroneous results.</span></div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>      <span class="comment">//</span></div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>      <span class="comment">// The following prohibits such a GEP from being formed by checking to see</span></div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>      <span class="comment">// if the index is in-range with respect to an array.</span></div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>      <span class="comment">// TODO: This code may be extended to handle vectors as well.</span></div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>      <span class="keywordtype">bool</span> PerformFold = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>      <span class="keywordflow">if</span> (Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())</div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>        PerformFold = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (LastI.<a class="code hl_function" href="classllvm_1_1generic__gep__type__iterator.html#a48cf1b8139cae1d146beb7e0f73c0817">isSequential</a>())</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Idx0))</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>          PerformFold = (!LastI.<a class="code hl_function" href="classllvm_1_1generic__gep__type__iterator.html#af5d0717c324693b5350c48a9c4152152">isBoundedSequential</a>() ||</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>                         <a class="code hl_function" href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09">isIndexInRangeOfArrayType</a>(</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>                             LastI.<a class="code hl_function" href="classllvm_1_1generic__gep__type__iterator.html#aaa6db68bda45ffb5d095cdf6e3e1d102">getSequentialNumElements</a>(), CI)) &amp;&amp;</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>                        !CE-&gt;getOperand(CE-&gt;getNumOperands() - 1)</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>                             -&gt;getType()</div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>                             -&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>();</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span> </div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>      <span class="keywordflow">if</span> (PerformFold) {</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>        <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Value*, 16&gt;</a> NewIndices;</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>        NewIndices.reserve(Idxs.size() + CE-&gt;getNumOperands());</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>        NewIndices.append(CE-&gt;op_begin() + 1, CE-&gt;op_end() - 1);</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span> </div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>        <span class="comment">// Add the last index of the source with the first index of the new GEP.</span></div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>        <span class="comment">// Make sure to handle the case when they are actually different types.</span></div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>        <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Combined = CE-&gt;<a class="code hl_function" href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">getOperand</a>(CE-&gt;getNumOperands()-1);</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>        <span class="comment">// Otherwise it must be an array.</span></div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>        <span class="keywordflow">if</span> (!Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) {</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>          <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *IdxTy = Combined-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>();</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>          <span class="keywordflow">if</span> (IdxTy != Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()) {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>            <span class="keywordtype">unsigned</span> CommonExtendedWidth =</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>                std::max(IdxTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>(),</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>                         Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>());</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>            CommonExtendedWidth = std::max(CommonExtendedWidth, 64U);</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span> </div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>            <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *CommonTy =</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>                <a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a31e2db8d1b315202d2c19e711b5365fd">Type::getIntNTy</a>(IdxTy-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a909eca4ba9e5eefc203c8e3770bdab25">getContext</a>(), CommonExtendedWidth);</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>            <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C1 = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a01cc837ca9de3995b5b5ebf7585c9f64">ConstantExpr::getSExtOrBitCast</a>(Idx0, CommonTy);</div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>            <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *C2 = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a01cc837ca9de3995b5b5ebf7585c9f64">ConstantExpr::getSExtOrBitCast</a>(Combined, CommonTy);</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>            Combined = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(<a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>, C1, C2);</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>          } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>            Combined =</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>              <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">ConstantExpr::get</a>(<a class="code hl_class" href="classllvm_1_1Registry_1_1Add.html">Instruction::Add</a>, Idx0, Combined);</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>          }</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>        }</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span> </div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>        NewIndices.push_back(Combined);</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>        NewIndices.append(Idxs.begin() + 1, Idxs.end());</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span> </div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>        <span class="comment">// The combined GEP normally inherits its index inrange attribute from</span></div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>        <span class="comment">// the inner GEP, but if the inner GEP&#39;s last index was adjusted by the</span></div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>        <span class="comment">// outer GEP, any inbounds attribute on that index is invalidated.</span></div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>        <a class="code hl_class" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> IRIndex = cast&lt;GEPOperator&gt;(CE)-&gt;getInRangeIndex();</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>        <span class="keywordflow">if</span> (IRIndex &amp;&amp; *IRIndex == CE-&gt;getNumOperands() - 2 &amp;&amp; !Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>())</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>          IRIndex = <a class="code hl_enumvalue" href="namespacellvm.html#aad87d874f7944b5838f7881938d18870a6adf97f83acf6453d4a6a4b1070f3754">None</a>;</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span> </div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a6e02e77c1b0dc7ca8f4cf923311a6a22">ConstantExpr::getGetElementPtr</a>(</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>            cast&lt;GEPOperator&gt;(CE)-&gt;getSourceElementType(), CE-&gt;getOperand(0),</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>            NewIndices, InBounds &amp;&amp; cast&lt;GEPOperator&gt;(CE)-&gt;isInBounds(),</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>            IRIndex);</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>      }</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    }</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <span class="comment">// Attempt to fold casts to the same type away.  For example, folding:</span></div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>    <span class="comment">//   i32* getelementptr ([2 x i32]* bitcast ([3 x i32]* %X to [2 x i32]*),</span></div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>    <span class="comment">//                       i64 0, i64 0)</span></div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    <span class="comment">// into:</span></div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>    <span class="comment">//   i32* getelementptr ([3 x i32]* %X, i64 0, i64 0)</span></div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>    <span class="comment">//</span></div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    <span class="comment">// Don&#39;t fold if the cast is changing address spaces.</span></div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <span class="keywordflow">if</span> (CE-&gt;isCast() &amp;&amp; Idxs.size() &gt; 1 &amp;&amp; Idx0-&gt;<a class="code hl_function" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) {</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>      <a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *SrcPtrTy =</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>        dyn_cast&lt;PointerType&gt;(CE-&gt;getOperand(0)-&gt;getType());</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>      <a class="code hl_class" href="classllvm_1_1PointerType.html">PointerType</a> *DstPtrTy = dyn_cast&lt;PointerType&gt;(CE-&gt;getType());</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>      <span class="keywordflow">if</span> (SrcPtrTy &amp;&amp; DstPtrTy) {</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>        <a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *SrcArrayTy =</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>          dyn_cast&lt;ArrayType&gt;(SrcPtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#a5311952ad929bb3854278f7549bfc73f">getElementType</a>());</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>        <a class="code hl_class" href="classllvm_1_1ArrayType.html">ArrayType</a> *DstArrayTy =</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>          dyn_cast&lt;ArrayType&gt;(DstPtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#a5311952ad929bb3854278f7549bfc73f">getElementType</a>());</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>        <span class="keywordflow">if</span> (SrcArrayTy &amp;&amp; DstArrayTy</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>            &amp;&amp; SrcArrayTy-&gt;<a class="code hl_function" href="classllvm_1_1SequentialType.html#a4412918dc9c2ccb6de632fbf82ab3964">getElementType</a>() == DstArrayTy-&gt;<a class="code hl_function" href="classllvm_1_1SequentialType.html#a4412918dc9c2ccb6de632fbf82ab3964">getElementType</a>()</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>            &amp;&amp; SrcPtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>() == DstPtrTy-&gt;<a class="code hl_function" href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">getAddressSpace</a>())</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>          <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a6e02e77c1b0dc7ca8f4cf923311a6a22">ConstantExpr::getGetElementPtr</a>(SrcArrayTy,</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>                                                (<a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *)CE-&gt;getOperand(0),</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>                                                Idxs, InBounds, InRangeIndex);</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>      }</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>    }</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>  }</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span> </div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>  <span class="comment">// Check to see if any array indices are not within the corresponding</span></div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>  <span class="comment">// notional array or vector bounds. If so, try to determine if they can be</span></div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>  <span class="comment">// factored out into preceding dimensions.</span></div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>  <a class="code hl_class" href="classSmallVector.html">SmallVector&lt;Constant *, 8&gt;</a> NewIdxs;</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Ty = PointeeTy;</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>  <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *Prev = C-&gt;getType();</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>  <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> =</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>      !isa&lt;ConstantInt&gt;(Idxs[0]) &amp;&amp; !isa&lt;ConstantDataVector&gt;(Idxs[0]);</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 1, e = Idxs.size(); i != e;</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>       Prev = Ty, Ty = cast&lt;CompositeType&gt;(Ty)-&gt;getTypeAtIndex(Idxs[i]), ++i) {</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Idxs[i]) &amp;&amp; !isa&lt;ConstantDataVector&gt;(Idxs[i])) {</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>      <span class="comment">// We don&#39;t know if it&#39;s in range or not.</span></div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>      <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>    }</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Idxs[i - 1]) &amp;&amp; !isa&lt;ConstantDataVector&gt;(Idxs[i - 1]))</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>      <span class="comment">// Skip if the type of the previous index is not supported.</span></div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>    <span class="keywordflow">if</span> (InRangeIndex &amp;&amp; i == *InRangeIndex + 1) {</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>      <span class="comment">// If an index is marked inrange, we cannot apply this canonicalization to</span></div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>      <span class="comment">// the following index, as that will cause the inrange index to point to</span></div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>      <span class="comment">// the wrong element.</span></div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>    }</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>    <span class="keywordflow">if</span> (isa&lt;StructType&gt;(Ty)) {</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>      <span class="comment">// The verify makes sure that GEPs into a struct are in range.</span></div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>    }</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>    <span class="keyword">auto</span> *STy = cast&lt;SequentialType&gt;(Ty);</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>    <span class="keywordflow">if</span> (isa&lt;VectorType&gt;(STy)) {</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>      <span class="comment">// There can be awkward padding in after a non-power of two vector.</span></div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>      <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>    }</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CI = dyn_cast&lt;ConstantInt&gt;(Idxs[i])) {</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09">isIndexInRangeOfArrayType</a>(STy-&gt;getNumElements(), CI))</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>        <span class="comment">// It&#39;s in range, skip to the next index.</span></div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>      <span class="keywordflow">if</span> (CI-&gt;getSExtValue() &lt; 0) {</div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>        <span class="comment">// It&#39;s out of range and negative, don&#39;t try to factor it.</span></div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>        <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>      }</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>      <span class="keyword">auto</span> *CV = cast&lt;ConstantDataVector&gt;(Idxs[i]);</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>      <span class="keywordtype">bool</span> InRange = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, E = CV-&gt;getNumElements(); <a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != E; ++<a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>        <span class="keyword">auto</span> *CI = cast&lt;ConstantInt&gt;(CV-&gt;getElementAsConstant(<a class="code hl_define" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>        InRange &amp;= <a class="code hl_function" href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09">isIndexInRangeOfArrayType</a>(STy-&gt;getNumElements(), CI);</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>        <span class="keywordflow">if</span> (CI-&gt;getSExtValue() &lt; 0) {</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>          <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>        }</div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span>      }</div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>      <span class="keywordflow">if</span> (InRange || <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a>)</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        <span class="comment">// It&#39;s in range, skip to the next index.</span></div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>        <span class="comment">// It&#39;s out of range and negative, don&#39;t try to factor it.</span></div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>    }</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>    <span class="keywordflow">if</span> (isa&lt;StructType&gt;(Prev)) {</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>      <span class="comment">// It&#39;s out of range, but the prior dimension is a struct</span></div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>      <span class="comment">// so we can&#39;t do anything about it.</span></div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>      <a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>    }</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>    <span class="comment">// It&#39;s out of range, but we can factor it into the prior</span></div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>    <span class="comment">// dimension.</span></div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    NewIdxs.resize(Idxs.size());</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    <span class="comment">// Determine the number of elements in our sequential type.</span></div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>    uint64_t NumElements = STy-&gt;getArrayNumElements();</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span> </div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    <span class="comment">// Expand the current index or the previous index to a vector from a scalar</span></div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>    <span class="comment">// if necessary.</span></div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *CurrIdx = cast&lt;Constant&gt;(Idxs[i]);</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>    <span class="keyword">auto</span> *PrevIdx =</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>        NewIdxs[i - 1] ? NewIdxs[i - 1] : cast&lt;Constant&gt;(Idxs[i - 1]);</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>    <span class="keywordtype">bool</span> IsCurrIdxVector = CurrIdx-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>();</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>    <span class="keywordtype">bool</span> IsPrevIdxVector = PrevIdx-&gt;getType()-&gt;isVectorTy();</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>    <span class="keywordtype">bool</span> UseVector = IsCurrIdxVector || IsPrevIdxVector;</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span> </div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>    <span class="keywordflow">if</span> (!IsCurrIdxVector &amp;&amp; IsPrevIdxVector)</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>      CurrIdx = <a class="code hl_function" href="classllvm_1_1ConstantDataVector.html#a44124e702dc442346bd6202bb03e593b">ConstantDataVector::getSplat</a>(</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>          PrevIdx-&gt;getType()-&gt;getVectorNumElements(), CurrIdx);</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span> </div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>    <span class="keywordflow">if</span> (!IsPrevIdxVector &amp;&amp; IsCurrIdxVector)</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>      PrevIdx = <a class="code hl_function" href="classllvm_1_1ConstantDataVector.html#a44124e702dc442346bd6202bb03e593b">ConstantDataVector::getSplat</a>(</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>          CurrIdx-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>(), PrevIdx);</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span> </div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Factor =</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>        <a class="code hl_function" href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">ConstantInt::get</a>(CurrIdx-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#af60c6120dbc5acdfcff9a7621d123796">getScalarType</a>(), NumElements);</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    <span class="keywordflow">if</span> (UseVector)</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>      Factor = <a class="code hl_function" href="classllvm_1_1ConstantDataVector.html#a44124e702dc442346bd6202bb03e593b">ConstantDataVector::getSplat</a>(</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>          IsPrevIdxVector ? PrevIdx-&gt;getType()-&gt;getVectorNumElements()</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>                          : CurrIdx-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>(),</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>          Factor);</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span> </div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>    NewIdxs[i] = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ac8358066036f59f2d0a73b0b9ccf3e0e">ConstantExpr::getSRem</a>(CurrIdx, Factor);</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span> </div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>    <a class="code hl_class" href="classllvm_1_1Constant.html">Constant</a> *Div = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a5553db145ba1df692578ebb8b9d6ac13">ConstantExpr::getSDiv</a>(CurrIdx, Factor);</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span> </div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>    <span class="keywordtype">unsigned</span> CommonExtendedWidth =</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>        std::max(PrevIdx-&gt;getType()-&gt;getScalarSizeInBits(),</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>                 Div-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>    CommonExtendedWidth = std::max(CommonExtendedWidth, 64U);</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span> </div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>    <span class="comment">// Before adding, extend both operands to i64 to avoid</span></div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>    <span class="comment">// overflow trouble.</span></div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>    <a class="code hl_class" href="classllvm_1_1Type.html">Type</a> *ExtendedTy = <a class="code hl_function" href="classllvm_1_1IRBuilderBase.html#a31e2db8d1b315202d2c19e711b5365fd">Type::getIntNTy</a>(Div-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>(), CommonExtendedWidth);</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>    <span class="keywordflow">if</span> (UseVector)</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>      ExtendedTy = <a class="code hl_function" href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">VectorType::get</a>(</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>          ExtendedTy, IsPrevIdxVector</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>                          ? PrevIdx-&gt;getType()-&gt;getVectorNumElements()</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>                          : CurrIdx-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">getVectorNumElements</a>());</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span> </div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>    <span class="keywordflow">if</span> (!PrevIdx-&gt;getType()-&gt;isIntOrIntVectorTy(CommonExtendedWidth))</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>      PrevIdx = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(PrevIdx, ExtendedTy);</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span> </div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>    <span class="keywordflow">if</span> (!Div-&gt;<a class="code hl_function" href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">getType</a>()-&gt;<a class="code hl_function" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(CommonExtendedWidth))</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>      Div = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(Div, ExtendedTy);</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span> </div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    NewIdxs[i - 1] = <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">ConstantExpr::getAdd</a>(PrevIdx, Div);</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span>  }</div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span> </div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>  <span class="comment">// If we did any factoring, start over with the adjusted indices.</span></div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>  <span class="keywordflow">if</span> (!NewIdxs.empty()) {</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0, e = Idxs.size(); i != e; ++i)</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>      <span class="keywordflow">if</span> (!NewIdxs[i]) NewIdxs[i] = cast&lt;Constant&gt;(Idxs[i]);</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a6e02e77c1b0dc7ca8f4cf923311a6a22">ConstantExpr::getGetElementPtr</a>(PointeeTy, C, NewIdxs, InBounds,</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>                                          InRangeIndex);</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>  }</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span> </div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>  <span class="comment">// If all indices are known integers and normalized, we can do a simple</span></div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>  <span class="comment">// check for the &quot;inbounds&quot; property.</span></div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>  <span class="keywordflow">if</span> (!<a class="code hl_enumvalue" href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">Unknown</a> &amp;&amp; !InBounds)</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(C))</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>      <span class="keywordflow">if</span> (!GV-&gt;hasExternalWeakLinkage() &amp;&amp; <a class="code hl_function" href="ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a>(Idxs))</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classllvm_1_1ConstantExpr.html#a6e02e77c1b0dc7ca8f4cf923311a6a22">ConstantExpr::getGetElementPtr</a>(PointeeTy, C, Idxs,</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>                                              <span class="comment">/*InBounds=*/</span><span class="keyword">true</span>, InRangeIndex);</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span> </div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>}</div>
<div class="ttc" id="aCompiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00250">Compiler.h:250</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a08c03a4228af93098afb6ab60e7283f6"><div class="ttname"><a href="ConstantFold_8cpp.html#a08c03a4228af93098afb6ab60e7283f6">foldConstantCastPair</a></div><div class="ttdeci">static unsigned foldConstantCastPair(unsigned opc, ConstantExpr *Op, Type *DstTy)</div><div class="ttdoc">This function determines which opcode to use to fold two constant cast expressions together.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00076">ConstantFold.cpp:76</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a2c5dbef2b409d565ac01ea7cdde4017e"><div class="ttname"><a href="ConstantFold_8cpp.html#a2c5dbef2b409d565ac01ea7cdde4017e">evaluateICmpRelation</a></div><div class="ttdeci">static ICmpInst::Predicate evaluateICmpRelation(Constant *V1, Constant *V2, bool isSigned)</div><div class="ttdoc">This function determines if there is anything we can decide about the two constants provided.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01515">ConstantFold.cpp:1515</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a3dc72eede9512ddb1764276cc197b4cb"><div class="ttname"><a href="ConstantFold_8cpp.html#a3dc72eede9512ddb1764276cc197b4cb">areGlobalsPotentiallyEqual</a></div><div class="ttdeci">static ICmpInst::Predicate areGlobalsPotentiallyEqual(const GlobalValue *GV1, const GlobalValue *GV2)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01479">ConstantFold.cpp:1479</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a492906941b2e0b27b8ef6cc54166103a"><div class="ttname"><a href="ConstantFold_8cpp.html#a492906941b2e0b27b8ef6cc54166103a">evaluateFCmpRelation</a></div><div class="ttdeci">static FCmpInst::Predicate evaluateFCmpRelation(Constant *V1, Constant *V2)</div><div class="ttdoc">This function determines if there is anything we can decide about the two constants provided.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01426">ConstantFold.cpp:1426</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a79061cbffefa2eccfe0d30d1c07eed78"><div class="ttname"><a href="ConstantFold_8cpp.html#a79061cbffefa2eccfe0d30d1c07eed78">FoldBitCast</a></div><div class="ttdeci">static Constant * FoldBitCast(Constant *V, Type *DestTy)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00101">ConstantFold.cpp:101</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a7a5e52baf9c3773c59d6f09ef3bd4641"><div class="ttname"><a href="ConstantFold_8cpp.html#a7a5e52baf9c3773c59d6f09ef3bd4641">IdxCompare</a></div><div class="ttdeci">static int IdxCompare(Constant *C1, Constant *C2, Type *ElTy)</div><div class="ttdoc">Compare the two constants as though they were getelementptr indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01382">ConstantFold.cpp:1382</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a7d3d2d13dc400672038797a6fc50cd09"><div class="ttname"><a href="ConstantFold_8cpp.html#a7d3d2d13dc400672038797a6fc50cd09">isIndexInRangeOfArrayType</a></div><div class="ttdeci">static bool isIndexInRangeOfArrayType(uint64_t NumElements, const ConstantInt *CI)</div><div class="ttdoc">Test whether a given ConstantInt is in-range for a SequentialType.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l02128">ConstantFold.cpp:2128</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a7daa2bbd118fbf9d77a9efb61a2bff39"><div class="ttname"><a href="ConstantFold_8cpp.html#a7daa2bbd118fbf9d77a9efb61a2bff39">isMaybeZeroSizedType</a></div><div class="ttdeci">static bool isMaybeZeroSizedType(Type *Ty)</div><div class="ttdoc">This type is zero-sized if it's an array or structure of zero-sized types.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01360">ConstantFold.cpp:1360</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a83475473710b8f5124ed99c5fea76c7b"><div class="ttname"><a href="ConstantFold_8cpp.html#a83475473710b8f5124ed99c5fea76c7b">getFoldedSizeOf</a></div><div class="ttdeci">static Constant * getFoldedSizeOf(Type *Ty, Type *DestTy, bool Folded)</div><div class="ttdoc">Return a ConstantExpr with type DestTy for sizeof on Ty, with any known factors factored out.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00353">ConstantFold.cpp:353</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_a8bddd6917afd7678549b4c4dce0b5771"><div class="ttname"><a href="ConstantFold_8cpp.html#a8bddd6917afd7678549b4c4dce0b5771">getFoldedAlignOf</a></div><div class="ttdeci">static Constant * getFoldedAlignOf(Type *Ty, Type *DestTy, bool Folded)</div><div class="ttdoc">Return a ConstantExpr with type DestTy for alignof on Ty, with any known factors factored out.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00408">ConstantFold.cpp:408</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_aaf1763d20509172e8577c019ee727ef1"><div class="ttname"><a href="ConstantFold_8cpp.html#aaf1763d20509172e8577c019ee727ef1">isInBoundsIndices</a></div><div class="ttdeci">static bool isInBoundsIndices(ArrayRef&lt; IndexTy &gt; Idxs)</div><div class="ttdoc">Test whether the given sequence of normalized indices is &quot;inbounds&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l02102">ConstantFold.cpp:2102</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_ab12afb6f2b1ebcdfd5bd5609210f4eb7"><div class="ttname"><a href="ConstantFold_8cpp.html#ab12afb6f2b1ebcdfd5bd5609210f4eb7">BitCastConstantVector</a></div><div class="ttdeci">static Constant * BitCastConstantVector(Constant *CV, VectorType *DstTy)</div><div class="ttdoc">Convert the specified vector Constant node to the specified vector type.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00045">ConstantFold.cpp:45</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_ad7ef7500c855e3fc78f43b7766cb9808"><div class="ttname"><a href="ConstantFold_8cpp.html#ad7ef7500c855e3fc78f43b7766cb9808">ExtractConstantBytes</a></div><div class="ttdeci">static Constant * ExtractConstantBytes(Constant *C, unsigned ByteStart, unsigned ByteSize)</div><div class="ttdoc">V is an integer constant which only has a subset of its bytes used.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00212">ConstantFold.cpp:212</a></div></div>
<div class="ttc" id="aConstantFold_8cpp_html_add5a81ce61f160fb6cbc0212d4fd2c4f"><div class="ttname"><a href="ConstantFold_8cpp.html#add5a81ce61f160fb6cbc0212d4fd2c4f">getFoldedOffsetOf</a></div><div class="ttdeci">static Constant * getFoldedOffsetOf(Type *Ty, Constant *FieldNo, Type *DestTy, bool Folded)</div><div class="ttdoc">Return a ConstantExpr with type DestTy for offsetof on Ty and FieldNo, with any known factors factore...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00472">ConstantFold.cpp:472</a></div></div>
<div class="ttc" id="aConstantFold_8h_html"><div class="ttname"><a href="ConstantFold_8h.html">ConstantFold.h</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div><div class="ttdoc">This file contains the declarations for the subclasses of Constant, which represent the different fla...</div></div>
<div class="ttc" id="aDeadArgumentElimination_8cpp_html_a39a491a969849f634027f20be70a5c57"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#a39a491a969849f634027f20be70a5c57">Idx</a></div><div class="ttdeci">Returns the sub type a function will return at a given Idx Should correspond to the result type of an ExtractValue instruction executed with just that one unsigned Idx</div><div class="ttdef"><b>Definition:</b> <a href="DeadArgumentElimination_8cpp_source.html#l00342">DeadArgumentElimination.cpp:342</a></div></div>
<div class="ttc" id="aDeadArgumentElimination_8cpp_html_a8c53890d9af8c2ef767eb119edf7ad76"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#a8c53890d9af8c2ef767eb119edf7ad76">ignored</a></div><div class="ttdeci">SurveyUses This looks at all the uses of the given value Returns the Liveness deduced from the uses of this value Adds all uses that cause the result to be MaybeLive to MaybeLiveRetUses If the result is MaybeLiveUses might be modified but its content should be ignored(since it might not be complete). DeadArgumentEliminationPass</div><div class="ttdef"><b>Definition:</b> <a href="DeadArgumentElimination_8cpp_source.html#l00464">DeadArgumentElimination.cpp:464</a></div></div>
<div class="ttc" id="aDeadArgumentElimination_8cpp_html_aa5bfc84fa71b9e3477e24efecb60fae5"><div class="ttname"><a href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert</a></div><div class="ttdeci">assert(!RetTy-&gt;isVoidTy() &amp;&amp;&quot;void type has no subtype&quot;)</div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aErrorHandling_8h_html"><div class="ttname"><a href="ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="ErrorHandling_8h_source.html#l00135">ErrorHandling.h:135</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aGetElementPtrTypeIterator_8h_html"><div class="ttname"><a href="GetElementPtrTypeIterator_8h.html">GetElementPtrTypeIterator.h</a></div></div>
<div class="ttc" id="aGlobalAlias_8h_html"><div class="ttname"><a href="GlobalAlias_8h.html">GlobalAlias.h</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="aManagedStatic_8h_html"><div class="ttname"><a href="ManagedStatic_8h.html">ManagedStatic.h</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div><div class="ttdoc">Module.h This file contains the declarations for the Module class.</div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aVPlanSLP_8cpp_html_ab9081b5444a1ae65398d4105bc17c51d"><div class="ttname"><a href="VPlanSLP_8cpp.html#ab9081b5444a1ae65398d4105bc17c51d">getOpcode</a></div><div class="ttdeci">static Optional&lt; unsigned &gt; getOpcode(ArrayRef&lt; VPValue * &gt; Values)</div><div class="ttdoc">Returns the opcode of Values or ~0 if they do not all agree.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanSLP_8cpp_source.html#l00196">VPlanSLP.cpp:196</a></div></div>
<div class="ttc" id="aclassSmallVector_html"><div class="ttname"><a href="classSmallVector.html">SmallVector</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="ConstantFolding_8h_source.html#l00024">ConstantFolding.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdoc">Class to represent array types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00403">DerivedTypes.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockAddress_html"><div class="ttname"><a href="classllvm_1_1BlockAddress.html">llvm::BlockAddress</a></div><div class="ttdoc">The address of a basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00839">Constants.h:839</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a06dc25da1f16f389f5244304e8d33127"><div class="ttname"><a href="classllvm_1_1CastInst.html#a06dc25da1f16f389f5244304e8d33127">llvm::CastInst::getCastOpcode</a></div><div class="ttdeci">static Instruction::CastOps getCastOpcode(const Value *Val, bool SrcIsSigned, Type *Ty, bool DstIsSigned)</div><div class="ttdoc">Returns the opcode necessary to cast Val into Ty using usual casting rules.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03084">Instructions.cpp:3084</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a8b805c54dc1ead67b711a4b1cb72f492"><div class="ttname"><a href="classllvm_1_1CastInst.html#a8b805c54dc1ead67b711a4b1cb72f492">llvm::CastInst::isEliminableCastPair</a></div><div class="ttdeci">static unsigned isEliminableCastPair(Instruction::CastOps firstOpcode, Instruction::CastOps secondOpcode, Type *SrcTy, Type *MidTy, Type *DstTy, Type *SrcIntPtrTy, Type *MidIntPtrTy, Type *DstIntPtrTy)</div><div class="ttdoc">Determine how a pair of casts can be eliminated, if they can be at all.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02529">Instructions.cpp:2529</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a283f9a5d4d843d20c40bb4d3e364bb05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a283f9a5d4d843d20c40bb4d3e364bb05">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a3712279d70deeec90a93db09deb12d02"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a3712279d70deeec90a93db09deb12d02">llvm::CmpInst::isSigned</a></div><div class="ttdeci">bool isSigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00902">InstrTypes.h:902</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a5ba8484cef2818d14b85640a903b2598"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a5ba8484cef2818d14b85640a903b2598">llvm::CmpInst::isTrueWhenEqual</a></div><div class="ttdeci">bool isTrueWhenEqual() const</div><div class="ttdoc">This is just a convenience.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00927">InstrTypes.h:927</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00831">InstrTypes.h:831</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aae55ea42185b7528c0c149625b998968"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">llvm::CmpInst::isUnordered</a></div><div class="ttdeci">static bool isUnordered(Predicate predicate)</div><div class="ttdoc">Determine if the predicate is an unordered operation.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03737">Instructions.cpp:3737</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00992">Constants.cpp:992</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataVector_html_a44124e702dc442346bd6202bb03e593b"><div class="ttname"><a href="classllvm_1_1ConstantDataVector.html#a44124e702dc442346bd6202bb03e593b">llvm::ConstantDataVector::getSplat</a></div><div class="ttdeci">static Constant * getSplat(unsigned NumElts, Constant *Elt)</div><div class="ttdoc">Return a ConstantVector with the specified constant in each element.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02628">Constants.cpp:2628</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdoc">A constant value that is initialized with an expression using other constant values.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00888">Constants.h:888</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a01cc837ca9de3995b5b5ebf7585c9f64"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a01cc837ca9de3995b5b5ebf7585c9f64">llvm::ConstantExpr::getSExtOrBitCast</a></div><div class="ttdeci">static Constant * getSExtOrBitCast(Constant *C, Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01584">Constants.cpp:1584</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a023de09b887ba31ec0ebad72aca34419"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a023de09b887ba31ec0ebad72aca34419">llvm::ConstantExpr::getFCmp</a></div><div class="ttdeci">static Constant * getFCmp(unsigned short pred, Constant *LHS, Constant *RHS, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02068">Constants.cpp:2068</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a078455f9a6da73bc84f24700a81d19d7"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a078455f9a6da73bc84f24700a81d19d7">llvm::ConstantExpr::getExtractElement</a></div><div class="ttdeci">static Constant * getExtractElement(Constant *Vec, Constant *Idx, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02093">Constants.cpp:2093</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a0af04c89840d424b7b33ae71d7c8cd28"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a0af04c89840d424b7b33ae71d7c8cd28">llvm::ConstantExpr::getAlignOf</a></div><div class="ttdeci">static Constant * getAlignOf(Type *Ty)</div><div class="ttdoc">getAlignOf constant expr - computes the alignment of a type in a target independent way (Note: the re...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01915">Constants.cpp:1915</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a0fbdc8f9ebcc506b52a9f5c82feb363e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a0fbdc8f9ebcc506b52a9f5c82feb363e">llvm::ConstantExpr::getInBoundsGetElementPtr</a></div><div class="ttdeci">static Constant * getInBoundsGetElementPtr(Type *Ty, Constant *C, ArrayRef&lt; Constant * &gt; IdxList)</div><div class="ttdoc">Create an &quot;inbounds&quot; getelementptr.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01180">Constants.h:1180</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a1f469b1f703519ae25ce564c8704310f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">llvm::ConstantExpr::getPointerCast</a></div><div class="ttdeci">static Constant * getPointerCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast, AddrSpaceCast, or a PtrToInt cast constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01596">Constants.cpp:1596</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a2c9fe4fbe6ac4c180d6d2547c05d33c9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a2c9fe4fbe6ac4c180d6d2547c05d33c9">llvm::ConstantExpr::isCast</a></div><div class="ttdeci">bool isCast() const</div><div class="ttdoc">Return true if this is a convert constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01154">Constants.cpp:1154</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01539">Constants.cpp:1539</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a5553db145ba1df692578ebb8b9d6ac13"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5553db145ba1df692578ebb8b9d6ac13">llvm::ConstantExpr::getSDiv</a></div><div class="ttdeci">static Constant * getSDiv(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02266">Constants.cpp:2266</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a5b43a866f0fca605556f0f69f70c522a"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a5b43a866f0fca605556f0f69f70c522a">llvm::ConstantExpr::getNot</a></div><div class="ttdeci">static Constant * getNot(Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02222">Constants.cpp:2222</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a68fce0638c5ec7b96b8572cad9c20488"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">llvm::ConstantExpr::getICmp</a></div><div class="ttdeci">static Constant * getICmp(unsigned short pred, Constant *LHS, Constant *RHS, bool OnlyIfReduced=false)</div><div class="ttdoc">get* - Return some common constants without having to specify the full Instruction::OPCODE identifier...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02043">Constants.cpp:2043</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a6e02e77c1b0dc7ca8f4cf923311a6a22"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a6e02e77c1b0dc7ca8f4cf923311a6a22">llvm::ConstantExpr::getGetElementPtr</a></div><div class="ttdeci">static Constant * getGetElementPtr(Type *Ty, Constant *C, ArrayRef&lt; Constant * &gt; IdxList, bool InBounds=false, Optional&lt; unsigned &gt; InRangeIndex=None, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdoc">Getelementptr form.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01153">Constants.h:1153</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a778163e6ec80716a12ab3282cb97f0d9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a778163e6ec80716a12ab3282cb97f0d9">llvm::ConstantExpr::getSizeOf</a></div><div class="ttdeci">static Constant * getSizeOf(Type *Ty)</div><div class="ttdoc">getSizeOf constant expr - computes the (alloc) size of a type (in address-units, not bits) in a targe...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01905">Constants.cpp:1905</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a7b6a2ea7a53e50ec693839991fdffac1"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a7b6a2ea7a53e50ec693839991fdffac1">llvm::ConstantExpr::get</a></div><div class="ttdeci">static Constant * get(unsigned Opcode, Constant *C1, unsigned Flags=0, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdoc">get - Return a unary operator constant expression, folding if possible.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01815">Constants.cpp:1815</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a7f8f540a09fa306e1623fbc2f41c32fa"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a7f8f540a09fa306e1623fbc2f41c32fa">llvm::ConstantExpr::getOffsetOf</a></div><div class="ttdeci">static Constant * getOffsetOf(StructType *STy, unsigned FieldNo)</div><div class="ttdoc">getOffsetOf constant expr - computes the offset of a struct field in a target independent way (Note: ...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01928">Constants.cpp:1928</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a864321cef31e718bc327a68dfcfc5ca5"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a864321cef31e718bc327a68dfcfc5ca5">llvm::ConstantExpr::isGEPWithNoNotionalOverIndexing</a></div><div class="ttdeci">bool isGEPWithNoNotionalOverIndexing() const</div><div class="ttdoc">Return true if this is a getelementptr expression and all the index operands are compile-time known i...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01162">Constants.cpp:1162</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a8683922a4b3d122c3b0d7d53b1cde2ad"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a8683922a4b3d122c3b0d7d53b1cde2ad">llvm::ConstantExpr::getSelect</a></div><div class="ttdeci">static Constant * getSelect(Constant *C, Constant *V1, Constant *V2, Type *OnlyIfReducedTy=nullptr)</div><div class="ttdoc">Select constant expr.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01968">Constants.cpp:1968</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a9fe0b1e68f897c642cde7e54184f2f4e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a9fe0b1e68f897c642cde7e54184f2f4e">llvm::ConstantExpr::getXor</a></div><div class="ttdeci">static Constant * getXor(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02295">Constants.cpp:2295</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa342c9b3d47cd9bde63b80c83ead429b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">llvm::ConstantExpr::getSExt</a></div><div class="ttdeci">static Constant * getSExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01660">Constants.cpp:1660</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa3e1005525fe79e631f1fe5bd91fdf3c"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa3e1005525fe79e631f1fe5bd91fdf3c">llvm::ConstantExpr::getMul</a></div><div class="ttdeci">static Constant * getMul(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02250">Constants.cpp:2250</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aab1f107496b17acc1bc5fdcdb2903b38"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aab1f107496b17acc1bc5fdcdb2903b38">llvm::ConstantExpr::getLShr</a></div><div class="ttdeci">static Constant * getLShr(Constant *C1, Constant *C2, bool isExact=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02306">Constants.cpp:2306</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ac8358066036f59f2d0a73b0b9ccf3e0e"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ac8358066036f59f2d0a73b0b9ccf3e0e">llvm::ConstantExpr::getSRem</a></div><div class="ttdeci">static Constant * getSRem(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02279">Constants.cpp:2279</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ad7c657cd513c76f7d328ffdf0fc46f2b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Return the opcode at the root of this constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01209">Constants.h:1209</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_adc8a4e6a8e701e1924f0293da78badb6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#adc8a4e6a8e701e1924f0293da78badb6">llvm::ConstantExpr::getOr</a></div><div class="ttdeci">static Constant * getOr(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02291">Constants.cpp:2291</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6d2fbefb704650e3b01a0bbcdd43ffa"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6d2fbefb704650e3b01a0bbcdd43ffa">llvm::ConstantExpr::getAnd</a></div><div class="ttdeci">static Constant * getAnd(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02287">Constants.cpp:2287</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae6f1c15034bc5515033874630a8ecce6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae6f1c15034bc5515033874630a8ecce6">llvm::ConstantExpr::getAdd</a></div><div class="ttdeci">static Constant * getAdd(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02228">Constants.cpp:2228</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01782">Constants.cpp:1782</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01646">Constants.cpp:1646</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af3c28b1d57df24c21713539354cecfeb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af3c28b1d57df24c21713539354cecfeb">llvm::ConstantExpr::getNUWMul</a></div><div class="ttdeci">static Constant * getNUWMul(Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00996">Constants.h:996</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afe6a25e856a1a63ffff098f05e3f26d2"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afe6a25e856a1a63ffff098f05e3f26d2">llvm::ConstantExpr::getCompare</a></div><div class="ttdeci">static Constant * getCompare(unsigned short pred, Constant *C1, Constant *C2, bool OnlyIfReduced=false)</div><div class="ttdoc">Return an ICmp or FCmp comparison operator constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01946">Constants.cpp:1946</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html"><div class="ttname"><a href="classllvm_1_1ConstantFP.html">llvm::ConstantFP</a></div><div class="ttdoc">ConstantFP - Floating Point Values [float, double].</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00263">Constants.h:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_a5eb8f7a5d3cfdd127ad9db2e425e14eb"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#a5eb8f7a5d3cfdd127ad9db2e425e14eb">llvm::ConstantFP::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, double V)</div><div class="ttdoc">This returns a ConstantFP, or a vector containing a splat of a ConstantFP, for the specified value in...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00694">Constants.cpp:694</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantFP_html_ab21342133676f10340dc3f541b128f24"><div class="ttname"><a href="classllvm_1_1ConstantFP.html#ab21342133676f10340dc3f541b128f24">llvm::ConstantFP::getNaN</a></div><div class="ttdeci">static Constant * getNaN(Type *Ty, bool Negative=false, uint64_t Payload=0)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00735">Constants.cpp:735</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00083">Constants.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a244bfbe5aae876e56cf5e62f0f27867a"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a244bfbe5aae876e56cf5e62f0f27867a">llvm::ConstantInt::isOne</a></div><div class="ttdeci">bool isOne() const</div><div class="ttdoc">This is just a convenience method to make client code smaller for a common case.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00200">Constants.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00587">Constants.cpp:587</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a9105541412dab869e18b3cceebfff07d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a9105541412dab869e18b3cceebfff07d">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool isSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00631">Constants.cpp:631</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00594">Constants.cpp:594</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa8f4be0661aa64f5b1f20b15e93bb403"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa8f4be0661aa64f5b1f20b15e93bb403">llvm::ConstantInt::getSExtValue</a></div><div class="ttdeci">int64_t getSExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit integer value after it has been sign extended as appropriate for the ...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00156">Constants.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00148">Constants.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_af7e1934ed72a405ef073ea5f9bbe828e"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af7e1934ed72a405ef073ea5f9bbe828e">llvm::ConstantInt::getValue</a></div><div class="ttdeci">const APInt &amp; getValue() const</div><div class="ttdoc">Return the constant as an APInt value reference.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00137">Constants.h:137</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_af960078a0675d00168bf95bf31d90f1d"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#af960078a0675d00168bf95bf31d90f1d">llvm::ConstantInt::uge</a></div><div class="ttdeci">bool uge(uint64_t Num) const</div><div class="ttdoc">This function will return true iff this constant represents a value with active bits bigger than 64 b...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00241">Constants.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantPointerNull_html_a96f5c85e4022e369266541b2db3fda69"><div class="ttname"><a href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">llvm::ConstantPointerNull::get</a></div><div class="ttdeci">static ConstantPointerNull * get(PointerType *T)</div><div class="ttdoc">Static factory methods - Return objects of the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01410">Constants.cpp:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01053">Constants.cpp:1053</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html"><div class="ttname"><a href="classllvm_1_1ConstantVector.html">llvm::ConstantVector</a></div><div class="ttdoc">Constant Vector Declarations.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00499">Constants.h:499</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html_a5ce0c10fc8f570a6411da209203a1c6e"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#a5ce0c10fc8f570a6411da209203a1c6e">llvm::ConstantVector::getSplat</a></div><div class="ttdeci">static Constant * getSplat(unsigned NumElts, Constant *Elt)</div><div class="ttdoc">Return a ConstantVector with the specified constant in each element.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01128">Constants.cpp:1128</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantVector_html_ade9fa017ca3aa82f7694a47090547bc1"><div class="ttname"><a href="classllvm_1_1ConstantVector.html#ade9fa017ca3aa82f7694a47090547bc1">llvm::ConstantVector::get</a></div><div class="ttdeci">static Constant * get(ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01088">Constants.cpp:1088</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00328">Constants.cpp:328</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a662be1e66a5af621d46fa1c7a8aa1004"><div class="ttname"><a href="classllvm_1_1Constant.html#a662be1e66a5af621d46fa1c7a8aa1004">llvm::Constant::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getAllOnesValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00099">Constants.cpp:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00274">Constants.cpp:274</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_acd530d0571f320d47d37e7ae51cf70ff"><div class="ttname"><a href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const</div><div class="ttdoc">For aggregates (struct/array/vector) return the constant that corresponds to the specified element if...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00344">Constants.cpp:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_ae4b6abe77abf42fb02081a6cc41a0132"><div class="ttname"><a href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00084">Constants.cpp:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstrainedFPIntrinsic_html_a124a7ba94a9d861855ead7918d71bf2fa56c0615d7e5bafd4ccf91d36419963be"><div class="ttname"><a href="classllvm_1_1ConstrainedFPIntrinsic.html#a124a7ba94a9d861855ead7918d71bf2fa56c0615d7e5bafd4ccf91d36419963be">llvm::ConstrainedFPIntrinsic::rmTowardZero</a></div><div class="ttdeci">@ rmTowardZero</div><div class="ttdoc">This corresponds to &quot;fpround.tozero&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00220">IntrinsicInst.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html"><div class="ttname"><a href="classllvm_1_1GEPOperator.html">llvm::GEPOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00440">Operator.h:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a58518ce0fd3570c7bfce00aa2df58e42"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a58518ce0fd3570c7bfce00aa2df58e42">llvm::GEPOperator::getSourceElementType</a></div><div class="ttdeci">Type * getSourceElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8cpp_source.html#l00022">Operator.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1GEPOperator_html_a608bf9c26922fc798bc8bd85601ce94d"><div class="ttname"><a href="classllvm_1_1GEPOperator.html#a608bf9c26922fc798bc8bd85601ce94d">llvm::GEPOperator::hasAllZeroIndices</a></div><div class="ttdeci">bool hasAllZeroIndices() const</div><div class="ttdoc">Return true if all of the indices of this GEP are zeros.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00507">Operator.h:507</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a131bb2ad08caba3a193dd8e1d862d704"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a131bb2ad08caba3a193dd8e1d862d704">llvm::GetElementPtrInst::getGEPReturnType</a></div><div class="ttdeci">static Type * getGEPReturnType(Value *Ptr, ArrayRef&lt; Value * &gt; IdxList)</div><div class="ttdoc">Returns the pointer type returned by the GEP instruction, which may be a vector of pointers.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01036">Instructions.h:1036</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a99d4bfe49182f8d80abb1960f2c12d46"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a99d4bfe49182f8d80abb1960f2c12d46">llvm::GetElementPtrInst::getIndexedType</a></div><div class="ttdeci">static Type * getIndexedType(Type *Ty, ArrayRef&lt; Value * &gt; IdxList)</div><div class="ttdoc">Returns the type of the element that would be loaded with a load instruction with the specified param...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01647">Instructions.cpp:1647</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a0da0b64b3dee6312497f8a2933dd0346"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a0da0b64b3dee6312497f8a2933dd0346">llvm::GlobalValue::getAlignment</a></div><div class="ttdeci">unsigned getAlignment() const</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00097">Globals.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a739b30c811f1eece61b05320ddf44e5b"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a739b30c811f1eece61b05320ddf44e5b">llvm::GlobalValue::getParent</a></div><div class="ttdeci">Module * getParent()</div><div class="ttdoc">Get the module that this global value is contained inside of...</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00575">GlobalValue.h:575</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_aaaeded5d0cab77f531b294638459aca5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01241">Instructions.h:1241</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a1fb6e8365dbf4ef3a7426ff3d531ff87"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a1fb6e8365dbf4ef3a7426ff3d531ff87">llvm::IRBuilderBase::getInt1Ty</a></div><div class="ttdeci">IntegerType * getInt1Ty()</div><div class="ttdoc">Fetch the type representing a single bit.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00368">IRBuilder.h:368</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a31e2db8d1b315202d2c19e711b5365fd"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a31e2db8d1b315202d2c19e711b5365fd">llvm::IRBuilderBase::getIntNTy</a></div><div class="ttdeci">IntegerType * getIntNTy(unsigned N)</div><div class="ttdoc">Fetch the type representing an N-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00396">IRBuilder.h:396</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a5852dc0d180581d34902e8abcbf7e930"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a5852dc0d180581d34902e8abcbf7e930">llvm::IRBuilderBase::getInt32Ty</a></div><div class="ttdeci">IntegerType * getInt32Ty()</div><div class="ttdoc">Fetch the type representing a 32-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00383">IRBuilder.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a64748b5a9f8d8dd4499f84312e2c1336"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a64748b5a9f8d8dd4499f84312e2c1336">llvm::IRBuilderBase::getInt64Ty</a></div><div class="ttdeci">IntegerType * getInt64Ty()</div><div class="ttdoc">Fetch the type representing a 64-bit integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00388">IRBuilder.h:388</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4f0027b9d05b27206b1882976fce9038"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4f0027b9d05b27206b1882976fce9038">llvm::Instruction::isAssociative</a></div><div class="ttdeci">bool isAssociative() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is associative:</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8cpp_source.html#l00629">Instruction.cpp:629</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5c88132322ca3f46f242f7c023a57010"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5c88132322ca3f46f242f7c023a57010">llvm::Instruction::isBinaryOp</a></div><div class="ttdeci">bool isBinaryOp() const</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00130">Instruction.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ac26154a24f393f523c87cc5f8239f36c"><div class="ttname"><a href="classllvm_1_1Instruction.html#ac26154a24f393f523c87cc5f8239f36c">llvm::Instruction::BinaryOps</a></div><div class="ttdeci">BinaryOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00694">Instruction.h:694</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6249022aded13ad98775c11881bc117"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6249022aded13ad98775c11881bc117">llvm::Instruction::isUnaryOp</a></div><div class="ttdeci">bool isUnaryOp() const</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00129">Instruction.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af8c91b2564a9869a1f393c766e39bc8c"><div class="ttname"><a href="classllvm_1_1Instruction.html#af8c91b2564a9869a1f393c766e39bc8c">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const</div><div class="ttdoc">Return true if the instruction is commutative:</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00488">Instruction.h:488</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af9c2825ab53adf1bf8c9fa19ec89d986"><div class="ttname"><a href="classllvm_1_1Instruction.html#af9c2825ab53adf1bf8c9fa19ec89d986">llvm::Instruction::isIntDivRem</a></div><div class="ttdeci">bool isIntDivRem() const</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00131">Instruction.h:131</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af9f57a32b08304fea642871735717f24"><div class="ttname"><a href="classllvm_1_1Instruction.html#af9f57a32b08304fea642871735717f24">llvm::Instruction::UnaryOps</a></div><div class="ttdeci">UnaryOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00687">Instruction.h:687</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="Instruction_8h_source.html#l00708">Instruction.h:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00239">Type.cpp:239</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00054">Function.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00544">DerivedTypes.h:544</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a050a395d1656e546679d8b144d951bb2"><div class="ttname"><a href="classllvm_1_1PointerType.html#a050a395d1656e546679d8b144d951bb2">llvm::PointerType::get</a></div><div class="ttdeci">static PointerType * get(Type *ElementType, unsigned AddressSpace)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in a numbered address space.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00632">Type.cpp:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a5311952ad929bb3854278f7549bfc73f"><div class="ttname"><a href="classllvm_1_1PointerType.html#a5311952ad929bb3854278f7549bfc73f">llvm::PointerType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00563">DerivedTypes.h:563</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_af8aeced5e71d2589fa3e9791043af5cb"><div class="ttname"><a href="classllvm_1_1PointerType.html#af8aeced5e71d2589fa3e9791043af5cb">llvm::PointerType::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdoc">Return the address space of the Pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00572">DerivedTypes.h:572</a></div></div>
<div class="ttc" id="aclassllvm_1_1Registry_1_1Add_html"><div class="ttname"><a href="classllvm_1_1Registry_1_1Add.html">llvm::Registry::Add</a></div><div class="ttdoc">A static registration template.</div><div class="ttdef"><b>Definition:</b> <a href="Registry_8h_source.html#l00114">Registry.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1SequentialType_html"><div class="ttname"><a href="classllvm_1_1SequentialType.html">llvm::SequentialType</a></div><div class="ttdoc">This is the superclass of the array and vector type classes.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00375">DerivedTypes.h:375</a></div></div>
<div class="ttc" id="aclassllvm_1_1SequentialType_html_a4412918dc9c2ccb6de632fbf82ab3964"><div class="ttname"><a href="classllvm_1_1SequentialType.html#a4412918dc9c2ccb6de632fbf82ab3964">llvm::SequentialType::getElementType</a></div><div class="ttdeci">Type * getElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00394">DerivedTypes.h:394</a></div></div>
<div class="ttc" id="aclassllvm_1_1SequentialType_html_ad165a36624f4374d6ea5238eaeff80b6"><div class="ttname"><a href="classllvm_1_1SequentialType.html#ad165a36624f4374d6ea5238eaeff80b6">llvm::SequentialType::getNumElements</a></div><div class="ttdeci">uint64_t getNumElements() const</div><div class="ttdoc">For scalable vectors, this will return the minimum number of elements in the vector.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00393">DerivedTypes.h:393</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html_af2dbb39599d0440e5a70c6957c66b729"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html#af2dbb39599d0440e5a70c6957c66b729">llvm::ShuffleVectorInst::getMaskValue</a></div><div class="ttdeci">static int getMaskValue(const Constant *Mask, unsigned Elt)</div><div class="ttdoc">Return the shuffle mask value for the specified element of the mask.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l01889">Instructions.cpp:1889</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdoc">Class to represent struct types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00233">DerivedTypes.h:233</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a0f5c23d3b941362c2fa195f4c0b99683"><div class="ttname"><a href="classllvm_1_1Type.html#a0f5c23d3b941362c2fa195f4c0b99683">llvm::Type::isEmptyTy</a></div><div class="ttdeci">bool isEmptyTy() const</div><div class="ttdoc">Return true if this type is empty, that is, it has no elements or all of its elements are empty.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00097">Type.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00097">DerivedTypes.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a187de29e4101f5b579437d573ec2efa1"><div class="ttname"><a href="classllvm_1_1Type.html#a187de29e4101f5b579437d573ec2efa1">llvm::Type::getFltSemantics</a></div><div class="ttdeci">const fltSemantics &amp; getFltSemantics() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00168">Type.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00229">Type.h:229</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1f68c27188f1836737bf22a62c558354"><div class="ttname"><a href="classllvm_1_1Type.html#a1f68c27188f1836737bf22a62c558354">llvm::Type::isX86_FP80Ty</a></div><div class="ttdeci">bool isX86_FP80Ty() const</div><div class="ttdoc">Return true if this is x86 long double.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00152">Type.h:152</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a2a394517076e7dd2bdcd7dde33dfcb7d"><div class="ttname"><a href="classllvm_1_1Type.html#a2a394517076e7dd2bdcd7dde33dfcb7d">llvm::Type::isArrayTy</a></div><div class="ttdeci">bool isArrayTy() const</div><div class="ttdoc">True if this is an instance of ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00220">Type.h:220</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00202">Type.h:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3ffc75c3a4cb82ba307a3334483eb4ac"><div class="ttname"><a href="classllvm_1_1Type.html#a3ffc75c3a4cb82ba307a3334483eb4ac">llvm::Type::isFloatTy</a></div><div class="ttdeci">bool isFloatTy() const</div><div class="ttdoc">Return true if this is 'float', a 32-bit IEEE fp type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00146">Type.h:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a45ab60bea070f0c0f5eab7a69df5a5c9"><div class="ttname"><a href="classllvm_1_1Type.html#a45ab60bea070f0c0f5eab7a69df5a5c9">llvm::Type::getVectorElementType</a></div><div class="ttdeci">Type * getVectorElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00371">Type.h:371</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a59f8ff5f972666376282d626e8197d59"><div class="ttname"><a href="classllvm_1_1Type.html#a59f8ff5f972666376282d626e8197d59">llvm::Type::getVectorNumElements</a></div><div class="ttdeci">unsigned getVectorNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00535">DerivedTypes.h:535</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a62cbe7441d9ebcac7e1a216bbf696550"><div class="ttname"><a href="classllvm_1_1Type.html#a62cbe7441d9ebcac7e1a216bbf696550">llvm::Type::isX86_MMXTy</a></div><div class="ttdeci">bool isX86_MMXTy() const</div><div class="ttdoc">Return true if this is X86 MMX.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00181">Type.h:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a670980c63f2e5ca39022baf96173eb9c"><div class="ttname"><a href="classllvm_1_1Type.html#a670980c63f2e5ca39022baf96173eb9c">llvm::Type::isPPC_FP128Ty</a></div><div class="ttdeci">bool isPPC_FP128Ty() const</div><div class="ttdoc">Return true if this is powerpc long double.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00158">Type.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a6f174fc924aa9cccf2abce5ef4b5ec9a"><div class="ttname"><a href="classllvm_1_1Type.html#a6f174fc924aa9cccf2abce5ef4b5ec9a">llvm::Type::isFP128Ty</a></div><div class="ttdeci">bool isFP128Ty() const</div><div class="ttdoc">Return true if this is 'fp128'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00155">Type.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a81eef9d7336f7ee43be79630d8e8ec86"><div class="ttname"><a href="classllvm_1_1Type.html#a81eef9d7336f7ee43be79630d8e8ec86">llvm::Type::isStructTy</a></div><div class="ttdeci">bool isStructTy() const</div><div class="ttdoc">True if this is an instance of StructType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00217">Type.h:217</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a82a7e98c00f5bb12e2c5481fe0ab3f1a"><div class="ttname"><a href="classllvm_1_1Type.html#a82a7e98c00f5bb12e2c5481fe0ab3f1a">llvm::Type::isFirstClassType</a></div><div class="ttdeci">bool isFirstClassType() const</div><div class="ttdoc">Return true if the type is &quot;first class&quot;, meaning it is a valid type for a Value.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00243">Type.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00264">Type.h:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8cf1f36cc41c466e66d6467e40554841"><div class="ttname"><a href="classllvm_1_1Type.html#a8cf1f36cc41c466e66d6467e40554841">llvm::Type::isHalfTy</a></div><div class="ttdeci">bool isHalfTy() const</div><div class="ttdoc">Return true if this is 'half', a 16-bit IEEE fp type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00143">Type.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8e4886a44b20221b0f2262346d9bcbe3"><div class="ttname"><a href="classllvm_1_1Type.html#a8e4886a44b20221b0f2262346d9bcbe3">llvm::Type::getPrimitiveSizeInBits</a></div><div class="ttdeci">unsigned getPrimitiveSizeInBits() const LLVM_READONLY</div><div class="ttdoc">Return the basic size of this type if it is a primitive type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00114">Type.cpp:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a909eca4ba9e5eefc203c8e3770bdab25"><div class="ttname"><a href="classllvm_1_1Type.html#a909eca4ba9e5eefc203c8e3770bdab25">llvm::Type::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Return the LLVMContext in which this type was uniqued.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00129">Type.h:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00129">Type.cpp:129</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa0fd6bf3d33236279db7b707bba755f4"><div class="ttname"><a href="classllvm_1_1Type.html#aa0fd6bf3d33236279db7b707bba755f4">llvm::Type::isDoubleTy</a></div><div class="ttdeci">bool isDoubleTy() const</div><div class="ttdoc">Return true if this is 'double', a 64-bit IEEE fp type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00149">Type.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the six floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00161">Type.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_abf313eff420b7c6c8e322a2e9c53cd90"><div class="ttname"><a href="classllvm_1_1Type.html#abf313eff420b7c6c8e322a2e9c53cd90">llvm::Type::isIntOrPtrTy</a></div><div class="ttdeci">bool isIntOrPtrTy() const</div><div class="ttdoc">Return true if this is an integer type or a pointer type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00211">Type.h:211</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00196">Type.h:196</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad0709baa705ae62c4e09cdd47fb4b420"><div class="ttname"><a href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">llvm::Type::isFPOrFPVectorTy</a></div><div class="ttdeci">bool isFPOrFPVectorTy() const</div><div class="ttdoc">Return true if this is a FP type or a vector of FP.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00184">Type.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_af60c6120dbc5acdfcff9a7621d123796"><div class="ttname"><a href="classllvm_1_1Type.html#af60c6120dbc5acdfcff9a7621d123796">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00303">Type.h:303</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01424">Constants.cpp:1424</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_aa0a2cb1582d1cec317bd205085469ca1"><div class="ttname"><a href="classllvm_1_1User.html#aa0a2cb1582d1cec317bd205085469ca1">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00072">Value.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a0344a49526443edf90cc0aef3abd3337"><div class="ttname"><a href="classllvm_1_1Value.html#a0344a49526443edf90cc0aef3abd3337">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00244">Value.h:244</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00732">Value.cpp:732</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ac3ed98333b14efcb6d907122d0e45361"><div class="ttname"><a href="classllvm_1_1Value.html#ac3ed98333b14efcb6d907122d0e45361">llvm::Value::getPointerAlignment</a></div><div class="ttdeci">unsigned getPointerAlignment(const DataLayout &amp;DL) const</div><div class="ttdoc">Returns an alignment of the pointer value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00669">Value.cpp:669</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html"><div class="ttname"><a href="classllvm_1_1VectorType.html">llvm::VectorType</a></div><div class="ttdoc">Class to represent vector types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00427">DerivedTypes.h:427</a></div></div>
<div class="ttc" id="aclassllvm_1_1VectorType_html_a8c90e6c50e795b17466482a04947690e"><div class="ttname"><a href="classllvm_1_1VectorType.html#a8c90e6c50e795b17466482a04947690e">llvm::VectorType::get</a></div><div class="ttdeci">static VectorType * get(Type *ElementType, ElementCount EC)</div><div class="ttdoc">This static method is the primary way to construct an VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00609">Type.cpp:609</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html">llvm::generic_gep_type_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00031">GetElementPtrTypeIterator.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_a48cf1b8139cae1d146beb7e0f73c0817"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#a48cf1b8139cae1d146beb7e0f73c0817">llvm::generic_gep_type_iterator::isSequential</a></div><div class="ttdeci">bool isSequential() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00107">GetElementPtrTypeIterator.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_aaa6db68bda45ffb5d095cdf6e3e1d102"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#aaa6db68bda45ffb5d095cdf6e3e1d102">llvm::generic_gep_type_iterator::getSequentialNumElements</a></div><div class="ttdeci">uint64_t getSequentialNumElements() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00119">GetElementPtrTypeIterator.h:119</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_af429d12fd67c390e17272e9b16ce9186"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#af429d12fd67c390e17272e9b16ce9186">llvm::generic_gep_type_iterator::getIndexedType</a></div><div class="ttdeci">Type * getIndexedType() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00068">GetElementPtrTypeIterator.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1generic__gep__type__iterator_html_af5d0717c324693b5350c48a9c4152152"><div class="ttname"><a href="classllvm_1_1generic__gep__type__iterator.html#af5d0717c324693b5350c48a9c4152152">llvm::generic_gep_type_iterator::isBoundedSequential</a></div><div class="ttdeci">bool isBoundedSequential() const</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00115">GetElementPtrTypeIterator.h:115</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00045">PatternMatch.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3b3d2d8c64a7881acb82bc7467569aa9"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3b3d2d8c64a7881acb82bc7467569aa9">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00354">PatternMatch.h:354</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a4e02c4bdba12dcc7d4ec44f513203f1e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4e02c4bdba12dcc7d4ec44f513203f1e">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">class_match&lt; UndefValue &gt; m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00086">PatternMatch.h:86</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00175">PatternMatch.h:175</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00375">PatternMatch.h:375</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This class represents lattice values for constants.</div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00056">AliasAnalysis.h:56</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10d499eb3a0f30658bfee30721184015"><div class="ttname"><a href="namespacellvm.html#a10d499eb3a0f30658bfee30721184015">llvm::ConstantFoldCompareInstruction</a></div><div class="ttdeci">Constant * ConstantFoldCompareInstruction(unsigned short predicate, Constant *C1, Constant *C2)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l01765">ConstantFold.cpp:1765</a></div></div>
<div class="ttc" id="anamespacellvm_html_a11c89e0918b007ef2cf1d6b03c4b4948"><div class="ttname"><a href="namespacellvm.html#a11c89e0918b007ef2cf1d6b03c4b4948">llvm::ConstantFoldSelectInstruction</a></div><div class="ttdeci">Constant * ConstantFoldSelectInstruction(Constant *Cond, Constant *V1, Constant *V2)</div><div class="ttdoc">Attempt to constant fold a select instruction with the specified operands.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00733">ConstantFold.cpp:733</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c4fe17695dd008139cd08a7d460744e"><div class="ttname"><a href="namespacellvm.html#a2c4fe17695dd008139cd08a7d460744e">llvm::ConstantFoldUnaryInstruction</a></div><div class="ttdeci">Constant * ConstantFoldUnaryInstruction(unsigned Opcode, Constant *V)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00921">ConstantFold.cpp:921</a></div></div>
<div class="ttc" id="anamespacellvm_html_a43c6ebb4fd35ebd815d66a2df4eed0b9"><div class="ttname"><a href="namespacellvm.html#a43c6ebb4fd35ebd815d66a2df4eed0b9">llvm::gep_type_end</a></div><div class="ttdeci">gep_type_iterator gep_type_end(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00134">GetElementPtrTypeIterator.h:134</a></div></div>
<div class="ttc" id="anamespacellvm_html_a557be4c1daf6eb2611b214f927dccee2"><div class="ttname"><a href="namespacellvm.html#a557be4c1daf6eb2611b214f927dccee2">llvm::ConstantFoldExtractValueInstruction</a></div><div class="ttdeci">Constant * ConstantFoldExtractValueInstruction(Constant *Agg, ArrayRef&lt; unsigned &gt; Idxs)</div><div class="ttdoc">Attempt to constant fold an extractvalue instruction with the specified operands and indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00878">ConstantFold.cpp:878</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e"><div class="ttname"><a href="namespacellvm.html#a5d56157a385f8cd7d3e54ed87da1ba6aa88183b946cc5f0e8c96b2e66e1c74a7e">llvm::EHPersonality::Unknown</a></div><div class="ttdeci">@ Unknown</div></div>
<div class="ttc" id="anamespacellvm_html_a646986783f35e0fef8988f0f28d2589f"><div class="ttname"><a href="namespacellvm.html#a646986783f35e0fef8988f0f28d2589f">llvm::Log2_32</a></div><div class="ttdeci">unsigned Log2_32(uint32_t Value)</div><div class="ttdoc">Return the floor log base 2 of the specified value, -1 if the value is zero.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00538">MathExtras.h:538</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b03ed78a8e299bde6d26a8793cd4e06"><div class="ttname"><a href="namespacellvm.html#a7b03ed78a8e299bde6d26a8793cd4e06">llvm::NullPointerIsDefined</a></div><div class="ttdeci">bool NullPointerIsDefined(const Function *F, unsigned AS=0)</div><div class="ttdoc">Check whether null pointer dereferencing is considered undefined behavior for a given function or an ...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01523">Function.cpp:1523</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7bf95d0980fad19452f4c9aca445af3f"><div class="ttname"><a href="namespacellvm.html#a7bf95d0980fad19452f4c9aca445af3f">llvm::ConstantFoldInsertElementInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInsertElementInstruction(Constant *Val, Constant *Elt, Constant *Idx)</div><div class="ttdoc">Attempt to constant fold an insertelement instruction with the specified operands and indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00807">ConstantFold.cpp:807</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8641b83b0434a1b90b70b130de703953"><div class="ttname"><a href="namespacellvm.html#a8641b83b0434a1b90b70b130de703953">llvm::ConstantFoldShuffleVectorInstruction</a></div><div class="ttdeci">Constant * ConstantFoldShuffleVectorInstruction(Constant *V1, Constant *V2, Constant *Mask)</div><div class="ttdoc">Attempt to constant fold a shufflevector instruction with the specified operands and indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00837">ConstantFold.cpp:837</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9f6c692bb79cca65ae3097ddd4c47e69"><div class="ttname"><a href="namespacellvm.html#a9f6c692bb79cca65ae3097ddd4c47e69">llvm::ConstantFoldExtractElementInstruction</a></div><div class="ttdeci">Constant * ConstantFoldExtractElementInstruction(Constant *Val, Constant *Idx)</div><div class="ttdoc">Attempt to constant fold an extractelement instruction with the specified operands and indices.</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00788">ConstantFold.cpp:788</a></div></div>
<div class="ttc" id="anamespacellvm_html_aad87d874f7944b5838f7881938d18870a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm.html#aad87d874f7944b5838f7881938d18870a6adf97f83acf6453d4a6a4b1070f3754">llvm::DINameKind::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespacellvm_html_ac828b9b52935f87659a4adf237f820a3"><div class="ttname"><a href="namespacellvm.html#ac828b9b52935f87659a4adf237f820a3">llvm::gep_type_begin</a></div><div class="ttdeci">gep_type_iterator gep_type_begin(const User *GEP)</div><div class="ttdef"><b>Definition:</b> <a href="GetElementPtrTypeIterator_8h_source.html#l00127">GetElementPtrTypeIterator.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad797efb6c6fbbb2038d5ed8f8379561f"><div class="ttname"><a href="namespacellvm.html#ad797efb6c6fbbb2038d5ed8f8379561f">llvm::ConstantFoldCastInstruction</a></div><div class="ttdeci">Constant * ConstantFoldCastInstruction(unsigned opcode, Constant *V, Type *DestTy)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00521">ConstantFold.cpp:521</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad7fa9b738742521d0a684cec016ef47e"><div class="ttname"><a href="namespacellvm.html#ad7fa9b738742521d0a684cec016ef47e">llvm::ConstantFoldInsertValueInstruction</a></div><div class="ttdeci">Constant * ConstantFoldInsertValueInstruction(Constant *Agg, Constant *Val, ArrayRef&lt; unsigned &gt; Idxs)</div><div class="ttdoc">ConstantFoldInsertValueInstruction - Attempt to constant fold an insertvalue instruction with the spe...</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00890">ConstantFold.cpp:890</a></div></div>
<div class="ttc" id="anamespacellvm_html_af3ac463ee03838850d4c1253d9a4eb14"><div class="ttname"><a href="namespacellvm.html#af3ac463ee03838850d4c1253d9a4eb14">llvm::ConstantFoldGetElementPtr</a></div><div class="ttdeci">Constant * ConstantFoldGetElementPtr(Type *Ty, Constant *C, bool InBounds, Optional&lt; unsigned &gt; InRangeIndex, ArrayRef&lt; Value * &gt; Idxs)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l02144">ConstantFold.cpp:2144</a></div></div>
<div class="ttc" id="anamespacellvm_html_af6674e64f01f197cffff55abcc6d2050"><div class="ttname"><a href="namespacellvm.html#af6674e64f01f197cffff55abcc6d2050">llvm::ConstantFoldBinaryInstruction</a></div><div class="ttdeci">Constant * ConstantFoldBinaryInstruction(unsigned Opcode, Constant *V1, Constant *V2)</div><div class="ttdef"><b>Definition:</b> <a href="ConstantFold_8cpp_source.html#l00967">ConstantFold.cpp:967</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 13 2022 12:56:23 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
