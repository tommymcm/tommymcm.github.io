<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/IPO/SampleProfile.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_13abb262e9c52ddea8d07639819afd6c.html">IPO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">SampleProfile.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;llvm/Transforms/IPO/SampleProfile.h&quot;</code><br />
<code>#include &quot;llvm/ADT/ArrayRef.h&quot;</code><br />
<code>#include &quot;llvm/ADT/DenseMap.h&quot;</code><br />
<code>#include &quot;llvm/ADT/DenseSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/None.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallPtrSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallSet.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallVector.h&quot;</code><br />
<code>#include &quot;llvm/ADT/StringMap.h&quot;</code><br />
<code>#include &quot;llvm/ADT/StringRef.h&quot;</code><br />
<code>#include &quot;llvm/ADT/Twine.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/AssumptionCache.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/InlineCost.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/LoopInfo.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/OptimizationRemarkEmitter.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/PostDominators.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/ProfileSummaryInfo.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/TargetTransformInfo.h&quot;</code><br />
<code>#include &quot;llvm/IR/BasicBlock.h&quot;</code><br />
<code>#include &quot;llvm/IR/CFG.h&quot;</code><br />
<code>#include &quot;llvm/IR/CallSite.h&quot;</code><br />
<code>#include &quot;llvm/IR/DebugInfoMetadata.h&quot;</code><br />
<code>#include &quot;llvm/IR/DebugLoc.h&quot;</code><br />
<code>#include &quot;llvm/IR/DiagnosticInfo.h&quot;</code><br />
<code>#include &quot;llvm/IR/Dominators.h&quot;</code><br />
<code>#include &quot;llvm/IR/Function.h&quot;</code><br />
<code>#include &quot;llvm/IR/GlobalValue.h&quot;</code><br />
<code>#include &quot;llvm/IR/InstrTypes.h&quot;</code><br />
<code>#include &quot;llvm/IR/Instruction.h&quot;</code><br />
<code>#include &quot;llvm/IR/Instructions.h&quot;</code><br />
<code>#include &quot;llvm/IR/IntrinsicInst.h&quot;</code><br />
<code>#include &quot;llvm/IR/LLVMContext.h&quot;</code><br />
<code>#include &quot;llvm/IR/MDBuilder.h&quot;</code><br />
<code>#include &quot;llvm/IR/Module.h&quot;</code><br />
<code>#include &quot;llvm/IR/PassManager.h&quot;</code><br />
<code>#include &quot;llvm/IR/ValueSymbolTable.h&quot;</code><br />
<code>#include &quot;llvm/Pass.h&quot;</code><br />
<code>#include &quot;llvm/ProfileData/InstrProf.h&quot;</code><br />
<code>#include &quot;llvm/ProfileData/SampleProf.h&quot;</code><br />
<code>#include &quot;llvm/ProfileData/SampleProfReader.h&quot;</code><br />
<code>#include &quot;llvm/Support/Casting.h&quot;</code><br />
<code>#include &quot;llvm/Support/CommandLine.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &quot;llvm/Support/ErrorHandling.h&quot;</code><br />
<code>#include &quot;llvm/Support/ErrorOr.h&quot;</code><br />
<code>#include &quot;llvm/Support/GenericDomTree.h&quot;</code><br />
<code>#include &quot;llvm/Support/raw_ostream.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/IPO.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Instrumentation.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/CallPromotionUtils.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/Cloning.h&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;cstdint&gt;</code><br />
<code>#include &lt;functional&gt;</code><br />
<code>#include &lt;limits&gt;</code><br />
<code>#include &lt;map&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;system_error&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
</div>
<p><a href="SampleProfile_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;sample-profile&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac57dae906fe8ac64efe52571121b0fe1"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">ProfileCount</a> = Function::ProfileCount</td></tr>
<tr class="separator:ac57dae906fe8ac64efe52571121b0fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7135fad79ba2e726ee26114e1486f0ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a7135fad79ba2e726ee26114e1486f0ef">SampleProfileFile</a> (&quot;sample-profile-file&quot;, cl::init(&quot;&quot;), cl::value_desc(&quot;filename&quot;), cl::desc(&quot;Profile <a class="el" href="RegionPrinter_8cpp.html#a79dce2d3eafaf25bf0df59f56caf9712">file</a> loaded by -sample-profile&quot;), cl::Hidden)</td></tr>
<tr class="separator:a7135fad79ba2e726ee26114e1486f0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b2da3a873ff05c43502e3c2df2b041e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a6b2da3a873ff05c43502e3c2df2b041e">SampleProfileRemappingFile</a> (&quot;sample-profile-remapping-file&quot;, cl::init(&quot;&quot;), cl::value_desc(&quot;filename&quot;), cl::desc(&quot;Profile remapping <a class="el" href="RegionPrinter_8cpp.html#a79dce2d3eafaf25bf0df59f56caf9712">file</a> loaded by -sample-profile&quot;), cl::Hidden)</td></tr>
<tr class="separator:a6b2da3a873ff05c43502e3c2df2b041e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ffc950f9047cbec66a4f62dc27a2b0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#aa2ffc950f9047cbec66a4f62dc27a2b0">SampleProfileMaxPropagateIterations</a> (&quot;sample-profile-max-<a class="el" href="CFLAndersAliasAnalysis_8cpp.html#a94abfb8f8f0716f9a5bdc2ffae3750e9">propagate</a>-iterations&quot;, cl::init(100), cl::desc(&quot;Maximum number of iterations to go through when propagating &quot; &quot;sample block/edge weights through the CFG.&quot;))</td></tr>
<tr class="separator:aa2ffc950f9047cbec66a4f62dc27a2b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70f54f6917fc126d36fdfe79929e4e07"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a70f54f6917fc126d36fdfe79929e4e07">SampleProfileRecordCoverage</a> (&quot;sample-profile-check-record-coverage&quot;, cl::init(0), cl::value_desc(&quot;N&quot;), cl::desc(&quot;Emit a <a class="el" href="WarnMissedTransforms_8cpp.html#a9f5bae15f5e9c975fac665ccc3c43790">warning</a> <a class="el" href="DeadArgumentElimination_8cpp.html#ac09a30d47dd36dfe05dda91e8d67e92f">if</a> less than <a class="el" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>% of records in the input profile &quot; &quot;are matched to the IR.&quot;))</td></tr>
<tr class="separator:a70f54f6917fc126d36fdfe79929e4e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59adbbecd36d99f834317f5b8c0bcf0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#ac59adbbecd36d99f834317f5b8c0bcf0">SampleProfileSampleCoverage</a> (&quot;sample-profile-check-sample-coverage&quot;, cl::init(0), cl::value_desc(&quot;N&quot;), cl::desc(&quot;Emit a <a class="el" href="WarnMissedTransforms_8cpp.html#a9f5bae15f5e9c975fac665ccc3c43790">warning</a> <a class="el" href="DeadArgumentElimination_8cpp.html#ac09a30d47dd36dfe05dda91e8d67e92f">if</a> less than <a class="el" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>% of samples in the input profile &quot; &quot;are matched to the IR.&quot;))</td></tr>
<tr class="separator:ac59adbbecd36d99f834317f5b8c0bcf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56cf37e6a772e714c1db0564bb6407c5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a56cf37e6a772e714c1db0564bb6407c5">NoWarnSampleUnused</a> (&quot;no-warn-sample-unused&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Use this option to turn off/on warnings about <a class="el" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a> with &quot; &quot;samples but without debug information to <a class="el" href="PGOInstrumentation_8cpp.html#a72bccf07dbc39aa2557bf2298d0024a7">use</a> those samples. &quot;))</td></tr>
<tr class="separator:a56cf37e6a772e714c1db0564bb6407c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893720881035b5cff198ce4cba6221ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a893720881035b5cff198ce4cba6221ef">ProfileSampleAccurate</a> (&quot;profile-sample-accurate&quot;, cl::Hidden, cl::init(false), cl::desc(&quot;If the sample profile is accurate, we will mark all un-sampled &quot; &quot;callsite and <a class="el" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a> as having 0 samples. Otherwise, treat &quot; &quot;un-sampled callsites and <a class="el" href="AlwaysInliner_8cpp.html#a2d8a8f47affac13913c407ee9714d994">functions</a> conservatively as unknown. &quot;))</td></tr>
<tr class="separator:a893720881035b5cff198ce4cba6221ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95ba8b64ef004899c93cac36a8885420"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a95ba8b64ef004899c93cac36a8885420">callsiteIsHot</a> (const FunctionSamples *CallsiteFS, ProfileSummaryInfo *PSI)</td></tr>
<tr class="memdesc:a95ba8b64ef004899c93cac36a8885420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the given callsite is hot wrt to hot cutoff threshold.  <a href="SampleProfile_8cpp.html#a95ba8b64ef004899c93cac36a8885420">More...</a><br /></td></tr>
<tr class="separator:a95ba8b64ef004899c93cac36a8885420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a106951332b60fa728db2c666f13bb2ca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classSmallVector.html">SmallVector</a>&lt; InstrProfValueData, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a106951332b60fa728db2c666f13bb2ca">SortCallTargets</a> (const SampleRecord::CallTargetMap &amp;M)</td></tr>
<tr class="memdesc:a106951332b60fa728db2c666f13bb2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sorted CallTargetMap <code>M</code> by count in descending order.  <a href="SampleProfile_8cpp.html#a106951332b60fa728db2c666f13bb2ca">More...</a><br /></td></tr>
<tr class="separator:a106951332b60fa728db2c666f13bb2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c61d2d479bce8e59a01b4095d381961"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#a9c61d2d479bce8e59a01b4095d381961">INITIALIZE_PASS_BEGIN</a> (SampleProfileLoaderLegacyPass, &quot;sample-profile&quot;, &quot;Sample Profile loader&quot;, false, false) INITIALIZE_PASS_END(SampleProfileLoaderLegacyPass</td></tr>
<tr class="separator:a9c61d2d479bce8e59a01b4095d381961"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab9c03ccea8a95213cc02502d0a8216a2"><td class="memItemLeft" align="right" valign="top">sample&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#ab9c03ccea8a95213cc02502d0a8216a2">profile</a></td></tr>
<tr class="separator:ab9c03ccea8a95213cc02502d0a8216a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6d0a32738af9bd060dcfe35c6ee4b44"><td class="memItemLeft" align="right" valign="top">sample Sample Profile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#aa6d0a32738af9bd060dcfe35c6ee4b44">loader</a></td></tr>
<tr class="separator:aa6d0a32738af9bd060dcfe35c6ee4b44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea50f65dff46ad92ec79209f5167d63c"><td class="memItemLeft" align="right" valign="top">sample Sample Profile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="SampleProfile_8cpp.html#aea50f65dff46ad92ec79209f5167d63c">false</a></td></tr>
<tr class="separator:aea50f65dff46ad92ec79209f5167d63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d" name="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;sample-profile&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l00090">90</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ac57dae906fe8ac64efe52571121b0fe1" name="ac57dae906fe8ac64efe52571121b0fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac57dae906fe8ac64efe52571121b0fe1">&#9670;&nbsp;</a></span>ProfileCount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="Function_8cpp.html#ac57dae906fe8ac64efe52571121b0fe1">ProfileCount</a> =  Function::ProfileCount</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l00089">89</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a95ba8b64ef004899c93cac36a8885420" name="a95ba8b64ef004899c93cac36a8885420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95ba8b64ef004899c93cac36a8885420">&#9670;&nbsp;</a></span>callsiteIsHot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool callsiteIsHot </td>
          <td>(</td>
          <td class="paramtype">const FunctionSamples *&#160;</td>
          <td class="paramname"><em>CallsiteFS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ProfileSummaryInfo *&#160;</td>
          <td class="paramname"><em>PSI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if the given callsite is hot wrt to hot cutoff threshold. </p>
<p >Functions that were inlined in the original binary will be represented in the inline stack in the sample profile. If the profile shows that the original inline decision was "good" (i.e., the callsite is executed frequently), then we will recreate the inline decision and apply the profile from the inlined callsite.</p>
<p >To decide whether an inlined callsite is hot, we compare the callsite sample count with the hot cutoff computed by ProfileSummaryInfo, it is regarded as hot if the count is above the cutoff value. </p>

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l00384">384</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

<p class="reference">References <a class="el" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert()</a>.</p>

</div>
</div>
<a id="a9c61d2d479bce8e59a01b4095d381961" name="a9c61d2d479bce8e59a01b4095d381961"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c61d2d479bce8e59a01b4095d381961">&#9670;&nbsp;</a></span>INITIALIZE_PASS_BEGIN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS_BEGIN </td>
          <td>(</td>
          <td class="paramtype">SampleProfileLoaderLegacyPass&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;sample-profile&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Sample Profile loader&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">false&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">false&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a56cf37e6a772e714c1db0564bb6407c5" name="a56cf37e6a772e714c1db0564bb6407c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56cf37e6a772e714c1db0564bb6407c5">&#9670;&nbsp;</a></span>NoWarnSampleUnused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt; NoWarnSampleUnused </td>
          <td>(</td>
          <td class="paramtype">&quot;no-warn-sample-unused&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(false)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Use this option to turn off/on warnings about <a class="el" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a> with &quot; &quot;samples but without debug information to <a class="el" href="PGOInstrumentation_8cpp.html#a72bccf07dbc39aa2557bf2298d0024a7">use</a> those samples. &quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a893720881035b5cff198ce4cba6221ef" name="a893720881035b5cff198ce4cba6221ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893720881035b5cff198ce4cba6221ef">&#9670;&nbsp;</a></span>ProfileSampleAccurate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt; ProfileSampleAccurate </td>
          <td>(</td>
          <td class="paramtype">&quot;profile-sample-accurate&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(false)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;If the sample profile is accurate, we will mark all un-sampled &quot; &quot;callsite and <a class="el" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a> as having 0 samples. Otherwise, treat &quot; &quot;un-sampled callsites and <a class="el" href="AlwaysInliner_8cpp.html#a2d8a8f47affac13913c407ee9714d994">functions</a> conservatively as unknown. &quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7135fad79ba2e726ee26114e1486f0ef" name="a7135fad79ba2e726ee26114e1486f0ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7135fad79ba2e726ee26114e1486f0ef">&#9670;&nbsp;</a></span>SampleProfileFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; std::string &gt; SampleProfileFile </td>
          <td>(</td>
          <td class="paramtype">&quot;sample-profile-file&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(&quot;&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::value_desc(&quot;filename&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Profile <a class="el" href="RegionPrinter_8cpp.html#a79dce2d3eafaf25bf0df59f56caf9712">file</a> loaded by -sample-profile&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa2ffc950f9047cbec66a4f62dc27a2b0" name="aa2ffc950f9047cbec66a4f62dc27a2b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ffc950f9047cbec66a4f62dc27a2b0">&#9670;&nbsp;</a></span>SampleProfileMaxPropagateIterations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; SampleProfileMaxPropagateIterations </td>
          <td>(</td>
          <td class="paramtype">&quot;sample-profile-max-<a class="el" href="CFLAndersAliasAnalysis_8cpp.html#a94abfb8f8f0716f9a5bdc2ffae3750e9">propagate</a>-iterations&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(100)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Maximum number of iterations to go through when propagating &quot; &quot;sample block/edge weights through the CFG.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a70f54f6917fc126d36fdfe79929e4e07" name="a70f54f6917fc126d36fdfe79929e4e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70f54f6917fc126d36fdfe79929e4e07">&#9670;&nbsp;</a></span>SampleProfileRecordCoverage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; SampleProfileRecordCoverage </td>
          <td>(</td>
          <td class="paramtype">&quot;sample-profile-check-record-coverage&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(0)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::value_desc(&quot;N&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Emit a <a class="el" href="WarnMissedTransforms_8cpp.html#a9f5bae15f5e9c975fac665ccc3c43790">warning</a> <a class="el" href="DeadArgumentElimination_8cpp.html#ac09a30d47dd36dfe05dda91e8d67e92f">if</a> less than <a class="el" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>% of records in the input profile &quot; &quot;are matched to the IR.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6b2da3a873ff05c43502e3c2df2b041e" name="a6b2da3a873ff05c43502e3c2df2b041e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b2da3a873ff05c43502e3c2df2b041e">&#9670;&nbsp;</a></span>SampleProfileRemappingFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; std::string &gt; SampleProfileRemappingFile </td>
          <td>(</td>
          <td class="paramtype">&quot;sample-profile-remapping-file&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(&quot;&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::value_desc(&quot;filename&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Profile remapping <a class="el" href="RegionPrinter_8cpp.html#a79dce2d3eafaf25bf0df59f56caf9712">file</a> loaded by -sample-profile&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ac59adbbecd36d99f834317f5b8c0bcf0" name="ac59adbbecd36d99f834317f5b8c0bcf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59adbbecd36d99f834317f5b8c0bcf0">&#9670;&nbsp;</a></span>SampleProfileSampleCoverage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; SampleProfileSampleCoverage </td>
          <td>(</td>
          <td class="paramtype">&quot;sample-profile-check-sample-coverage&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(0)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::value_desc(&quot;N&quot;)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Emit a <a class="el" href="WarnMissedTransforms_8cpp.html#a9f5bae15f5e9c975fac665ccc3c43790">warning</a> <a class="el" href="DeadArgumentElimination_8cpp.html#ac09a30d47dd36dfe05dda91e8d67e92f">if</a> less than <a class="el" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>% of samples in the input profile &quot; &quot;are matched to the IR.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a106951332b60fa728db2c666f13bb2ca" name="a106951332b60fa728db2c666f13bb2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a106951332b60fa728db2c666f13bb2ca">&#9670;&nbsp;</a></span>SortCallTargets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classSmallVector.html">SmallVector</a>&lt; InstrProfValueData, 2 &gt; SortCallTargets </td>
          <td>(</td>
          <td class="paramtype">const SampleRecord::CallTargetMap &amp;&#160;</td>
          <td class="paramname"><em>M</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the sorted CallTargetMap <code>M</code> by count in descending order. </p>

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l01222">1222</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

<p class="reference">References <a class="el" href="MD5_8cpp_source.html#l00058">I</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aea50f65dff46ad92ec79209f5167d63c" name="aea50f65dff46ad92ec79209f5167d63c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea50f65dff46ad92ec79209f5167d63c">&#9670;&nbsp;</a></span>false</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sample Sample Profile false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l01556">1556</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

</div>
</div>
<a id="aa6d0a32738af9bd060dcfe35c6ee4b44" name="aa6d0a32738af9bd060dcfe35c6ee4b44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d0a32738af9bd060dcfe35c6ee4b44">&#9670;&nbsp;</a></span>loader</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sample Sample Profile loader</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l01556">1556</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

</div>
</div>
<a id="ab9c03ccea8a95213cc02502d0a8216a2" name="ab9c03ccea8a95213cc02502d0a8216a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9c03ccea8a95213cc02502d0a8216a2">&#9670;&nbsp;</a></span>profile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sample profile</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="SampleProfile_8cpp_source.html#l01555">1555</a> of file <a class="el" href="SampleProfile_8cpp_source.html">SampleProfile.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 13 2022 12:44:45 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
