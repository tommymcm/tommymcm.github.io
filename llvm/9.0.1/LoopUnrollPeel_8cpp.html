<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Utils/LoopUnrollPeel.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f75c00afeb315f44d76556a7c675e6e8.html">Utils</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">LoopUnrollPeel.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;llvm/ADT/DenseMap.h&quot;</code><br />
<code>#include &quot;llvm/ADT/Optional.h&quot;</code><br />
<code>#include &quot;llvm/ADT/SmallVector.h&quot;</code><br />
<code>#include &quot;llvm/ADT/Statistic.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/LoopInfo.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/LoopIterator.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/ScalarEvolution.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/ScalarEvolutionExpressions.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/TargetTransformInfo.h&quot;</code><br />
<code>#include &quot;llvm/IR/BasicBlock.h&quot;</code><br />
<code>#include &quot;llvm/IR/Dominators.h&quot;</code><br />
<code>#include &quot;llvm/IR/Function.h&quot;</code><br />
<code>#include &quot;llvm/IR/InstrTypes.h&quot;</code><br />
<code>#include &quot;llvm/IR/Instruction.h&quot;</code><br />
<code>#include &quot;llvm/IR/Instructions.h&quot;</code><br />
<code>#include &quot;llvm/IR/LLVMContext.h&quot;</code><br />
<code>#include &quot;llvm/IR/MDBuilder.h&quot;</code><br />
<code>#include &quot;llvm/IR/Metadata.h&quot;</code><br />
<code>#include &quot;llvm/IR/PatternMatch.h&quot;</code><br />
<code>#include &quot;llvm/Support/Casting.h&quot;</code><br />
<code>#include &quot;llvm/Support/CommandLine.h&quot;</code><br />
<code>#include &quot;llvm/Support/Debug.h&quot;</code><br />
<code>#include &quot;llvm/Support/raw_ostream.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/BasicBlockUtils.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/Cloning.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/LoopSimplify.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/LoopUtils.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/UnrollLoop.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/ValueMapper.h&quot;</code><br />
<code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;cassert&gt;</code><br />
<code>#include &lt;cstdint&gt;</code><br />
<code>#include &lt;limits&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LoopUnrollPeel.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LoopUnrollPeel_8cpp__incl.png" border="0" usemap="#alib_2Transforms_2Utils_2LoopUnrollPeel_8cpp" alt=""/></div>
<map name="alib_2Transforms_2Utils_2LoopUnrollPeel_8cpp" id="alib_2Transforms_2Utils_2LoopUnrollPeel_8cpp">
<area shape="rect" title=" " alt="" coords="3172,5,3323,45"/>
<area shape="rect" title=" " alt="" coords="5,101,172,126"/>
<area shape="rect" title=" " alt="" coords="196,101,349,126"/>
<area shape="rect" title=" " alt="" coords="373,101,548,126"/>
<area shape="rect" title=" " alt="" coords="572,101,723,126"/>
<area shape="rect" title=" " alt="" coords="747,101,929,126"/>
<area shape="rect" title=" " alt="" coords="953,101,1157,126"/>
<area shape="rect" title=" " alt="" coords="1182,101,1409,126"/>
<area shape="rect" title=" " alt="" coords="1433,93,1648,133"/>
<area shape="rect" title=" " alt="" coords="1673,93,1891,133"/>
<area shape="rect" title=" " alt="" coords="1915,101,2070,126"/>
<area shape="rect" title=" " alt="" coords="2094,101,2254,126"/>
<area shape="rect" title=" " alt="" coords="2278,101,2417,126"/>
<area shape="rect" title=" " alt="" coords="2441,101,2592,126"/>
<area shape="rect" title=" " alt="" coords="2616,101,2769,126"/>
<area shape="rect" title=" " alt="" coords="2794,101,2954,126"/>
<area shape="rect" title=" " alt="" coords="2979,101,3148,126"/>
<area shape="rect" title=" " alt="" coords="3172,101,3323,126"/>
<area shape="rect" title=" " alt="" coords="3347,101,3494,126"/>
<area shape="rect" title=" " alt="" coords="3518,101,3689,126"/>
<area shape="rect" title=" " alt="" coords="3713,101,3883,126"/>
<area shape="rect" title=" " alt="" coords="3908,101,4123,126"/>
<area shape="rect" title=" " alt="" coords="4147,101,4310,126"/>
<area shape="rect" title=" " alt="" coords="4335,101,4541,126"/>
<area shape="rect" title=" " alt="" coords="4565,93,4727,133"/>
<area shape="rect" title=" " alt="" coords="4751,93,4912,133"/>
<area shape="rect" title=" " alt="" coords="4936,93,5097,133"/>
<area shape="rect" title=" " alt="" coords="5121,93,5283,133"/>
<area shape="rect" title=" " alt="" coords="5307,93,5468,133"/>
<area shape="rect" title=" " alt="" coords="5492,93,5653,133"/>
<area shape="rect" title=" " alt="" coords="5678,101,5763,126"/>
<area shape="rect" title=" " alt="" coords="5787,101,5857,126"/>
<area shape="rect" title=" " alt="" coords="5881,101,5947,126"/>
<area shape="rect" title=" " alt="" coords="5971,101,6030,126"/>
</map>
</div>
</div>
<p><a href="LoopUnrollPeel_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;loop-unroll&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7e9e8d290525be96b07046de14b8540"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#ad7e9e8d290525be96b07046de14b8540">STATISTIC</a> (NumPeeled, &quot;Number of <a class="el" href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a> peeled&quot;)</td></tr>
<tr class="separator:ad7e9e8d290525be96b07046de14b8540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc6de96938aee8a94f0136ce2feedd9d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#abc6de96938aee8a94f0136ce2feedd9d">UnrollPeelMaxCount</a> (&quot;unroll-peel-max-count&quot;, cl::init(7), cl::Hidden, cl::desc(&quot;Max average trip count which will cause loop peeling.&quot;))</td></tr>
<tr class="separator:abc6de96938aee8a94f0136ce2feedd9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d15e52642135fefe1cf37dee81aa709"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a4d15e52642135fefe1cf37dee81aa709">UnrollForcePeelCount</a> (&quot;unroll-force-peel-count&quot;, cl::init(0), cl::Hidden, cl::desc(&quot;Force a peel count regardless of <a class="el" href="GCOVProfiling_8cpp.html#a1370d79a1db8cdf5e933a272a82284ee">profiling</a> information.&quot;))</td></tr>
<tr class="separator:a4d15e52642135fefe1cf37dee81aa709"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b081c4c6c2c80681f49e7d02b1b40c6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a7b081c4c6c2c80681f49e7d02b1b40c6">UnrollPeelMultiDeoptExit</a> (&quot;unroll-peel-multi-deopt-exit&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Allow peeling of <a class="el" href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a> with multiple deopt exits.&quot;))</td></tr>
<tr class="separator:a7b081c4c6c2c80681f49e7d02b1b40c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a461f1e242bb38d5d2266928b40ae8193"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a461f1e242bb38d5d2266928b40ae8193">calculateIterationsToInvariance</a> (PHINode *Phi, Loop *L, BasicBlock *BackEdge, SmallDenseMap&lt; PHINode *, unsigned &gt; &amp;IterationsToInvariance)</td></tr>
<tr class="separator:a461f1e242bb38d5d2266928b40ae8193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7098623cafc05376a44b27d202b03372"><td class="memItemLeft" align="right" valign="top">static unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a7098623cafc05376a44b27d202b03372">countToEliminateCompares</a> (Loop &amp;L, unsigned MaxPeelCount, ScalarEvolution &amp;SE)</td></tr>
<tr class="separator:a7098623cafc05376a44b27d202b03372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46605ce90a259473beaf47e3fa9c4f69"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a46605ce90a259473beaf47e3fa9c4f69">updateBranchWeights</a> (BasicBlock *Header, BranchInst *LatchBR, unsigned IterNumber, unsigned AvgIters, uint64_t &amp;PeeledHeaderWeight)</td></tr>
<tr class="memdesc:a46605ce90a259473beaf47e3fa9c4f69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the branch weights of the latch of a peeled-off loop iteration.  <a href="LoopUnrollPeel_8cpp.html#a46605ce90a259473beaf47e3fa9c4f69">More...</a><br /></td></tr>
<tr class="separator:a46605ce90a259473beaf47e3fa9c4f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3147e732a87bb3604a01bf0f6d5ddb25"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a3147e732a87bb3604a01bf0f6d5ddb25">initBranchWeights</a> (BasicBlock *Header, BranchInst *LatchBR, unsigned AvgIters, uint64_t &amp;ExitWeight, uint64_t &amp;CurHeaderWeight)</td></tr>
<tr class="memdesc:a3147e732a87bb3604a01bf0f6d5ddb25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the weights.  <a href="LoopUnrollPeel_8cpp.html#a3147e732a87bb3604a01bf0f6d5ddb25">More...</a><br /></td></tr>
<tr class="separator:a3147e732a87bb3604a01bf0f6d5ddb25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7009ffdc17c5653d5015d9a85c54d649"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a7009ffdc17c5653d5015d9a85c54d649">fixupBranchWeights</a> (BasicBlock *Header, BranchInst *LatchBR, uint64_t ExitWeight, uint64_t CurHeaderWeight)</td></tr>
<tr class="memdesc:a7009ffdc17c5653d5015d9a85c54d649"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the weights of original Latch block after peeling off all iterations.  <a href="LoopUnrollPeel_8cpp.html#a7009ffdc17c5653d5015d9a85c54d649">More...</a><br /></td></tr>
<tr class="separator:a7009ffdc17c5653d5015d9a85c54d649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bd7435b7d3d54ab34d1e65fd1975538"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a0bd7435b7d3d54ab34d1e65fd1975538">cloneLoopBlocks</a> (Loop *L, unsigned IterNumber, BasicBlock *InsertTop, BasicBlock *InsertBot, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; std::pair&lt; BasicBlock *, BasicBlock * &gt; &gt; &amp;ExitEdges, <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;NewBlocks, LoopBlocksDFS &amp;LoopBlocks, ValueToValueMapTy &amp;VMap, ValueToValueMapTy &amp;LVMap, DominatorTree *DT, LoopInfo *LI)</td></tr>
<tr class="memdesc:a0bd7435b7d3d54ab34d1e65fd1975538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clones the body of the loop L, putting it between <code>InsertTop</code> and <code>InsertBot</code>.  <a href="LoopUnrollPeel_8cpp.html#a0bd7435b7d3d54ab34d1e65fd1975538">More...</a><br /></td></tr>
<tr class="separator:a0bd7435b7d3d54ab34d1e65fd1975538"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a832105593d6f72bb9ebe7a29e62ee8fd"><td class="memItemLeft" align="right" valign="top">static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopUnrollPeel_8cpp.html#a832105593d6f72bb9ebe7a29e62ee8fd">InfiniteIterationsToInvariance</a></td></tr>
<tr class="separator:a832105593d6f72bb9ebe7a29e62ee8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d" name="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;loop-unroll&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00052">52</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a461f1e242bb38d5d2266928b40ae8193" name="a461f1e242bb38d5d2266928b40ae8193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a461f1e242bb38d5d2266928b40ae8193">&#9670;&nbsp;</a></span>calculateIterationsToInvariance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned calculateIterationsToInvariance </td>
          <td>(</td>
          <td class="paramtype">PHINode *&#160;</td>
          <td class="paramname"><em>Phi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Loop *&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>BackEdge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SmallDenseMap&lt; PHINode *, unsigned &gt; &amp;&#160;</td>
          <td class="paramname"><em>IterationsToInvariance</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00123">123</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

<p class="reference">References <a class="el" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert()</a>, <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00123">calculateIterationsToInvariance()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, and <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00071">InfiniteIterationsToInvariance</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00123">calculateIterationsToInvariance()</a>.</p>

</div>
</div>
<a id="a0bd7435b7d3d54ab34d1e65fd1975538" name="a0bd7435b7d3d54ab34d1e65fd1975538"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bd7435b7d3d54ab34d1e65fd1975538">&#9670;&nbsp;</a></span>cloneLoopBlocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void cloneLoopBlocks </td>
          <td>(</td>
          <td class="paramtype">Loop *&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>IterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>InsertTop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>InsertBot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; std::pair&lt; BasicBlock *, BasicBlock * &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>ExitEdges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;&#160;</td>
          <td class="paramname"><em>NewBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoopBlocksDFS &amp;&#160;</td>
          <td class="paramname"><em>LoopBlocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ValueToValueMapTy &amp;&#160;</td>
          <td class="paramname"><em>VMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ValueToValueMapTy &amp;&#160;</td>
          <td class="paramname"><em>LVMap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DominatorTree *&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoopInfo *&#160;</td>
          <td class="paramname"><em>LI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clones the body of the loop L, putting it between <code>InsertTop</code> and <code>InsertBot</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">IterNumber</td><td>The serial number of the iteration currently being peeled off. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">ExitEdges</td><td>The exit edges of the original loop. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">NewBlocks</td><td>A list of the blocks in the newly created clone </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">VMap</td><td>The value map between the loop and the new clone. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">LoopBlocks</td><td>A helper for DFS-traversal of the loop. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">LVMap</td><td>A value-map that maps instructions from the original loop to instructions in the last peeled-off iteration. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00462">462</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

<p class="reference">References <a class="el" href="MD5_8cpp_source.html#l00055">F</a>, and <a class="el" href="MD5_8cpp_source.html#l00058">I</a>.</p>

</div>
</div>
<a id="a7098623cafc05376a44b27d202b03372" name="a7098623cafc05376a44b27d202b03372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7098623cafc05376a44b27d202b03372">&#9670;&nbsp;</a></span>countToEliminateCompares()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned countToEliminateCompares </td>
          <td>(</td>
          <td class="paramtype">Loop &amp;&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>MaxPeelCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScalarEvolution &amp;&#160;</td>
          <td class="paramname"><em>SE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00170">170</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

<p class="reference">References <a class="el" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert()</a>.</p>

</div>
</div>
<a id="a7009ffdc17c5653d5015d9a85c54d649" name="a7009ffdc17c5653d5015d9a85c54d649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7009ffdc17c5653d5015d9a85c54d649">&#9670;&nbsp;</a></span>fixupBranchWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fixupBranchWeights </td>
          <td>(</td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>Header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BranchInst *&#160;</td>
          <td class="paramname"><em>LatchBR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>ExitWeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>CurHeaderWeight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the weights of original Latch block after peeling off all iterations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Header</td><td>The header block. </td></tr>
    <tr><td class="paramname">LatchBR</td><td>The latch branch. </td></tr>
    <tr><td class="paramname">ExitWeight</td><td>The weight of the edge from Latch to Exit block. </td></tr>
    <tr><td class="paramname">CurHeaderWeight</td><td>The # of time the header is executed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00430">430</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

</div>
</div>
<a id="a3147e732a87bb3604a01bf0f6d5ddb25" name="a3147e732a87bb3604a01bf0f6d5ddb25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3147e732a87bb3604a01bf0f6d5ddb25">&#9670;&nbsp;</a></span>initBranchWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void initBranchWeights </td>
          <td>(</td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>Header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BranchInst *&#160;</td>
          <td class="paramname"><em>LatchBR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>AvgIters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>ExitWeight</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>CurHeaderWeight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the weights. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Header</td><td>The header block. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">LatchBR</td><td>The latch branch. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">AvgIters</td><td>The average number of iterations we expect the loop to have. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ExitWeight</td><td>The # of times the edge from Latch to Exit is taken. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">CurHeaderWeight</td><td>The # of times the header is executed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00411">411</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

</div>
</div>
<a id="ad7e9e8d290525be96b07046de14b8540" name="ad7e9e8d290525be96b07046de14b8540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7e9e8d290525be96b07046de14b8540">&#9670;&nbsp;</a></span>STATISTIC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumPeeled&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a> peeled&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d15e52642135fefe1cf37dee81aa709" name="a4d15e52642135fefe1cf37dee81aa709"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d15e52642135fefe1cf37dee81aa709">&#9670;&nbsp;</a></span>UnrollForcePeelCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; UnrollForcePeelCount </td>
          <td>(</td>
          <td class="paramtype">&quot;unroll-force-peel-count&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(0)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Force a peel count regardless of <a class="el" href="GCOVProfiling_8cpp.html#a1370d79a1db8cdf5e933a272a82284ee">profiling</a> information.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abc6de96938aee8a94f0136ce2feedd9d" name="abc6de96938aee8a94f0136ce2feedd9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc6de96938aee8a94f0136ce2feedd9d">&#9670;&nbsp;</a></span>UnrollPeelMaxCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; UnrollPeelMaxCount </td>
          <td>(</td>
          <td class="paramtype">&quot;unroll-peel-max-count&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(7)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Max average trip count which will cause loop peeling.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a7b081c4c6c2c80681f49e7d02b1b40c6" name="a7b081c4c6c2c80681f49e7d02b1b40c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b081c4c6c2c80681f49e7d02b1b40c6">&#9670;&nbsp;</a></span>UnrollPeelMultiDeoptExit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; bool &gt; UnrollPeelMultiDeoptExit </td>
          <td>(</td>
          <td class="paramtype">&quot;unroll-peel-multi-deopt-exit&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(false)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Allow peeling of <a class="el" href="LoopInfo_8cpp.html#a49ae40a9c91d665793aaed656c26ca30">loops</a> with multiple deopt exits.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a46605ce90a259473beaf47e3fa9c4f69" name="a46605ce90a259473beaf47e3fa9c4f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46605ce90a259473beaf47e3fa9c4f69">&#9670;&nbsp;</a></span>updateBranchWeights()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void updateBranchWeights </td>
          <td>(</td>
          <td class="paramtype">BasicBlock *&#160;</td>
          <td class="paramname"><em>Header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BranchInst *&#160;</td>
          <td class="paramname"><em>LatchBR</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>IterNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>AvgIters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t &amp;&#160;</td>
          <td class="paramname"><em>PeeledHeaderWeight</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the branch weights of the latch of a peeled-off loop iteration. </p>
<p >This sets the branch weights for the latch of the recently peeled off loop iteration correctly. Our goal is to make sure that: a) The total weight of all the copies of the loop body is preserved. b) The total weight of the loop exit is preserved. c) The body weight is reasonably distributed between the peeled iterations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Header</td><td>The copy of the header block that belongs to next iteration. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">LatchBR</td><td>The copy of the latch branch that belongs to this iteration. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">IterNumber</td><td>The serial number of the iteration that was just peeled off. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">AvgIters</td><td>The average number of iterations we expect the loop to have. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">PeeledHeaderWeight</td><td>The total number of dynamic loop iterations that are unaccounted for. As an input, it represents the number of times we expect to enter the header of the iteration currently being peeled off. The output is the number of times we expect to enter the header of the next iteration. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00382">382</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a832105593d6f72bb9ebe7a29e62ee8fd" name="a832105593d6f72bb9ebe7a29e62ee8fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832105593d6f72bb9ebe7a29e62ee8fd">&#9670;&nbsp;</a></span>InfiniteIterationsToInvariance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned InfiniteIterationsToInvariance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">    std::numeric_limits&lt;unsigned&gt;::max()</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00071">71</a> of file <a class="el" href="LoopUnrollPeel_8cpp_source.html">LoopUnrollPeel.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopUnrollPeel_8cpp_source.html#l00123">calculateIterationsToInvariance()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 13 2022 12:44:45 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
