<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LoopSink.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LLVM<span id="projectnumber">&#160;9.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">LoopSink.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;llvm/Transforms/Scalar/LoopSink.h&quot;</code><br />
<code>#include &quot;llvm/ADT/Statistic.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/AliasAnalysis.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/AliasSetTracker.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/BasicAliasAnalysis.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/BlockFrequencyInfo.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/Loads.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/LoopInfo.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/LoopPass.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/ScalarEvolution.h&quot;</code><br />
<code>#include &quot;llvm/Analysis/ScalarEvolutionAliasAnalysis.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/Local.h&quot;</code><br />
<code>#include &quot;llvm/IR/Dominators.h&quot;</code><br />
<code>#include &quot;llvm/IR/Instructions.h&quot;</code><br />
<code>#include &quot;llvm/IR/LLVMContext.h&quot;</code><br />
<code>#include &quot;llvm/IR/Metadata.h&quot;</code><br />
<code>#include &quot;llvm/Support/CommandLine.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Scalar.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Scalar/LoopPassManager.h&quot;</code><br />
<code>#include &quot;llvm/Transforms/Utils/LoopUtils.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for LoopSink.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="LoopSink_8cpp__incl.png" border="0" usemap="#alib_2Transforms_2Scalar_2LoopSink_8cpp" alt=""/></div>
<map name="alib_2Transforms_2Scalar_2LoopSink_8cpp" id="alib_2Transforms_2Scalar_2LoopSink_8cpp">
<area shape="rect" title=" " alt="" coords="2071,5,2230,45"/>
<area shape="rect" title=" " alt="" coords="5,93,176,133"/>
<area shape="rect" title=" " alt="" coords="201,101,351,126"/>
<area shape="rect" title=" " alt="" coords="376,101,589,126"/>
<area shape="rect" title=" " alt="" coords="613,101,837,126"/>
<area shape="rect" title=" " alt="" coords="861,93,1043,133"/>
<area shape="rect" title=" " alt="" coords="1067,93,1285,133"/>
<area shape="rect" title=" " alt="" coords="1309,101,1473,126"/>
<area shape="rect" title=" " alt="" coords="1497,101,1679,126"/>
<area shape="rect" title=" " alt="" coords="1704,101,1891,126"/>
<area shape="rect" title=" " alt="" coords="1915,101,2141,126"/>
<area shape="rect" title=" " alt="" coords="2166,93,2381,133"/>
<area shape="rect" title=" " alt="" coords="2405,93,2566,133"/>
<area shape="rect" title=" " alt="" coords="2591,101,2751,126"/>
<area shape="rect" title=" " alt="" coords="2775,101,2935,126"/>
<area shape="rect" title=" " alt="" coords="2959,101,3129,126"/>
<area shape="rect" title=" " alt="" coords="3153,101,3300,126"/>
<area shape="rect" title=" " alt="" coords="3325,101,3539,126"/>
<area shape="rect" title=" " alt="" coords="3563,101,3746,126"/>
<area shape="rect" title=" " alt="" coords="3771,93,3941,133"/>
<area shape="rect" title=" " alt="" coords="3966,93,4127,133"/>
</map>
</div>
</div>
<p><a href="LoopSink_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>&#160;&#160;&#160;&quot;loopsink&quot;</td></tr>
<tr class="separator:ad78e062f62e0d6e453941fb4ca843e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2e02384def40b5bc90257ab002335c4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#af2e02384def40b5bc90257ab002335c4">STATISTIC</a> (NumLoopSunk, &quot;Number of <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> sunk into loop&quot;)</td></tr>
<tr class="separator:af2e02384def40b5bc90257ab002335c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b63b794b937c844b1eb0a19f2565e3d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#a5b63b794b937c844b1eb0a19f2565e3d">STATISTIC</a> (NumLoopSunkCloned, &quot;Number of cloned <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> sunk into loop&quot;)</td></tr>
<tr class="separator:a5b63b794b937c844b1eb0a19f2565e3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce96fa5406e6ec51e26540189b4ff88"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#afce96fa5406e6ec51e26540189b4ff88">SinkFrequencyPercentThreshold</a> (&quot;sink-<a class="el" href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a>-percent-threshold&quot;, cl::Hidden, cl::init(90), cl::desc(&quot;Do not <a class="el" href="GVNSink_8cpp.html#a947112d0f5a5fc2abebffb587153f200">sink</a> <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> that require cloning unless they &quot; &quot;execute less than this percent of the time.&quot;))</td></tr>
<tr class="separator:afce96fa5406e6ec51e26540189b4ff88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a703cbb03b06e37203fc1ab47f6b00e26"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#a703cbb03b06e37203fc1ab47f6b00e26">MaxNumberOfUseBBsForSinking</a> (&quot;max-<a class="el" href="DeadArgumentElimination_8cpp.html#aba008984447815eaf051160d45db9d18">uses</a>-for-sinking&quot;, cl::Hidden, cl::init(30), cl::desc(&quot;Do not <a class="el" href="GVNSink_8cpp.html#a947112d0f5a5fc2abebffb587153f200">sink</a> <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> that have too many uses.&quot;))</td></tr>
<tr class="separator:a703cbb03b06e37203fc1ab47f6b00e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad05635f074426ec888ca6cf930613024"><td class="memItemLeft" align="right" valign="top">static BlockFrequency&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#ad05635f074426ec888ca6cf930613024">adjustedSumFreq</a> (SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;BBs, BlockFrequencyInfo &amp;BFI)</td></tr>
<tr class="memdesc:ad05635f074426ec888ca6cf930613024"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return adjusted total frequency of <code>BBs</code>.  <a href="LoopSink_8cpp.html#ad05635f074426ec888ca6cf930613024">More...</a><br /></td></tr>
<tr class="separator:ad05635f074426ec888ca6cf930613024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db2bdc3994fcf7d2631f887443ad477"><td class="memItemLeft" align="right" valign="top">static SmallPtrSet&lt; BasicBlock *, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#a8db2bdc3994fcf7d2631f887443ad477">findBBsToSinkInto</a> (const Loop &amp;L, const SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;UseBBs, const <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;ColdLoopBBs, DominatorTree &amp;DT, BlockFrequencyInfo &amp;BFI)</td></tr>
<tr class="memdesc:a8db2bdc3994fcf7d2631f887443ad477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a set of basic blocks to insert sinked instructions.  <a href="LoopSink_8cpp.html#a8db2bdc3994fcf7d2631f887443ad477">More...</a><br /></td></tr>
<tr class="separator:a8db2bdc3994fcf7d2631f887443ad477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee0df4781b81632e0cfcbcdae9c0396"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#abee0df4781b81632e0cfcbcdae9c0396">sinkInstruction</a> (Loop &amp;L, Instruction &amp;<a class="el" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, const <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;ColdLoopBBs, const SmallDenseMap&lt; BasicBlock *, int, 16 &gt; &amp;LoopBlockNumber, LoopInfo &amp;LI, DominatorTree &amp;DT, BlockFrequencyInfo &amp;BFI)</td></tr>
<tr class="separator:abee0df4781b81632e0cfcbcdae9c0396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ca4ef3cbbfe75edbb7d4428d43fa4f0"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#a3ca4ef3cbbfe75edbb7d4428d43fa4f0">sinkLoopInvariantInstructions</a> (Loop &amp;L, AAResults &amp;AA, LoopInfo &amp;LI, DominatorTree &amp;DT, BlockFrequencyInfo &amp;BFI, ScalarEvolution *SE)</td></tr>
<tr class="memdesc:a3ca4ef3cbbfe75edbb7d4428d43fa4f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sinks instructions from loop's preheader to the loop body if the sum frequency of inserted copy is smaller than preheader's frequency.  <a href="LoopSink_8cpp.html#a3ca4ef3cbbfe75edbb7d4428d43fa4f0">More...</a><br /></td></tr>
<tr class="separator:a3ca4ef3cbbfe75edbb7d4428d43fa4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6147869b2c6c07102b754f2fdaad12e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="LoopSink_8cpp.html#ab6147869b2c6c07102b754f2fdaad12e">INITIALIZE_PASS_BEGIN</a> (LegacyLoopSinkPass, &quot;loop-sink&quot;, &quot;Loop Sink&quot;, false, false) <a class="el" href="classPass.html">Pass</a> *llvm</td></tr>
<tr class="separator:ab6147869b2c6c07102b754f2fdaad12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad78e062f62e0d6e453941fb4ca843e4d" name="ad78e062f62e0d6e453941fb4ca843e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad78e062f62e0d6e453941fb4ca843e4d">&#9670;&nbsp;</a></span>DEBUG_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_TYPE&#160;&#160;&#160;&quot;loopsink&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00055">55</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad05635f074426ec888ca6cf930613024" name="ad05635f074426ec888ca6cf930613024"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad05635f074426ec888ca6cf930613024">&#9670;&nbsp;</a></span>adjustedSumFreq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static BlockFrequency adjustedSumFreq </td>
          <td>(</td>
          <td class="paramtype">SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;&#160;</td>
          <td class="paramname"><em>BBs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BlockFrequencyInfo &amp;&#160;</td>
          <td class="paramname"><em>BFI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return adjusted total frequency of <code>BBs</code>. </p>
<ul>
<li>If there is only one BB, sinking instruction will not introduce code size increase. Thus there is no need to adjust the frequency.</li>
<li>If there are more than one BB, sinking would lead to code size increase. In this case, we add some "tax" to the total frequency to make it harder to sink. E.g. Freq(Preheader) = 100 Freq(BBs) = sum(50, 49) = 99 Even if Freq(BBs) &lt; Freq(Preheader), we will not sink from Preheade to BBs as the difference is too small to justify the code size increase. To model this, The adjusted Freq(BBs) will be: AdjustedFreq(BBs) = 99 / SinkFrequencyPercentThreshold% </li>
</ul>

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00082">82</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

<p class="reference">References <a class="el" href="LoopSink_8cpp.html#afce96fa5406e6ec51e26540189b4ff88">SinkFrequencyPercentThreshold()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopSink_8cpp_source.html#l00120">findBBsToSinkInto()</a>.</p>

</div>
</div>
<a id="a8db2bdc3994fcf7d2631f887443ad477" name="a8db2bdc3994fcf7d2631f887443ad477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db2bdc3994fcf7d2631f887443ad477">&#9670;&nbsp;</a></span>findBBsToSinkInto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static SmallPtrSet&lt; BasicBlock *, 2 &gt; findBBsToSinkInto </td>
          <td>(</td>
          <td class="paramtype">const Loop &amp;&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;&#160;</td>
          <td class="paramname"><em>UseBBs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ColdLoopBBs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DominatorTree &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BlockFrequencyInfo &amp;&#160;</td>
          <td class="paramname"><em>BFI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a set of basic blocks to insert sinked instructions. </p>
<p >The returned set of basic blocks (BBsToSinkInto) should satisfy:</p>
<ul>
<li>Inside the loop <code>L</code> </li>
<li>For each UseBB in <code>UseBBs</code>, there is at least one BB in BBsToSinkInto that domintates the UseBB</li>
<li>Has minimum total frequency that is no greater than preheader frequency</li>
</ul>
<p >The purpose of the function is to find the optimal sinking points to minimize execution cost, which is defined as "sum of frequency of
BBsToSinkInto". As a result, the returned BBsToSinkInto needs to have minimum total frequency. Additionally, if the total frequency of BBsToSinkInto exceeds preheader frequency, the optimal solution is not sinking (return empty set).</p>
<p ><code>ColdLoopBBs</code> is used to help find the optimal sinking locations. It stores a list of BBs that is:</p>
<ul>
<li>Inside the loop <code>L</code> </li>
<li>Has a frequency no larger than the loop's preheader</li>
<li>Sorted by BB frequency</li>
</ul>
<p >The complexity of the function is O(UseBBs.size() * ColdLoopBBs.size()). To avoid expensive computation, we cap the maximum UseBBs.size() in its caller. </p>

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00120">120</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

<p class="reference">References <a class="el" href="LoopSink_8cpp_source.html#l00082">adjustedSumFreq()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopSink_8cpp_source.html#l00174">sinkInstruction()</a>.</p>

</div>
</div>
<a id="ab6147869b2c6c07102b754f2fdaad12e" name="ab6147869b2c6c07102b754f2fdaad12e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6147869b2c6c07102b754f2fdaad12e">&#9670;&nbsp;</a></span>INITIALIZE_PASS_BEGIN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">INITIALIZE_PASS_BEGIN </td>
          <td>(</td>
          <td class="paramtype">LegacyLoopSinkPass&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;loop-sink&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Loop Sink&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">false&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">false&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00381">381</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

</div>
</div>
<a id="a703cbb03b06e37203fc1ab47f6b00e26" name="a703cbb03b06e37203fc1ab47f6b00e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a703cbb03b06e37203fc1ab47f6b00e26">&#9670;&nbsp;</a></span>MaxNumberOfUseBBsForSinking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; MaxNumberOfUseBBsForSinking </td>
          <td>(</td>
          <td class="paramtype">&quot;max-<a class="el" href="DeadArgumentElimination_8cpp.html#aba008984447815eaf051160d45db9d18">uses</a>-for-sinking&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(30)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Do not <a class="el" href="GVNSink_8cpp.html#a947112d0f5a5fc2abebffb587153f200">sink</a> <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> that have too many uses.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="LoopSink_8cpp_source.html#l00174">sinkInstruction()</a>.</p>

</div>
</div>
<a id="afce96fa5406e6ec51e26540189b4ff88" name="afce96fa5406e6ec51e26540189b4ff88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce96fa5406e6ec51e26540189b4ff88">&#9670;&nbsp;</a></span>SinkFrequencyPercentThreshold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="PGOMemOPSizeOpt_8cpp.html#a9d9e3af0f29b78d5b6eae235741fbcbb">cl::opt</a>&lt; unsigned &gt; SinkFrequencyPercentThreshold </td>
          <td>(</td>
          <td class="paramtype">&quot;sink-<a class="el" href="BlockFrequencyInfo_8cpp.html#a6228da6ce1f2cdae97b17637c061011e">freq</a>-percent-threshold&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::Hidden&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::init(90)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">cl::desc(&quot;Do not <a class="el" href="GVNSink_8cpp.html#a947112d0f5a5fc2abebffb587153f200">sink</a> <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> that require cloning unless they &quot; &quot;execute less than this percent of the time.&quot;)&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="LoopSink_8cpp_source.html#l00082">adjustedSumFreq()</a>.</p>

</div>
</div>
<a id="abee0df4781b81632e0cfcbcdae9c0396" name="abee0df4781b81632e0cfcbcdae9c0396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abee0df4781b81632e0cfcbcdae9c0396">&#9670;&nbsp;</a></span>sinkInstruction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool sinkInstruction </td>
          <td>(</td>
          <td class="paramtype">Loop &amp;&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Instruction &amp;&#160;</td>
          <td class="paramname"><em>I</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl</a>&lt; BasicBlock * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ColdLoopBBs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SmallDenseMap&lt; BasicBlock *, int, 16 &gt; &amp;&#160;</td>
          <td class="paramname"><em>LoopBlockNumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoopInfo &amp;&#160;</td>
          <td class="paramname"><em>LI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DominatorTree &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BlockFrequencyInfo &amp;&#160;</td>
          <td class="paramname"><em>BFI</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00174">174</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

<p class="reference">References <a class="el" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert()</a>, <a class="el" href="LoopSink_8cpp_source.html#l00120">findBBsToSinkInto()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, <a class="el" href="LoopSink_8cpp.html#a703cbb03b06e37203fc1ab47f6b00e26">MaxNumberOfUseBBsForSinking()</a>, <a class="el" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>, and <a class="el" href="Local_8cpp_source.html#l02425">replaceDominatedUsesWith()</a>.</p>

<p class="reference">Referenced by <a class="el" href="LoopSink_8cpp_source.html#l00254">sinkLoopInvariantInstructions()</a>.</p>

</div>
</div>
<a id="a3ca4ef3cbbfe75edbb7d4428d43fa4f0" name="a3ca4ef3cbbfe75edbb7d4428d43fa4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ca4ef3cbbfe75edbb7d4428d43fa4f0">&#9670;&nbsp;</a></span>sinkLoopInvariantInstructions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool sinkLoopInvariantInstructions </td>
          <td>(</td>
          <td class="paramtype">Loop &amp;&#160;</td>
          <td class="paramname"><em>L</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">AAResults &amp;&#160;</td>
          <td class="paramname"><em>AA</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LoopInfo &amp;&#160;</td>
          <td class="paramname"><em>LI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DominatorTree &amp;&#160;</td>
          <td class="paramname"><em>DT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BlockFrequencyInfo &amp;&#160;</td>
          <td class="paramname"><em>BFI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScalarEvolution *&#160;</td>
          <td class="paramname"><em>SE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sinks instructions from loop's preheader to the loop body if the sum frequency of inserted copy is smaller than preheader's frequency. </p>

<p class="definition">Definition at line <a class="el" href="LoopSink_8cpp_source.html#l00254">254</a> of file <a class="el" href="LoopSink_8cpp_source.html">LoopSink.cpp</a>.</p>

<p class="reference">References <a class="el" href="DeadArgumentElimination_8cpp.html#aa5bfc84fa71b9e3477e24efecb60fae5">assert()</a>, <a class="el" href="MD5_8cpp_source.html#l00058">I</a>, and <a class="el" href="LoopSink_8cpp_source.html#l00174">sinkInstruction()</a>.</p>

</div>
</div>
<a id="af2e02384def40b5bc90257ab002335c4" name="af2e02384def40b5bc90257ab002335c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2e02384def40b5bc90257ab002335c4">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLoopSunk&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> sunk into loop&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5b63b794b937c844b1eb0a19f2565e3d" name="a5b63b794b937c844b1eb0a19f2565e3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b63b794b937c844b1eb0a19f2565e3d">&#9670;&nbsp;</a></span>STATISTIC() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STATISTIC </td>
          <td>(</td>
          <td class="paramtype">NumLoopSunkCloned&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;Number of cloned <a class="el" href="InstructionCombining_8cpp.html#a9360db2a972441c49cdbbabb5b20cc27">instructions</a> sunk into loop&quot;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 13 2022 12:44:45 for LLVM by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
